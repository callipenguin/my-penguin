import{Z as De,Y as Ie,_ as te,$ as U,r as f,a1 as we,a2 as Se,j as e,a3 as Ae,a7 as Te,T as a,al as pt,am as jt,a6 as ye,c as Z,R as mt,d as C,C as ee,a as G,B as l,h as L,O as _,z as O,D as xe,e as ue,f as pe,V as T,ag as R,ah as B,ai as H,X as o,k as je,i as F,P as ne,u as gt,an as Le,ao as vt,U as be,ap as de,L as qe,p as Ye,s as Qe,aq as Pe,ar as ft,v as yt,Q as P,b as bt,A as ie,F as Fe,q as Ct}from"./index-fc0e3f91.js";import{C as Ge}from"./Checkbox-1db6aac8.js";import{E as ke}from"./Edit-fe0d11d7.js";import{D as ze}from"./Delete-2118ac97.js";import{C as oe}from"./Cancel-ace4e9d8.js";import{S as me,A as Dt}from"./Save-fdb75b5a.js";import{A as he}from"./Add-97b0121a.js";import{T as Me,a as V}from"./Tabs-74798590.js";import{B as X}from"./Badge-2e3719a9.js";import{S as Xe}from"./Search-6368caa3.js";import{E as It}from"./ExpandLess-b3a233a0.js";import{E as Ze,C as wt,A as St,a as At,b as Tt}from"./ExpandMore-34411a88.js";import{C as kt}from"./Container-e1bdc80c.js";import"./SwitchBase-f121d878.js";function zt(s){return De("MuiCardActions",s)}Ie("MuiCardActions",["root","spacing"]);const Mt=["disableSpacing","className"],Wt=s=>{const{classes:d,disableSpacing:D}=s;return Te({root:["root",!D&&"spacing"]},zt,d)},Et=te("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(s,d)=>{const{ownerState:D}=s;return[d.root,!D.disableSpacing&&d.spacing]}})(({ownerState:s})=>U({display:"flex",alignItems:"center",padding:8},!s.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Lt=f.forwardRef(function(d,D){const A=we({props:d,name:"MuiCardActions"}),{disableSpacing:m=!1,className:j}=A,u=Se(A,Mt),y=U({},A,{disableSpacing:m}),M=Wt(y);return e.jsx(Et,U({className:Ae(M.root,j),ownerState:y,ref:D},u))}),Pt=Lt;function Ft(s){return De("MuiCardHeader",s)}const $t=Ie("MuiCardHeader",["root","avatar","action","content","title","subheader"]),$e=$t,Rt=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Bt=s=>{const{classes:d}=s;return Te({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Ft,d)},Ht=te("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(s,d)=>U({[`& .${$e.title}`]:d.title,[`& .${$e.subheader}`]:d.subheader},d.root)})({display:"flex",alignItems:"center",padding:16}),Nt=te("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(s,d)=>d.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Ut=te("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(s,d)=>d.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Vt=te("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(s,d)=>d.content})({flex:"1 1 auto"}),Ot=f.forwardRef(function(d,D){const A=we({props:d,name:"MuiCardHeader"}),{action:m,avatar:j,className:u,component:y="div",disableTypography:M=!1,subheader:p,subheaderTypographyProps:h,title:w,titleTypographyProps:z}=A,k=Se(A,Rt),x=U({},A,{component:y,disableTypography:M}),n=Bt(x);let b=w;b!=null&&b.type!==a&&!M&&(b=e.jsx(a,U({variant:j?"body2":"h5",className:n.title,component:"span",display:"block"},z,{children:b})));let $=p;return $!=null&&$.type!==a&&!M&&($=e.jsx(a,U({variant:j?"body2":"body1",className:n.subheader,color:"text.secondary",component:"span",display:"block"},h,{children:$}))),e.jsxs(Ht,U({className:Ae(n.root,u),as:y,ref:D,ownerState:x},k,{children:[j&&e.jsx(Nt,{className:n.avatar,ownerState:x,children:j}),e.jsxs(Vt,{className:n.content,ownerState:x,children:[b,$]}),m&&e.jsx(Ut,{className:n.action,ownerState:x,children:m})]}))}),_t=Ot;function qt(s){return De("MuiInputAdornment",s)}const Yt=Ie("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),Re=Yt;var Be;const Qt=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Gt=(s,d)=>{const{ownerState:D}=s;return[d.root,d[`position${ye(D.position)}`],D.disablePointerEvents===!0&&d.disablePointerEvents,d[D.variant]]},Xt=s=>{const{classes:d,disablePointerEvents:D,hiddenLabel:A,position:m,size:j,variant:u}=s,y={root:["root",D&&"disablePointerEvents",m&&`position${ye(m)}`,u,A&&"hiddenLabel",j&&`size${ye(j)}`]};return Te(y,qt,d)},Zt=te("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Gt})(({theme:s,ownerState:d})=>U({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(s.vars||s).palette.action.active},d.variant==="filled"&&{[`&.${Re.positionStart}&:not(.${Re.hiddenLabel})`]:{marginTop:16}},d.position==="start"&&{marginRight:8},d.position==="end"&&{marginLeft:8},d.disablePointerEvents===!0&&{pointerEvents:"none"})),Jt=f.forwardRef(function(d,D){const A=we({props:d,name:"MuiInputAdornment"}),{children:m,className:j,component:u="div",disablePointerEvents:y=!1,disableTypography:M=!1,position:p,variant:h}=A,w=Se(A,Qt),z=pt()||{};let k=h;h&&z.variant,z&&!k&&(k=z.variant);const x=U({},A,{hiddenLabel:z.hiddenLabel,size:z.size,disablePointerEvents:y,position:p,variant:k}),n=Xt(x);return e.jsx(jt.Provider,{value:null,children:e.jsx(Zt,U({as:u,ownerState:x,className:Ae(n.root,j),ref:D},w,{children:typeof m=="string"&&!M?e.jsx(a,{color:"text.secondary",children:m}):e.jsxs(f.Fragment,{children:[p==="start"?Be||(Be=e.jsx("span",{className:"notranslate",children:"​"})):null,m]})}))})}),Je=Jt,He=Z(e.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree"),Ce=Z(e.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),Kt=Z(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),Ke=Z(e.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),es=Z(e.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag"),Ne=Z(e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder"),ts=Z(e.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync"),Ue={urgent:"#f44336",high:"#ff9800",medium:"#2196f3",low:"#4caf50"},ss={urgent:"긴급",high:"높음",medium:"보통",low:"낮음"},rs=mt.memo(({todo:s,onUpdate:d,onDelete:D,onToggleComplete:A})=>{var z,k;const[m,j]=f.useState(!1),[u,y]=f.useState({title:s.title,description:s.description??"",priority:s.priority,dueDate:s.dueDate??"",tags:((z=s.tags)==null?void 0:z.join(", "))??""}),M=()=>{const x={...s,title:u.title,description:u.description||void 0,priority:u.priority,dueDate:u.dueDate||void 0,tags:u.tags?u.tags.split(",").map(n=>n.trim()).filter(Boolean):void 0,updatedAt:new Date().toISOString()};d(x),j(!1)},p=()=>{var x;y({title:s.title,description:s.description??"",priority:s.priority,dueDate:s.dueDate??"",tags:((x=s.tags)==null?void 0:x.join(", "))??""}),j(!1)},h=s.dueDate&&!s.completed&&C(s.dueDate).isBefore(C(),"day"),w=s.dueDate&&C(s.dueDate).isSame(C(),"day");return e.jsxs(e.Fragment,{children:[e.jsx(ee,{sx:{mb:2,opacity:s.completed?.7:1,borderLeft:`4px solid ${Ue[s.priority]}`,backgroundColor:h?"#ffebee":w?"#fff3e0":"inherit"},children:e.jsx(G,{children:e.jsxs(l,{display:"flex",alignItems:"flex-start",gap:2,children:[e.jsx(Ge,{checked:s.completed,onChange:()=>A(s.id),sx:{mt:-1}}),e.jsxs(l,{flex:1,children:[e.jsxs(l,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(a,{variant:"h6",sx:{textDecoration:s.completed?"line-through":"none",flex:1},children:s.title}),e.jsx(L,{size:"small",icon:e.jsx(es,{}),label:ss[s.priority],sx:{backgroundColor:Ue[s.priority],color:"white",fontSize:"0.75rem"}})]}),s.description&&e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:1,textDecoration:s.completed?"line-through":"none"},children:s.description}),e.jsxs(l,{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",children:[s.dueDate&&e.jsx(L,{size:"small",icon:e.jsx(Ce,{}),label:C(s.dueDate).format("MM/DD"),color:h?"error":w?"warning":"default",variant:"outlined"}),(k=s.tags)==null?void 0:k.map((x,n)=>e.jsx(L,{size:"small",label:x,variant:"outlined",sx:{fontSize:"0.7rem"}},n))]})]}),e.jsxs(l,{display:"flex",flexDirection:"column",gap:1,children:[e.jsx(_,{title:"수정",children:e.jsx(O,{size:"small",onClick:()=>j(!0),disabled:s.completed,children:e.jsx(ke,{fontSize:"small"})})}),e.jsx(_,{title:"삭제",children:e.jsx(O,{size:"small",onClick:()=>D(s.id),color:"error",children:e.jsx(ze,{fontSize:"small"})})})]})]})})}),e.jsxs(xe,{open:m,onClose:p,maxWidth:"sm",fullWidth:!0,children:[e.jsx(ue,{children:"할일 수정 ✏️"}),e.jsx(pe,{children:e.jsxs(l,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsx(T,{label:"제목",value:u.title,onChange:x=>y(n=>({...n,title:x.target.value})),fullWidth:!0,required:!0}),e.jsx(T,{label:"설명",value:u.description,onChange:x=>y(n=>({...n,description:x.target.value})),fullWidth:!0,multiline:!0,rows:3}),e.jsxs(R,{fullWidth:!0,children:[e.jsx(B,{children:"우선순위"}),e.jsxs(H,{value:u.priority,onChange:x=>y(n=>({...n,priority:x.target.value})),label:"우선순위",children:[e.jsx(o,{value:"low",children:"낮음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"urgent",children:"긴급"})]})]}),e.jsx(T,{label:"마감일",type:"date",value:u.dueDate,onChange:x=>y(n=>({...n,dueDate:x.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsx(T,{label:"태그 (쉼표로 구분)",value:u.tags,onChange:x=>y(n=>({...n,tags:x.target.value})),fullWidth:!0,placeholder:"업무, 개인, 공부"})]})}),e.jsxs(je,{children:[e.jsx(F,{onClick:p,startIcon:e.jsx(oe,{}),children:"취소"}),e.jsx(F,{onClick:M,variant:"contained",startIcon:e.jsx(me,{}),disabled:!u.title.trim(),children:"저장"})]})]})]})}),as=({todos:s,epics:d,projects:D,onAddTodo:A,onUpdateTodo:m,onDeleteTodo:j,onToggleComplete:u})=>{const[y,M]=f.useState(""),[p,h]=f.useState({status:"all",priority:"all",epicId:"all",projectId:"all"}),[w,z]=f.useState(0),[k,x]=f.useState(!1),[n,b]=f.useState({title:"",description:"",priority:"medium",dueDate:"",tags:"",epicId:"",projectId:""}),$=f.useMemo(()=>{let t=s;switch(w){case 1:t=t.filter(c=>c.dueDate&&C(c.dueDate).isSame(C(),"day"));break;case 2:t=t.filter(c=>c.dueDate&&C(c.dueDate).isSame(C(),"week"));break;case 3:t=t.filter(c=>c.completed);break}y&&(t=t.filter(c=>{var E,S;return c.title.toLowerCase().includes(y.toLowerCase())||((E=c.description)==null?void 0:E.toLowerCase().includes(y.toLowerCase()))||((S=c.tags)==null?void 0:S.some(Q=>Q.toLowerCase().includes(y.toLowerCase())))})),p.status&&p.status!=="all"&&(t=t.filter(c=>p.status==="completed"?c.completed:!c.completed)),p.priority&&p.priority!=="all"&&(t=t.filter(c=>c.priority===p.priority)),p.epicId&&p.epicId!=="all"&&(t=t.filter(c=>c.epicId===p.epicId)),p.projectId&&p.projectId!=="all"&&(t=t.filter(c=>c.projectId===p.projectId));const r={urgent:0,high:1,medium:2,low:3};return t.sort((c,E)=>c.completed!==E.completed?c.completed?1:-1:r[c.priority]-r[E.priority])},[s,y,p,w]),W=f.useMemo(()=>{const t=s.length,r=s.filter(S=>S.completed).length,c=s.filter(S=>S.dueDate&&C(S.dueDate).isSame(C(),"day")).length,E=s.filter(S=>S.dueDate&&!S.completed&&C(S.dueDate).isBefore(C(),"day")).length;return{total:t,completed:r,today:c,overdue:E}},[s]),q=()=>{if(!n.title.trim())return;const t={title:n.title,description:n.description||void 0,completed:!1,priority:n.priority,dueDate:n.dueDate||void 0,tags:n.tags?n.tags.split(",").map(r=>r.trim()).filter(Boolean):void 0,epicId:n.epicId||void 0,projectId:n.projectId||void 0};A(t),b({title:"",description:"",priority:"medium",dueDate:"",tags:"",epicId:"",projectId:""}),x(!1)},Y=()=>{h({status:"all",priority:"all",epicId:"all",projectId:"all"}),M("")};return e.jsxs(l,{children:[e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(a,{variant:"h4",component:"h1",children:"할일 관리 📝"}),e.jsx(F,{variant:"contained",startIcon:e.jsx(he,{}),onClick:()=>x(!0),children:"할일 추가"})]}),e.jsx(ne,{sx:{p:2,mb:3},children:e.jsxs(l,{display:"flex",gap:4,children:[e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h6",children:W.total}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"전체"})]}),e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h6",color:"success.main",children:W.completed}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"완료"})]}),e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h6",color:"primary",children:W.today}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"오늘"})]}),W.overdue>0&&e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h6",color:"error",children:W.overdue}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"지연"})]})]})}),e.jsxs(Me,{value:w,onChange:(t,r)=>z(r),sx:{mb:2},children:[e.jsx(V,{label:e.jsx(X,{badgeContent:W.total,color:"primary",children:"전체"})}),e.jsx(V,{label:e.jsx(X,{badgeContent:W.today,color:"primary",children:"오늘"})}),e.jsx(V,{label:e.jsx(X,{badgeContent:s.filter(t=>t.dueDate&&C(t.dueDate).isSame(C(),"week")).length,color:"primary",children:"이번주"})}),e.jsx(V,{label:e.jsx(X,{badgeContent:W.completed,color:"success",children:"완료"})})]}),e.jsxs(l,{display:"flex",gap:2,mb:3,flexWrap:"wrap",children:[e.jsx(T,{placeholder:"할일 검색...",value:y,onChange:t=>M(t.target.value),sx:{minWidth:300},InputProps:{startAdornment:e.jsx(Je,{position:"start",children:e.jsx(Xe,{})})}}),e.jsxs(R,{sx:{minWidth:120},children:[e.jsx(B,{children:"상태"}),e.jsxs(H,{value:p.status??"all",onChange:t=>h(r=>({...r,status:t.target.value})),label:"상태",children:[e.jsx(o,{value:"all",children:"전체"}),e.jsx(o,{value:"pending",children:"진행중"}),e.jsx(o,{value:"completed",children:"완료"})]})]}),e.jsxs(R,{sx:{minWidth:120},children:[e.jsx(B,{children:"우선순위"}),e.jsxs(H,{value:p.priority??"all",onChange:t=>h(r=>({...r,priority:t.target.value})),label:"우선순위",children:[e.jsx(o,{value:"all",children:"전체"}),e.jsx(o,{value:"urgent",children:"긴급"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"low",children:"낮음"})]})]}),e.jsxs(R,{sx:{minWidth:150},children:[e.jsx(B,{children:"에픽"}),e.jsxs(H,{value:p.epicId??"all",onChange:t=>h(r=>({...r,epicId:t.target.value})),label:"에픽",children:[e.jsx(o,{value:"all",children:"전체"}),d.map(t=>e.jsxs(o,{value:t.id,children:[t.emoji," ",t.title]},t.id))]})]}),e.jsx(F,{startIcon:e.jsx(Ke,{}),onClick:Y,variant:"outlined",children:"필터 초기화"})]}),e.jsx(l,{children:$.length===0?e.jsx(ne,{sx:{p:4,textAlign:"center"},children:e.jsx(a,{variant:"h6",color:"text.secondary",children:y||Object.values(p).some(t=>t!=="all")?"조건에 맞는 할일이 없습니다 🔍":"아직 할일이 없습니다. 새로운 할일을 추가해보세요! ✨"})}):$.map(t=>e.jsx(rs,{todo:t,onUpdate:m,onDelete:j,onToggleComplete:u},t.id))}),e.jsxs(xe,{open:k,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(ue,{children:"새 할일 추가 ✨"}),e.jsx(pe,{children:e.jsxs(l,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsx(T,{label:"제목",value:n.title,onChange:t=>b(r=>({...r,title:t.target.value})),fullWidth:!0,required:!0}),e.jsx(T,{label:"설명",value:n.description,onChange:t=>b(r=>({...r,description:t.target.value})),fullWidth:!0,multiline:!0,rows:3}),e.jsxs(R,{fullWidth:!0,children:[e.jsx(B,{children:"우선순위"}),e.jsxs(H,{value:n.priority,onChange:t=>b(r=>({...r,priority:t.target.value})),label:"우선순위",children:[e.jsx(o,{value:"low",children:"낮음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"urgent",children:"긴급"})]})]}),e.jsx(T,{label:"마감일",type:"date",value:n.dueDate,onChange:t=>b(r=>({...r,dueDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsxs(R,{fullWidth:!0,children:[e.jsx(B,{children:"에픽"}),e.jsxs(H,{value:n.epicId,onChange:t=>b(r=>({...r,epicId:t.target.value})),label:"에픽",children:[e.jsx(o,{value:"",children:"선택 안함"}),d.map(t=>e.jsxs(o,{value:t.id,children:[t.emoji," ",t.title]},t.id))]})]}),e.jsxs(R,{fullWidth:!0,children:[e.jsx(B,{children:"프로젝트"}),e.jsxs(H,{value:n.projectId,onChange:t=>b(r=>({...r,projectId:t.target.value})),label:"프로젝트",children:[e.jsx(o,{value:"",children:"선택 안함"}),D.map(t=>e.jsx(o,{value:t.id,children:t.title},t.id))]})]}),e.jsx(T,{label:"태그 (쉼표로 구분)",value:n.tags,onChange:t=>b(r=>({...r,tags:t.target.value})),fullWidth:!0,placeholder:"업무, 개인, 공부"})]})}),e.jsxs(je,{children:[e.jsx(F,{onClick:()=>x(!1),startIcon:e.jsx(oe,{}),children:"취소"}),e.jsx(F,{onClick:q,variant:"contained",startIcon:e.jsx(me,{}),disabled:!n.title.trim(),children:"추가"})]})]})]})},fe={planning:"#9e9e9e",active:"#4caf50",paused:"#ff9800",completed:"#2196f3",cancelled:"#f44336"},Ve={planning:"계획중",active:"진행중",paused:"일시정지",completed:"완료",cancelled:"취소됨"},Oe={planning:e.jsx(Pe,{}),active:e.jsx(Pe,{}),paused:e.jsx(ft,{}),completed:e.jsx(yt,{}),cancelled:e.jsx(oe,{})},ls={urgent:"#f44336",high:"#ff9800",medium:"#2196f3",low:"#4caf50"},_e={urgent:"긴급",high:"높음",medium:"보통",low:"낮음"},is=({epic:s,projects:d,onEdit:D,onDelete:A,onProjectClick:m,onAddProject:j})=>{var q,Y;const[u,y]=f.useState(!1),[M,p]=f.useState(!1),[h,w]=f.useState({title:s.title,description:s.description,status:s.status,priority:s.priority,startDate:s.startDate??"",dueDate:s.dueDate??"",color:s.color,emoji:s.emoji??"",tags:((q=s.tags)==null?void 0:q.join(", "))??""}),z=gt(),k=s.isTemporary===!0,x=()=>{const t={...s,title:h.title,description:h.description,status:h.status,priority:h.priority,startDate:h.startDate||void 0,dueDate:h.dueDate||void 0,color:h.color,emoji:h.emoji||void 0,tags:h.tags?h.tags.split(",").map(r=>r.trim()).filter(Boolean):void 0,updatedAt:new Date().toISOString()};D(t),p(!1)},n=()=>{var t;w({title:s.title,description:s.description,status:s.status,priority:s.priority,startDate:s.startDate??"",dueDate:s.dueDate??"",color:s.color,emoji:s.emoji??"",tags:((t=s.tags)==null?void 0:t.join(", "))??""}),p(!1)},b=s.projects.filter(t=>t.status==="completed").length,$=s.projects.length,W=s.dueDate&&s.status!=="completed"&&C(s.dueDate).isBefore(C(),"day");return e.jsxs(ee,{elevation:k?4:2,sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",transition:"all 0.3s ease",border:k?`2px dashed ${z.palette.warning.main}`:"none",backgroundColor:k?"rgba(255, 152, 0, 0.05)":"inherit","&:hover":{transform:"translateY(-4px)",boxShadow:z.shadows[8]}},children:[k&&e.jsx(l,{sx:{backgroundColor:z.palette.warning.main,color:"white",px:2,py:1,textAlign:"center"},children:e.jsx(a,{variant:"caption",fontWeight:"bold",children:"⚠️ 임시 보관함 - 새로운 에픽을 만들어서 프로젝트들을 정리해보세요!"})}),e.jsx(_t,{avatar:e.jsx(Le,{sx:{bgcolor:s.color,width:48,height:48,fontSize:"1.5rem"},children:s.emoji||Oe[s.status]}),title:e.jsx(a,{variant:"h6",fontWeight:"bold",noWrap:!0,children:s.title}),subheader:e.jsxs(l,{children:[e.jsx(L,{label:Ve[s.status],size:"small",sx:{mr:1,mb:.5,backgroundColor:fe[s.status],color:"white"}}),e.jsx(L,{label:_e[s.priority],size:"small",variant:"outlined",sx:{mb:.5}})]}),action:!k&&e.jsx(O,{children:e.jsx(vt,{})})}),e.jsx(G,{children:e.jsxs(l,{display:"flex",alignItems:"flex-start",gap:2,children:[s.emoji&&e.jsx(Le,{sx:{bgcolor:s.color,width:48,height:48},children:s.emoji}),e.jsxs(l,{flex:1,children:[e.jsxs(l,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(a,{variant:"h5",component:"h2",sx:{flex:1},children:s.title}),e.jsx(L,{size:"small",icon:Oe[s.status],label:Ve[s.status],sx:{backgroundColor:fe[s.status],color:"white"}}),e.jsx(L,{size:"small",label:_e[s.priority],sx:{backgroundColor:ls[s.priority],color:"white",fontSize:"0.75rem"}})]}),e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.description}),e.jsxs(l,{mb:2,children:[e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsxs(a,{variant:"body2",children:["진행률: ",b,"/",$," 프로젝트"]}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:[Math.round(s.progress),"%"]})]}),e.jsx(be,{variant:"determinate",value:s.progress,sx:{height:8,borderRadius:4,backgroundColor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{backgroundColor:s.color}}})]}),e.jsxs(l,{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",children:[s.startDate&&e.jsx(L,{size:"small",icon:e.jsx(Ce,{}),label:`시작: ${C(s.startDate).format("MM/DD")}`,variant:"outlined"}),s.dueDate&&e.jsx(L,{size:"small",icon:e.jsx(Ce,{}),label:`마감: ${C(s.dueDate).format("MM/DD")}`,color:W?"error":"default",variant:"outlined"}),(Y=s.tags)==null?void 0:Y.map((t,r)=>e.jsx(L,{size:"small",label:t,variant:"outlined",sx:{fontSize:"0.7rem"}},r))]})]}),e.jsxs(l,{display:"flex",flexDirection:"column",gap:1,children:[e.jsx(_,{title:"수정",children:e.jsx(O,{size:"small",onClick:()=>p(!0),children:e.jsx(ke,{fontSize:"small"})})}),e.jsx(_,{title:"삭제",children:e.jsx(O,{size:"small",onClick:()=>A(s),color:"error",children:e.jsx(ze,{fontSize:"small"})})}),e.jsx(_,{title:u?"접기":"펼치기",children:e.jsx(O,{size:"small",onClick:()=>y(!u),children:u?e.jsx(It,{}):e.jsx(Ze,{})})})]})]})}),e.jsx(wt,{in:u,children:e.jsxs(G,{sx:{pt:0},children:[e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(a,{variant:"h6",display:"flex",alignItems:"center",gap:1,children:[e.jsx(de,{})," 프로젝트 (",$,")"]}),e.jsx(F,{startIcon:e.jsx(he,{}),onClick:()=>j(s.id),variant:"outlined",size:"small",children:"프로젝트 추가"})]}),s.projects.length===0?e.jsx(a,{variant:"body2",color:"text.secondary",textAlign:"center",py:2,children:"아직 프로젝트가 없습니다. 프로젝트를 추가해보세요! 🚀"}):e.jsx(qe,{dense:!0,children:s.projects.map(t=>e.jsx(Ye,{sx:{pl:0},children:e.jsx(Qe,{primary:e.jsxs(l,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(a,{variant:"body2",children:t.title}),e.jsx(L,{size:"small",label:t.status,sx:{fontSize:"0.7rem",height:"20px",backgroundColor:fe[t.status]??"#grey",color:"white"}})]}),secondary:`진행률: ${t.progress}% | 태스크: ${t.tasks.length}개`})},t.id))})]})}),k&&e.jsx(Pt,{sx:{justifyContent:"center",pb:2},children:e.jsx(F,{variant:"contained",color:"primary",startIcon:e.jsx(he,{}),onClick:()=>{D({})},children:"새 에픽 만들기"})}),e.jsxs(xe,{open:M,onClose:n,maxWidth:"md",fullWidth:!0,children:[e.jsx(ue,{children:"에픽 수정 🏛️"}),e.jsx(pe,{children:e.jsxs(l,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsxs(l,{display:"flex",gap:2,children:[e.jsx(T,{label:"제목",value:h.title,onChange:t=>w(r=>({...r,title:t.target.value})),fullWidth:!0,required:!0}),e.jsx(T,{label:"이모지",value:h.emoji,onChange:t=>w(r=>({...r,emoji:t.target.value})),sx:{width:100},placeholder:"🏛️"})]}),e.jsx(T,{label:"설명",value:h.description,onChange:t=>w(r=>({...r,description:t.target.value})),fullWidth:!0,multiline:!0,rows:3}),e.jsxs(l,{display:"flex",gap:2,children:[e.jsxs(R,{fullWidth:!0,children:[e.jsx(B,{children:"상태"}),e.jsxs(H,{value:h.status,onChange:t=>w(r=>({...r,status:t.target.value})),label:"상태",children:[e.jsx(o,{value:"planning",children:"계획중"}),e.jsx(o,{value:"active",children:"진행중"}),e.jsx(o,{value:"paused",children:"일시정지"}),e.jsx(o,{value:"completed",children:"완료"}),e.jsx(o,{value:"cancelled",children:"취소됨"})]})]}),e.jsxs(R,{fullWidth:!0,children:[e.jsx(B,{children:"우선순위"}),e.jsxs(H,{value:h.priority,onChange:t=>w(r=>({...r,priority:t.target.value})),label:"우선순위",children:[e.jsx(o,{value:"low",children:"낮음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"urgent",children:"긴급"})]})]})]}),e.jsxs(l,{display:"flex",gap:2,children:[e.jsx(T,{label:"시작일",type:"date",value:h.startDate,onChange:t=>w(r=>({...r,startDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsx(T,{label:"마감일",type:"date",value:h.dueDate,onChange:t=>w(r=>({...r,dueDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}})]}),e.jsx(T,{label:"색상",type:"color",value:h.color,onChange:t=>w(r=>({...r,color:t.target.value})),fullWidth:!0}),e.jsx(T,{label:"태그 (쉼표로 구분)",value:h.tags,onChange:t=>w(r=>({...r,tags:t.target.value})),fullWidth:!0,placeholder:"업무, 개인, 프로젝트"})]})}),e.jsxs(je,{children:[e.jsx(F,{onClick:n,startIcon:e.jsx(oe,{}),children:"취소"}),e.jsx(F,{onClick:x,variant:"contained",startIcon:e.jsx(me,{}),disabled:!h.title.trim(),children:"저장"})]})]})]})},ns=({epics:s,onAddEpic:d,onUpdateEpic:D,onDeleteEpic:A,onAddProject:m})=>{const[j,u]=f.useState(""),[y,M]=f.useState("all"),[p,h]=f.useState("all"),[w,z]=f.useState(0),[k,x]=f.useState(!1),[n,b]=f.useState({title:"",description:"",status:"planning",priority:"medium",startDate:"",dueDate:"",color:"#2196f3",emoji:"🏛️",tags:""}),$=f.useMemo(()=>{let t=s;switch(w){case 1:t=t.filter(c=>c.status==="active");break;case 2:t=t.filter(c=>c.status==="completed");break}j&&(t=t.filter(c=>{var E;return c.title.toLowerCase().includes(j.toLowerCase())||c.description.toLowerCase().includes(j.toLowerCase())||((E=c.tags)==null?void 0:E.some(S=>S.toLowerCase().includes(j.toLowerCase())))})),y!=="all"&&(t=t.filter(c=>c.status===y)),p!=="all"&&(t=t.filter(c=>c.priority===p));const r={urgent:0,high:1,medium:2,low:3};return t.sort((c,E)=>c.status==="completed"&&E.status!=="completed"?1:c.status!=="completed"&&E.status==="completed"?-1:r[c.priority]-r[E.priority])},[s,j,y,p,w]),W=f.useMemo(()=>{const t=s.length,r=s.filter(S=>S.status==="active").length,c=s.filter(S=>S.status==="completed").length,E=s.filter(S=>S.status==="planning").length;return{total:t,active:r,completed:c,planning:E}},[s]),q=()=>{if(!n.title.trim())return;const t={title:n.title,description:n.description,status:n.status,priority:n.priority,startDate:n.startDate||void 0,dueDate:n.dueDate||void 0,color:n.color,emoji:n.emoji||void 0,tags:n.tags?n.tags.split(",").map(r=>r.trim()).filter(Boolean):void 0};d(t),b({title:"",description:"",status:"planning",priority:"medium",startDate:"",dueDate:"",color:"#2196f3",emoji:"🏛️",tags:""}),x(!1)},Y=()=>{M("all"),h("all"),u("")};return e.jsxs(l,{children:[e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(a,{variant:"h4",component:"h1",children:"에픽 관리 🏛️"}),e.jsx(F,{variant:"contained",startIcon:e.jsx(he,{}),onClick:()=>x(!0),children:"에픽 추가"})]}),e.jsx(ne,{sx:{p:2,mb:3},children:e.jsxs(l,{display:"flex",gap:4,children:[e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h6",children:W.total}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"전체"})]}),e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h6",color:"primary",children:W.active}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"진행중"})]}),e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h6",color:"success.main",children:W.completed}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"완료"})]}),e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h6",color:"warning.main",children:W.planning}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"계획중"})]})]})}),e.jsxs(Me,{value:w,onChange:(t,r)=>z(r),sx:{mb:2},children:[e.jsx(V,{label:e.jsx(X,{badgeContent:W.total,color:"primary",children:"전체"})}),e.jsx(V,{label:e.jsx(X,{badgeContent:W.active,color:"primary",children:"진행중"})}),e.jsx(V,{label:e.jsx(X,{badgeContent:W.completed,color:"success",children:"완료"})})]}),e.jsxs(l,{display:"flex",gap:2,mb:3,flexWrap:"wrap",children:[e.jsx(T,{placeholder:"에픽 검색...",value:j,onChange:t=>u(t.target.value),sx:{minWidth:300},InputProps:{startAdornment:e.jsx(Je,{position:"start",children:e.jsx(Xe,{})})}}),e.jsxs(R,{sx:{minWidth:120},children:[e.jsx(B,{children:"상태"}),e.jsxs(H,{value:y,onChange:t=>M(t.target.value),label:"상태",children:[e.jsx(o,{value:"all",children:"전체"}),e.jsx(o,{value:"planning",children:"계획중"}),e.jsx(o,{value:"active",children:"진행중"}),e.jsx(o,{value:"paused",children:"일시정지"}),e.jsx(o,{value:"completed",children:"완료"}),e.jsx(o,{value:"cancelled",children:"취소됨"})]})]}),e.jsxs(R,{sx:{minWidth:120},children:[e.jsx(B,{children:"우선순위"}),e.jsxs(H,{value:p,onChange:t=>h(t.target.value),label:"우선순위",children:[e.jsx(o,{value:"all",children:"전체"}),e.jsx(o,{value:"urgent",children:"긴급"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"low",children:"낮음"})]})]}),e.jsx(F,{startIcon:e.jsx(Ke,{}),onClick:Y,variant:"outlined",children:"필터 초기화"})]}),e.jsx(l,{children:$.length===0?e.jsx(ne,{sx:{p:4,textAlign:"center"},children:e.jsx(a,{variant:"h6",color:"text.secondary",children:j||y!=="all"||p!=="all"?"조건에 맞는 에픽이 없습니다 🔍":"아직 에픽이 없습니다. 새로운 에픽을 추가해보세요! 🏛️"})}):e.jsx(P,{container:!0,spacing:2,children:$.map(t=>e.jsx(P,{item:!0,xs:12,children:e.jsx(is,{epic:t,onUpdate:D,onDelete:A,onAddProject:m})},t.id))})}),e.jsxs(xe,{open:k,onClose:()=>x(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(ue,{children:"새 에픽 추가 🏛️"}),e.jsx(pe,{children:e.jsxs(l,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsxs(l,{display:"flex",gap:2,children:[e.jsx(T,{label:"제목",value:n.title,onChange:t=>b(r=>({...r,title:t.target.value})),fullWidth:!0,required:!0}),e.jsx(T,{label:"이모지",value:n.emoji,onChange:t=>b(r=>({...r,emoji:t.target.value})),sx:{width:100},placeholder:"🏛️"})]}),e.jsx(T,{label:"설명",value:n.description,onChange:t=>b(r=>({...r,description:t.target.value})),fullWidth:!0,multiline:!0,rows:3,required:!0}),e.jsxs(l,{display:"flex",gap:2,children:[e.jsxs(R,{fullWidth:!0,children:[e.jsx(B,{children:"상태"}),e.jsxs(H,{value:n.status,onChange:t=>b(r=>({...r,status:t.target.value})),label:"상태",children:[e.jsx(o,{value:"planning",children:"계획중"}),e.jsx(o,{value:"active",children:"진행중"}),e.jsx(o,{value:"paused",children:"일시정지"}),e.jsx(o,{value:"completed",children:"완료"}),e.jsx(o,{value:"cancelled",children:"취소됨"})]})]}),e.jsxs(R,{fullWidth:!0,children:[e.jsx(B,{children:"우선순위"}),e.jsxs(H,{value:n.priority,onChange:t=>b(r=>({...r,priority:t.target.value})),label:"우선순위",children:[e.jsx(o,{value:"low",children:"낮음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"urgent",children:"긴급"})]})]})]}),e.jsxs(l,{display:"flex",gap:2,children:[e.jsx(T,{label:"시작일",type:"date",value:n.startDate,onChange:t=>b(r=>({...r,startDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsx(T,{label:"마감일",type:"date",value:n.dueDate,onChange:t=>b(r=>({...r,dueDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}})]}),e.jsx(T,{label:"색상",type:"color",value:n.color,onChange:t=>b(r=>({...r,color:t.target.value})),fullWidth:!0}),e.jsx(T,{label:"태그 (쉼표로 구분)",value:n.tags,onChange:t=>b(r=>({...r,tags:t.target.value})),fullWidth:!0,placeholder:"업무, 개인, 프로젝트"})]})}),e.jsxs(je,{children:[e.jsx(F,{onClick:()=>x(!1),startIcon:e.jsx(oe,{}),children:"취소"}),e.jsx(F,{onClick:q,variant:"contained",startIcon:e.jsx(me,{}),disabled:!n.title.trim()||!n.description.trim(),children:"추가"})]})]})]})},Cs=()=>{const[s,d]=f.useState(0),[D,A]=f.useState(!1),{todos:m,epics:j,projects:u,addTodo:y,updateTodo:M,deleteTodo:p,toggleTodoComplete:h,addEpic:w,updateEpic:z,deleteEpic:k,addProject:x,getTodosByProjectId:n,getEpicById:b,getProjectsByEpicId:$,refreshFirebaseData:W,syncFirebaseToLocal:q,migrateLocalDataToFirebase:Y,isMigrationButtonActive:t,checkLocalDataForMigration:r}=bt(),[c,E]=f.useState(!1),[S,Q]=f.useState(null),[J,se]=f.useState(null),et=async()=>{A(!0),se(null);try{const i=await q();se(i.message),i.success&&console.log("🔄 동기화 성공:",i.details)}catch(i){console.error("❌ 동기화 처리 실패:",i),se(`동기화 실패: ${i}`)}finally{A(!1)}},tt=async()=>{if(!r().hasData){Q("마이그레이션할 로컬 데이터가 없습니다.");return}E(!0),Q(null);try{const g=await Y();Q(g.message),g.success&&console.log("🎉 마이그레이션 성공:",g.details)}catch(g){console.error("❌ 마이그레이션 처리 실패:",g),Q(`마이그레이션 실패: ${g}`)}finally{E(!1)}},ge=f.useMemo(()=>{const i=t(),g=r();return{show:i&&g.hasData,disabled:c||!g.hasData,tooltip:i?g.hasData?`마이그레이션 가능: 에픽 ${g.epicsCount}개, 프로젝트 ${g.projectsCount}개, 할일 ${g.todosCount}개`:"마이그레이션할 로컬 데이터가 없습니다":"마이그레이션 기능은 2025년 8월 8일까지만 사용 가능합니다"}},[c,t,r]);f.useEffect(()=>{if(S&&S.includes("성공")){const i=setTimeout(()=>{Q(null)},5e3);return()=>clearTimeout(i)}},[S]),f.useEffect(()=>{if(J&&J.includes("완료")){const i=setTimeout(()=>{se(null)},5e3);return()=>clearTimeout(i)}},[J]);const N=f.useMemo(()=>{const i=m.length,g=m.filter(v=>v.completed).length,I=i>0?Math.round(g/i*100):0,K=m.filter(v=>v.dueDate&&C(v.dueDate).isSame(C(),"day")).length,ve=m.filter(v=>v.dueDate&&!v.completed&&C(v.dueDate).isBefore(C(),"day")).length,ce=m.filter(v=>v.dueDate&&!v.completed&&C(v.dueDate).isAfter(C(),"day")).length,ae={urgent:m.filter(v=>v.priority==="urgent").length,high:m.filter(v=>v.priority==="high").length,medium:m.filter(v=>v.priority==="medium").length,low:m.filter(v=>v.priority==="low").length},le=[];for(let v=6;v>=0;v--){const xt=C().subtract(v,"day").format("YYYY-MM-DD"),ut=m.filter(Ee=>Ee.completedAt&&C(Ee.completedAt).isSame(C().subtract(v,"day"),"day")).length;le.push({date:xt,completed:ut})}return{totalTodos:i,completedTodos:g,completionRate:I,todayTodos:K,overdueTodos:ve,upcomingTodos:ce,priorityBreakdown:ae,dailyCompletions:le}},[m]),re=f.useMemo(()=>{const i=j.length,g=j.filter(v=>v.status==="active").length,I=j.filter(v=>v.status==="completed").length,K=u.length,ve=u.filter(v=>v.status==="completed").length,ce=m.filter(v=>v.epicId),ae=ce.length,le=ce.filter(v=>v.completed).length;return{totalEpics:i,activeEpics:g,completedEpics:I,totalProjects:K,completedProjects:ve,totalTodos:ae,completedTodos:le,completionRate:ae>0?Math.round(le/ae*100):0}},[j,u,m]),We=f.useMemo(()=>{const i=[];u.forEach(I=>{const K=n(I.id);K.length>0&&i.push({type:"project",project:I,todos:K,epic:b(I.epicId||"")||null})});const g=m.filter(I=>!I.projectId);return g.length>0&&i.push({type:"unassigned",project:null,todos:g,epic:null}),i},[u,m,n,b]),st=async i=>{await y(i)},rt=async i=>{await M(i)},at=async i=>{await p(i)},lt=async i=>{await h(i)},it=async i=>{await w(i)},nt=async i=>{await z(i)},ot=async i=>{await k(i)},ct=async i=>{const g=prompt("프로젝트 제목을 입력하세요:");g&&g.trim()&&await x({title:g.trim(),description:"",status:"active",priority:"medium",startDate:C().toISOString(),progress:0,tags:[]},i)},dt=()=>e.jsxs(l,{children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"계획 관리 개요 📊"}),e.jsxs(P,{container:!0,spacing:3,children:[e.jsx(P,{item:!0,xs:12,md:6,children:e.jsx(ee,{children:e.jsxs(G,{children:[e.jsxs(a,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[e.jsx(de,{color:"primary"}),"할일 통계"]}),e.jsxs(l,{mb:2,children:[e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsx(a,{variant:"body2",children:"완료율"}),e.jsxs(a,{variant:"body2",children:[N.completionRate,"%"]})]}),e.jsx(be,{variant:"determinate",value:N.completionRate,sx:{height:8,borderRadius:4}})]}),e.jsxs(P,{container:!0,spacing:2,children:[e.jsx(P,{item:!0,xs:6,children:e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h4",color:"primary",children:N.totalTodos}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"전체"})]})}),e.jsx(P,{item:!0,xs:6,children:e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h4",color:"success.main",children:N.completedTodos}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"완료"})]})}),e.jsx(P,{item:!0,xs:6,children:e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h4",color:"warning.main",children:N.todayTodos}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"오늘"})]})}),e.jsx(P,{item:!0,xs:6,children:e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h4",color:"error.main",children:N.overdueTodos}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"지연"})]})})]}),e.jsxs(l,{mt:2,children:[e.jsx(a,{variant:"body2",gutterBottom:!0,children:"우선순위별 분포"}),e.jsxs(l,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(L,{size:"small",label:`긴급 ${N.priorityBreakdown.urgent}`,color:"error"}),e.jsx(L,{size:"small",label:`높음 ${N.priorityBreakdown.high}`,color:"warning"}),e.jsx(L,{size:"small",label:`보통 ${N.priorityBreakdown.medium}`,color:"primary"}),e.jsx(L,{size:"small",label:`낮음 ${N.priorityBreakdown.low}`,color:"success"})]})]})]})})}),e.jsx(P,{item:!0,xs:12,md:6,children:e.jsx(ee,{children:e.jsxs(G,{children:[e.jsxs(a,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[e.jsx(He,{color:"secondary"}),"에픽 통계"]}),e.jsxs(P,{container:!0,spacing:2,children:[e.jsx(P,{item:!0,xs:6,children:e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h4",color:"primary",children:re.totalEpics}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"전체 에픽"})]})}),e.jsx(P,{item:!0,xs:6,children:e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h4",color:"success.main",children:re.activeEpics}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"진행중"})]})}),e.jsx(P,{item:!0,xs:6,children:e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h4",color:"info.main",children:re.totalProjects}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"총 프로젝트"})]})}),e.jsx(P,{item:!0,xs:6,children:e.jsxs(l,{textAlign:"center",children:[e.jsx(a,{variant:"h4",color:"secondary.main",children:re.totalTodos}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"에픽 할일"})]})})]})]})})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(ee,{children:e.jsxs(G,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"진행중인 에픽들 🚀"}),j.filter(i=>i.status==="active").length===0?e.jsx(a,{variant:"body2",color:"text.secondary",textAlign:"center",py:2,children:"진행중인 에픽이 없습니다. 새로운 에픽을 만들어보세요! ✨"}):e.jsx(l,{display:"flex",flexDirection:"column",gap:2,children:j.filter(i=>i.status==="active").slice(0,3).map(i=>e.jsxs(l,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(l,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:i.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem"},children:i.emoji}),e.jsxs(l,{flex:1,children:[e.jsx(a,{variant:"body1",fontWeight:"bold",children:i.title}),e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:i.description}),e.jsxs(a,{variant:"body2",children:[Math.round(i.progress),"%"]})]}),e.jsx(be,{variant:"determinate",value:i.progress,sx:{mt:.5,height:4,borderRadius:2,"& .MuiLinearProgress-bar":{backgroundColor:i.color}}})]})]},i.id))})]})})})]})]}),ht=()=>e.jsxs(l,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"📁 프로젝트별 할일 관리"}),We.length===0?e.jsx(ee,{sx:{borderRadius:2},children:e.jsxs(G,{sx:{textAlign:"center",py:6},children:[e.jsx(a,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"아직 할일이 없어요! 📝"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"새로운 할일을 추가해서 프로젝트별로 관리해보세요!"})]})}):We.map((i,g)=>e.jsxs(St,{sx:{mb:2,borderRadius:2},children:[e.jsx(At,{expandIcon:e.jsx(Ze,{}),children:e.jsxs(l,{display:"flex",alignItems:"center",gap:2,width:"100%",children:[i.type==="project"&&i.project?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{color:"primary"}),e.jsxs(l,{flex:1,children:[e.jsx(a,{variant:"h6",children:i.project.title}),i.epic&&e.jsx(L,{size:"small",label:`${i.epic.emoji} ${i.epic.title}`,sx:{fontSize:"0.7rem",backgroundColor:i.epic.color+"20",color:i.epic.color,border:`1px solid ${i.epic.color}40`,mt:.5,borderRadius:2}})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{color:"secondary"}),e.jsx(a,{variant:"h6",flex:1,children:"미분류 할일"})]}),e.jsx(L,{size:"small",label:`${i.todos.filter(I=>I.completed).length}/${i.todos.length}`,color:"primary",sx:{borderRadius:2}})]})}),e.jsx(Tt,{children:e.jsx(qe,{dense:!0,children:i.todos.map(I=>e.jsxs(Ye,{sx:{px:0},children:[e.jsx(Ct,{sx:{minWidth:32},children:e.jsx(Ge,{size:"small",checked:I.completed,onChange:()=>h(I.id)})}),e.jsx(Qe,{primary:e.jsx(a,{variant:"body2",sx:{textDecoration:I.completed?"line-through":"none",opacity:I.completed?.7:1},children:I.title}),secondary:e.jsxs(l,{display:"flex",alignItems:"center",gap:1,mt:.5,children:[e.jsx(L,{size:"small",label:I.priority==="urgent"?"긴급":I.priority==="high"?"높음":I.priority==="medium"?"보통":"낮음",color:I.priority==="urgent"?"error":I.priority==="high"?"warning":I.priority==="medium"?"primary":"success",sx:{fontSize:"0.7rem",height:"18px",borderRadius:2}}),I.dueDate&&e.jsx(a,{variant:"caption",color:"text.secondary",children:C(I.dueDate).format("MM/DD")})]})}),e.jsxs(l,{display:"flex",gap:.5,children:[e.jsx(_,{title:"수정",children:e.jsx(O,{size:"small",onClick:()=>{console.log("Edit todo:",I.id)},children:e.jsx(ke,{fontSize:"small"})})}),e.jsx(_,{title:"삭제",children:e.jsx(O,{size:"small",color:"error",onClick:()=>p(I.id),children:e.jsx(ze,{fontSize:"small"})})})]})]},I.id))})})]},g))]});return e.jsxs(kt,{maxWidth:"xl",children:[e.jsx(a,{variant:"h4",component:"h1",fontWeight:"bold",children:"📝 계획 관리"}),e.jsxs(l,{py:3,children:[e.jsx(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:e.jsxs(l,{display:"flex",gap:2,children:[e.jsx(_,{title:"🔄 Firebase → 로컬 동기화 (Firebase 데이터로 로컬 데이터를 덮어씁니다)",children:e.jsx(F,{variant:"outlined",startIcon:e.jsx(ts,{sx:{animation:D?"spin 1s linear infinite":"none"}}),onClick:et,disabled:D,sx:{"@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}},children:D?"동기화 중...":"Firebase → 로컬 동기화"})}),ge.show&&e.jsx(_,{title:ge.tooltip,children:e.jsx(F,{variant:"outlined",startIcon:e.jsx(Kt,{}),onClick:tt,disabled:ge.disabled,color:"warning",sx:{borderColor:"orange",color:"orange","&:hover":{borderColor:"darkorange",backgroundColor:"rgba(255, 165, 0, 0.04)"}},children:c?"마이그레이션 중...":"로컬 데이터 마이그레이션"})})]})}),e.jsx(ie,{severity:"info",sx:{mb:3},children:e.jsxs(a,{variant:"body2",children:["💡 ",e.jsx("strong",{children:"뽀모도로에서 생성한 프로젝트와 할일"}),"이 여기에 함께 표시됩니다.",e.jsx("strong",{children:'"Firebase → 로컬 동기화"'})," 버튼을 클릭하면 Firebase의 최신 데이터로 로컬 데이터를 교체합니다!"]})}),(()=>{const i=t(),g=r();return i&&g.hasData?e.jsx(ie,{severity:"warning",sx:{mb:3},children:e.jsxs(a,{variant:"body2",children:["🚀 ",e.jsx("strong",{children:"로컬 데이터 마이그레이션 가능!"}),"에픽 ",g.epicsCount,"개, 프로젝트 ",g.projectsCount,"개, 할일 ",g.todosCount,"개를 Firebase로 이동할 수 있습니다. (2025년 8월 8일까지 이용 가능)"]})}):i&&!g.hasData?e.jsx(ie,{severity:"success",sx:{mb:3},children:e.jsxs(a,{variant:"body2",children:["✅ ",e.jsx("strong",{children:"모든 데이터가 Firebase에 저장되어 있습니다!"}),"마이그레이션할 로컬 데이터가 없습니다."]})}):null})(),S&&e.jsx(ie,{severity:S.includes("성공")?"success":"error",sx:{mb:3},action:e.jsx(O,{size:"small",onClick:()=>Q(null),sx:{"&:hover":{backgroundColor:"transparent"}},children:e.jsx(Fe,{fontSize:"small"})}),children:S}),J&&e.jsx(ie,{severity:J.includes("완료")?"success":"error",sx:{mb:3},action:e.jsx(O,{size:"small",onClick:()=>se(null),sx:{"&:hover":{backgroundColor:"transparent"}},children:e.jsx(Fe,{fontSize:"small"})}),children:J}),e.jsx(ne,{sx:{mb:3},children:e.jsxs(Me,{value:s,onChange:(i,g)=>d(g),variant:"fullWidth",children:[e.jsx(V,{icon:e.jsx(Dt,{}),label:"개요",iconPosition:"start"}),e.jsx(V,{icon:e.jsx(de,{}),label:`할일 (${N.totalTodos})`,iconPosition:"start"}),e.jsx(V,{icon:e.jsx(He,{}),label:`에픽 (${re.totalEpics})`,iconPosition:"start"}),e.jsx(V,{icon:e.jsx(Ne,{}),label:`프로젝트 (${u.length})`,iconPosition:"start"})]})}),e.jsxs(l,{children:[s===0&&dt(),s===1&&e.jsx(as,{todos:m,epics:j,projects:u,onAddTodo:st,onUpdateTodo:rt,onDeleteTodo:at,onToggleComplete:lt}),s===2&&e.jsx(ns,{epics:j,onAddEpic:it,onUpdateEpic:nt,onDeleteEpic:ot,onAddProject:ct}),s===3&&ht()]})]})]})};export{Cs as default};
