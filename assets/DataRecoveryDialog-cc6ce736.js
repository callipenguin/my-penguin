import{a as g,j as s,D as ls,b as ds,B as i,aC as I,c as xs,A as F,a6 as j,a7 as p,T as a,C as $,ao as hs,a_ as js,a$ as k,aB as R,bH as ps,f as d,az as _,be as z,bf as G,b6 as H,bg as L,aL as fs,aA as N,bI as O,aH as us,aI as gs,aE as V,e as ms}from"./mui-f5b39a97.js";import{a as ys,V as bs,W as Ss,X as vs,Y as Cs,Z as Is}from"./index-16e83210.js";import{r as Ns,g as Os,e as Js,a as $s,i as ks,b as Es}from"./Dashboard-0b26b6b9.js";import"./dayjs-9d6a636c.js";const As=({open:J,onClose:E,onDataRecovered:m})=>{var P,U,w;const[x,X]=g.useState(null),[D,Y]=g.useState(!1),[W,r]=g.useState(""),[Z,o]=g.useState("info"),[b,q]=g.useState(0),[h,K]=g.useState(!1),{todos:S,epics:v,projects:C,addTodo:B,addEpic:T,addProject:A}=ys();g.useEffect(()=>{J&&(f(),M())},[J]);const f=()=>{const e=bs();X(e)},M=()=>{const e=localStorage.getItem("data_backup");Y(!!e)},Q=()=>{try{const e=Ss();r(`ë°ì´í„° ë°±ì—… ì™„ë£Œ! (${e.todos.length}ê°œ í• ì¼, ${e.epics.length}ê°œ ì—í”½, ${e.projects.length}ê°œ í”„ë¡œì íŠ¸)`),o("success"),M()}catch{r("ë°±ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),o("error")}},ss=()=>{try{const e=vs();e?(r(`ë°ì´í„° ë³µêµ¬ ì™„ë£Œ! (${e.todos.length}ê°œ í• ì¼, ${e.epics.length}ê°œ ì—í”½, ${e.projects.length}ê°œ í”„ë¡œì íŠ¸)`),o("success"),f(),m()):(r("ë³µêµ¬í•  ë°±ì—… ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."),o("error"))}catch{r("ë³µêµ¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),o("error")}},es=()=>{try{const e=Cs();r("ìŠ¤ë§ˆíŠ¸ ë³µêµ¬ ì™„ë£Œ! ê¸°ë³¸ ë°ì´í„°ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤."),o("success"),f(),m()}catch{r("ìŠ¤ë§ˆíŠ¸ ë³µêµ¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),o("error")}},rs=()=>{try{Ns()?(r("ì‹¤ì œ ë°ì´í„° ë³µêµ¬ ì™„ë£Œ! (ì§€ê¸‰ê²°ì˜ì‚¬ì´íŠ¸ ë¦¬ë‰´ì–¼ í”„ë¡œì íŠ¸ í¬í•¨)"),o("success"),f(),m()):(r("ì‹¤ì œ ë°ì´í„° ë³µêµ¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),o("error"))}catch{r("ì‹¤ì œ ë°ì´í„° ë³µêµ¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),o("error")}},ts=()=>{try{Os(),r("ì‚¬ìš©ì ë°ì´í„° JSON íŒŒì¼ ìƒì„± ì™„ë£Œ!"),o("success")}catch{r("ì‚¬ìš©ì ë°ì´í„° JSON ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),o("error")}},os=()=>{if(confirm("ì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."))try{Is(),r("ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."),o("info"),f(),m()}catch{r("ë°ì´í„° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),o("error")}},as=()=>{try{const e=Js(S,v,C);r(`ì—‘ì…€ íŒŒì¼ ë‚´ë³´ë‚´ê¸° ì™„ë£Œ! (${e})`),o("success")}catch{r("ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),o("error")}},cs=()=>{try{const e=$s(S,v,C);r("JSON íŒŒì¼ ë‚´ë³´ë‚´ê¸° ì™„ë£Œ! (í†µê³„ í¬í•¨)"),o("success")}catch{r("JSON ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),o("error")}},is=async e=>{var y;const u=(y=e.target.files)==null?void 0:y[0];if(u)try{const t=await ks(u);if(h){let n={todos:0,epics:0,projects:0};t.epics.forEach(c=>{v.find(l=>l.id===c.id)||(T(c),n.epics++)}),t.projects.forEach(c=>{C.find(l=>l.id===c.id)||(A(c),n.projects++)}),t.todos.forEach(c=>{S.find(l=>l.id===c.id)||(B(c),n.todos++)}),r(`ì—‘ì…€ ë°ì´í„° ì¶”ê°€ ì™„ë£Œ! (${n.todos}ê°œ í• ì¼, ${n.epics}ê°œ ì—í”½, ${n.projects}ê°œ í”„ë¡œì íŠ¸ ì¶”ê°€)`)}else localStorage.setItem("todos",JSON.stringify(t.todos)),localStorage.setItem("epics",JSON.stringify(t.epics)),localStorage.setItem("projects",JSON.stringify(t.projects)),r(`ì—‘ì…€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ! (${t.todos.length}ê°œ í• ì¼, ${t.epics.length}ê°œ ì—í”½, ${t.projects.length}ê°œ í”„ë¡œì íŠ¸)`);o("success"),f(),m()}catch(t){r(`ì—‘ì…€ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: ${t}`),o("error")}e.target.value=""},ns=async e=>{var y;const u=(y=e.target.files)==null?void 0:y[0];if(u)try{const t=await Es(u);if(h){let n={todos:0,epics:0,projects:0};t.epics.forEach(c=>{v.find(l=>l.id===c.id)||(T(c),n.epics++)}),t.projects.forEach(c=>{C.find(l=>l.id===c.id)||(A(c),n.projects++)}),t.todos.forEach(c=>{S.find(l=>l.id===c.id)||(B(c),n.todos++)}),r(`JSON ë°ì´í„° ì¶”ê°€ ì™„ë£Œ! (${n.todos}ê°œ í• ì¼, ${n.epics}ê°œ ì—í”½, ${n.projects}ê°œ í”„ë¡œì íŠ¸ ì¶”ê°€)`)}else localStorage.setItem("todos",JSON.stringify(t.todos)),localStorage.setItem("epics",JSON.stringify(t.epics)),localStorage.setItem("projects",JSON.stringify(t.projects)),r(`JSON ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ! (${t.todos.length}ê°œ í• ì¼, ${t.epics.length}ê°œ ì—í”½, ${t.projects.length}ê°œ í”„ë¡œì íŠ¸)`);o("success"),f(),m()}catch(t){r(`JSON ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: ${t}`),o("error")}e.target.value=""};return s.jsxs(ls,{open:J,onClose:E,maxWidth:"md",fullWidth:!0,children:[s.jsx(ds,{children:s.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[s.jsx(I,{color:"primary"}),"ë°ì´í„° ê´€ë¦¬ ì„¼í„° ğŸ› ï¸"]})}),s.jsxs(xs,{children:[W&&s.jsx(F,{severity:Z,sx:{mb:2},onClose:()=>r(""),children:W}),s.jsx(j,{sx:{mb:3},children:s.jsxs(p,{children:[s.jsx(a,{variant:"h6",gutterBottom:!0,children:"ğŸ“Š í˜„ì¬ ë°ì´í„° ìƒíƒœ"}),s.jsxs(i,{display:"flex",gap:2,flexWrap:"wrap",children:[s.jsx($,{label:`í• ì¼: ${((P=x==null?void 0:x.todos)==null?void 0:P.length)||0}ê°œ`,color:"primary"}),s.jsx($,{label:`ì—í”½: ${((U=x==null?void 0:x.epics)==null?void 0:U.length)||0}ê°œ`,color:"secondary"}),s.jsx($,{label:`í”„ë¡œì íŠ¸: ${((w=x==null?void 0:x.projects)==null?void 0:w.length)||0}ê°œ`,color:"info"})]})]})}),s.jsx(hs,{sx:{mb:3},children:s.jsxs(js,{value:b,onChange:(e,u)=>q(u),variant:"fullWidth",children:[s.jsx(k,{icon:s.jsx(I,{}),label:"ë³µêµ¬",iconPosition:"start"}),s.jsx(k,{icon:s.jsx(R,{}),label:"ë‚´ë³´ë‚´ê¸°",iconPosition:"start"}),s.jsx(k,{icon:s.jsx(ps,{}),label:"ê°€ì ¸ì˜¤ê¸°",iconPosition:"start"})]})}),b===0&&s.jsxs(i,{children:[s.jsx(j,{sx:{mb:3,border:"2px solid",borderColor:"error.main"},children:s.jsxs(p,{children:[s.jsx(a,{variant:"h6",gutterBottom:!0,color:"error",children:"ğŸ†˜ ì‹¤ì œ ë°ì´í„° ë³µêµ¬ (ê¸´ê¸‰)"}),s.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸ë¡œ ì¸í•´ ì†ì‹¤ëœ 'ì§€ê¸‰ê²°ì˜ì‚¬ì´íŠ¸ ë¦¬ë‰´ì–¼' í”„ë¡œì íŠ¸ë¥¼ í¬í•¨í•œ ì‹¤ì œ ë°ì´í„°ë¥¼ ë³µêµ¬í•©ë‹ˆë‹¤."}),s.jsx(d,{variant:"contained",color:"error",onClick:rs,startIcon:s.jsx(_,{}),fullWidth:!0,sx:{mb:1},children:"ë‚´ ì‹¤ì œ ë°ì´í„° ë³µêµ¬í•˜ê¸°"}),s.jsx(d,{variant:"outlined",color:"error",onClick:ts,startIcon:s.jsx(R,{}),fullWidth:!0,size:"small",children:"ë‚´ ë°ì´í„° JSONìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ"})]})}),s.jsx(j,{sx:{mb:3},children:s.jsxs(p,{children:[s.jsx(a,{variant:"h6",gutterBottom:!0,color:"primary",children:"ğŸš€ ë¹ ë¥¸ ë³µêµ¬ (ì¶”ì²œ)"}),s.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"ë°ì´í„°ê°€ ì‚¬ë¼ì¡Œê±°ë‚˜ ìƒ˜í”Œ ë°ì´í„°ë¡œ ë®ì–´ì¨ì§„ ê²½ìš°, ê¸°ë³¸ ì‚¬ìš©ì ë°ì´í„°ë¡œ ë³µêµ¬í•©ë‹ˆë‹¤."}),s.jsx(d,{variant:"contained",color:"primary",onClick:es,startIcon:s.jsx(I,{}),fullWidth:!0,children:"ìŠ¤ë§ˆíŠ¸ ë³µêµ¬ ì‹¤í–‰"})]})}),s.jsxs(z,{children:[s.jsx(G,{expandIcon:s.jsx(H,{}),children:s.jsx(a,{variant:"h6",children:"ğŸ”„ ë°±ì—… ë° ë³µêµ¬"})}),s.jsx(L,{children:s.jsxs(i,{display:"flex",flexDirection:"column",gap:2,children:[s.jsx(d,{variant:"outlined",onClick:Q,startIcon:s.jsx(_,{}),fullWidth:!0,children:"í˜„ì¬ ë°ì´í„° ë°±ì—…í•˜ê¸°"}),s.jsxs(d,{variant:"outlined",onClick:ss,startIcon:s.jsx(I,{}),disabled:!D,fullWidth:!0,children:["ë°±ì—…ì—ì„œ ë³µêµ¬í•˜ê¸° ",!D&&"(ë°±ì—… ì—†ìŒ)"]})]})})]}),s.jsxs(z,{children:[s.jsx(G,{expandIcon:s.jsx(H,{}),children:s.jsx(a,{variant:"h6",color:"error",children:"âš ï¸ ìœ„í—˜í•œ ì‘ì—…"})}),s.jsx(L,{children:s.jsx(d,{variant:"outlined",color:"error",onClick:os,startIcon:s.jsx(fs,{}),fullWidth:!0,children:"ëª¨ë“  ë°ì´í„° ì‚­ì œ"})})]})]}),b===1&&s.jsxs(i,{children:[s.jsx(a,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"ğŸ“¤ ë°ì´í„° ë‚´ë³´ë‚´ê¸°"}),s.jsxs(i,{display:"flex",flexDirection:"column",gap:2,children:[s.jsx(j,{children:s.jsxs(p,{children:[s.jsxs(i,{display:"flex",alignItems:"center",gap:2,mb:2,children:[s.jsx(N,{color:"success"}),s.jsxs(i,{flex:1,children:[s.jsx(a,{variant:"h6",children:"ì—‘ì…€ íŒŒì¼ (.xlsx)"}),s.jsx(a,{variant:"body2",color:"text.secondary",children:"í• ì¼, ì—í”½, í”„ë¡œì íŠ¸ë¥¼ ê°ê° ì‹œíŠ¸ë¡œ ë¶„ë¦¬í•˜ì—¬ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ëƒ…ë‹ˆë‹¤."})]})]}),s.jsx(d,{variant:"contained",color:"success",onClick:as,startIcon:s.jsx(N,{}),fullWidth:!0,children:"ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°"})]})}),s.jsx(j,{children:s.jsxs(p,{children:[s.jsxs(i,{display:"flex",alignItems:"center",gap:2,mb:2,children:[s.jsx(O,{color:"info"}),s.jsxs(i,{flex:1,children:[s.jsx(a,{variant:"h6",children:"JSON íŒŒì¼ (.json)"}),s.jsx(a,{variant:"body2",color:"text.secondary",children:"ëª¨ë“  ë°ì´í„°ì™€ í†µê³„ ì •ë³´ë¥¼ í¬í•¨í•œ JSON íŒŒì¼ë¡œ ë‚´ë³´ëƒ…ë‹ˆë‹¤."})]})]}),s.jsx(d,{variant:"contained",color:"info",onClick:cs,startIcon:s.jsx(O,{}),fullWidth:!0,children:"JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°"})]})})]})]}),b===2&&s.jsxs(i,{children:[s.jsx(a,{variant:"h6",gutterBottom:!0,sx:{mb:2},children:"ğŸ“¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°"}),s.jsx(j,{sx:{mb:3},children:s.jsxs(p,{children:[s.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"ğŸ“‹ ê°€ì ¸ì˜¤ê¸° ëª¨ë“œ ì„¤ì •"}),s.jsx(us,{control:s.jsx(gs,{checked:h,onChange:e=>K(e.target.checked),color:"primary"}),label:s.jsxs(i,{children:[s.jsx(a,{variant:"body2",children:h?"ğŸ”€ ì¶”ê°€ ëª¨ë“œ":"ğŸ”„ êµì²´ ëª¨ë“œ"}),s.jsx(a,{variant:"caption",color:"text.secondary",children:h?"ê¸°ì¡´ ë°ì´í„°ì— ìƒˆ ë°ì´í„°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤ (ì¤‘ë³µ ì œì™¸)":"ê¸°ì¡´ ë°ì´í„°ë¥¼ ì™„ì „íˆ êµì²´í•©ë‹ˆë‹¤"})]})})]})}),s.jsxs(i,{display:"flex",flexDirection:"column",gap:2,children:[s.jsx(j,{children:s.jsxs(p,{children:[s.jsxs(i,{display:"flex",alignItems:"center",gap:2,mb:2,children:[s.jsx(N,{color:"success"}),s.jsxs(i,{flex:1,children:[s.jsx(a,{variant:"h6",children:"ì—‘ì…€ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°"}),s.jsx(a,{variant:"body2",color:"text.secondary",children:"ì—‘ì…€ íŒŒì¼(.xlsx)ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. 'í• ì¼', 'ì—í”½', 'í”„ë¡œì íŠ¸' ì‹œíŠ¸ë¥¼ ì¸ì‹í•©ë‹ˆë‹¤."})]})]}),s.jsxs(d,{variant:"contained",color:"success",component:"label",startIcon:h?s.jsx(V,{}):s.jsx(N,{}),fullWidth:!0,children:[h?"ì—‘ì…€ ë°ì´í„° ì¶”ê°€í•˜ê¸°":"ì—‘ì…€ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°",s.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:is,style:{display:"none"}})]})]})}),s.jsx(j,{children:s.jsxs(p,{children:[s.jsxs(i,{display:"flex",alignItems:"center",gap:2,mb:2,children:[s.jsx(O,{color:"info"}),s.jsxs(i,{flex:1,children:[s.jsx(a,{variant:"h6",children:"JSON íŒŒì¼ ê°€ì ¸ì˜¤ê¸°"}),s.jsx(a,{variant:"body2",color:"text.secondary",children:"JSON íŒŒì¼(.json)ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ë‚´ë³´ë‚¸ í˜•ì‹ê³¼ í˜¸í™˜ë©ë‹ˆë‹¤."})]})]}),s.jsxs(d,{variant:"contained",color:"info",component:"label",startIcon:h?s.jsx(V,{}):s.jsx(O,{}),fullWidth:!0,children:[h?"JSON ë°ì´í„° ì¶”ê°€í•˜ê¸°":"JSON íŒŒì¼ ê°€ì ¸ì˜¤ê¸°",s.jsx("input",{type:"file",accept:".json",onChange:ns,style:{display:"none"}})]})]})})]})]}),s.jsx(F,{severity:"info",sx:{mt:2},children:s.jsxs(a,{variant:"body2",children:["ğŸ’¡ ",s.jsx("strong",{children:"ê°œë°œì ë„êµ¬ ì‚¬ìš©ë²•:"}),s.jsx("br",{}),"F12 â†’ Console íƒ­ì—ì„œ ",s.jsx("code",{children:"dataRecovery.current()"}),"ë¡œ í˜„ì¬ ë°ì´í„° í™•ì¸ ê°€ëŠ¥"]})})]}),s.jsx(ms,{children:s.jsx(d,{onClick:E,children:"ë‹«ê¸°"})})]})};export{As as default};
