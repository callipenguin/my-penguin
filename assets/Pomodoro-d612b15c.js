import{u as Lt,n as Yt,a,j as e,B as j,T as m,ab as zt,a6 as ue,a7 as xe,bF as Ut,X as _t,bG as Jt,f as I,F as U,I as _,S as J,M as n,aE as Pe,L as Ht,q as Gt,aH as Qt,aJ as Xt,C as qt,A as xt,af as Kt,ah as Zt,ag as Vt,o as es,ai as ts,al as ss,_ as os,D as Fe,b as Oe,c as Ne,d as se,e as $e}from"./mui-ea599dee.js";import{R as rs,S as ls,T as ns,U as is,a as as,g as N,l as mt,i as We,s as ht}from"./index-a725ad54.js";import"./dayjs-9d6a636c.js";const fs=({themeConfig:d})=>{var it,at,ct,dt,ut;const y=Lt(),H=Yt(y.breakpoints.down("md")),G=rs(d),$=ls(d);ns(d);const{isActive:me,time:he,totalTime:pe,selectedProject:je,selectedTask:ge,isBreak:ve,completedSessions:fe,sessionStartTime:cs,currentSessionId:ds,startTimer:pt,pauseTimer:jt,resetTimer:gt,setTime:Re,setProject:Q,setTask:W,setIsBreak:us}=is(),{epics:R,projects:S,getTodosByProjectId:xs,getEpicById:ms,addEpic:vt,addProject:ft,refreshFirebaseData:hs}=as(),[v,L]=a.useState(me),[x,X]=a.useState(Math.floor(pe/60)),[p,E]=a.useState(he),[h,Te]=a.useState(null),[i,Y]=a.useState(je),[u,M]=a.useState(ge),[ps,Tt]=a.useState([]),[k,q]=a.useState({}),[D,oe]=a.useState(ve),[bt,Le]=a.useState(fe),[be,Ye]=a.useState([]),g=a.useRef(null),w=a.useRef(0),re=a.useRef(0),[ze,le]=a.useState({x:50,y:50}),[Ue,_e]=a.useState([]),[P,ne]=a.useState(null),[f,ie]=a.useState(null),[K,F]=a.useState(null),[St,ae]=a.useState(!1),[A,Je]=a.useState(null),[wt,Z]=a.useState(!1),[It,V]=a.useState(!1),[yt,z]=a.useState(!1),[ee,He]=a.useState(""),[Se,Ge]=a.useState(""),[we,Qe]=a.useState("🎯"),[Ie,Xe]=a.useState("#FF6B6B"),[ye,qe]=a.useState("medium"),[ce,Ke]=a.useState(""),[Ze,Ve]=a.useState(""),[te,et]=a.useState(""),de=a.useRef(null),C=a.useRef(!1),tt="recentPomodoroEpicProjectCombinations",Et=()=>{try{const t=localStorage.getItem(tt);if(t){const s=JSON.parse(t);Ye(s.slice(0,3))}}catch(t){console.error("최근 조합 로드 실패:",t)}},st=(t,s)=>{const o=R.find(c=>c.id===t),r=S.find(c=>c.id===s);if(!o||!r)return;const l={id:`${t}-${s}`,epicId:t,epicTitle:o.title,epicEmoji:o.emoji||"🎯",projectId:s,projectTitle:r.title,lastUsed:new Date().toISOString()};try{const T=[...be].filter(B=>B.id!==l.id),b=[l,...T].slice(0,3);Ye(b),localStorage.setItem(tt,JSON.stringify(b))}catch(c){console.error("최근 조합 저장 실패:",c)}},kt=t=>{const s=R.find(r=>r.id===t.epicId),o=S.find(r=>r.id===t.projectId);s&&o&&(Te(s),Y(o),Q(o),M(null),W(null),st(t.epicId,t.projectId))};a.useEffect(()=>{L(me),E(he),Y(je),M(ge),oe(ve),Le(fe),X(Math.floor(pe/60))},[me,he,je,ge,ve,fe,pe]),a.useEffect(()=>{Dt(),ot(),Et(),$t();try{de.current=new Audio,de.current.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZgdT32YorBjOH3vbYhTYEJYHU99uLNwgYgtD32YcrBTOH2vbYgzUEJYHW99uLNwgWgdD32YorBTOH2vbYgzQEJYPY99uLNwgXgdP32YcrBDOG2fXWgTYEJ4LS9dqMNwcUgNP32I0qBjOH3fVwKdOoAo+OgNT22I0qBjOE0/TUmzEGFYDO9dyIKwUzhdj42YYz6DOEz/TQjC8UgNP32IsyBjOH3fXYyDQODYHQ8teBONQ4HoPU9tyIrSoGLYHO9diJNwgZgdT32YorBmQ"}catch(T){console.warn("알림 사운드 초기화 실패:",T)}const t=()=>{document.hidden?(console.log("🎮 Pomodoro 페이지 비활성화 - 상태 저장"),O()):(console.log("🎮 Pomodoro 페이지 활성화 - 백그라운드 동기화 시작"),ot(),setTimeout(()=>Ae(),100))},s=()=>{console.log("🚪 페이지 종료 전 상태 저장"),O()},o=()=>{console.log("🔥 윈도우 포커스 - 동기화"),setTimeout(()=>Ae(),100)},r=()=>{console.log("💤 윈도우 블러 - 상태 저장"),O()},l=()=>{console.log("📄 페이지 표시 - 동기화"),setTimeout(()=>Ae(),100)},c=()=>{console.log("🙈 페이지 숨김 - 상태 저장"),O()};return document.addEventListener("visibilitychange",t),window.addEventListener("beforeunload",s),window.addEventListener("focus",o),window.addEventListener("blur",r),window.addEventListener("pageshow",l),window.addEventListener("pagehide",c),()=>{O(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",s),window.removeEventListener("focus",o),window.removeEventListener("blur",r),window.removeEventListener("pageshow",l),window.removeEventListener("pagehide",c)}},[]),a.useEffect(()=>{v||E(x*60)},[x,v]),a.useEffect(()=>{let t=null,s=null;return v&&p>0?(C.current=!1,t=setInterval(()=>{E(o=>{const r=o-1,l=x*60,c=(l-r)/l*100;return ke(c),r})},1e3),s=setInterval(()=>{O()},5e3)):p===0&&(console.log(`⏰ 타이머 완료 감지! isActive: ${v}, time: ${p}, timerCompleted: ${C.current}`),C.current?console.log("⚠️ 이미 완료 처리됨 - 중복 실행 방지"):(console.log("🎯 handleTimerComplete 호출 시작!"),De())),()=>{t&&clearInterval(t),s&&clearInterval(s)}},[v,p,x]),a.useEffect(()=>{if(!v)return;const s=setInterval(()=>{const r=(x*60-p)/60*2*Math.PI,l=35,c=50,T=50,b=c+Math.cos(r-Math.PI/2)*l,B=T+Math.sin(r-Math.PI/2)*l;le({x:b,y:B})},100);return()=>clearInterval(s)},[v,p,x]),a.useEffect(()=>{Ee()},[x]);const Ee=()=>{const s=[];for(let o=0;o<60;o++)s.push({id:o,angle:o*360/60,filled:!1});_e(s)},ke=t=>{const o=Math.floor(t/100*60);_e(r=>r.map((l,c)=>({...l,filled:c<o})))},Dt=async()=>{try{const t=N();if(t){const s=await mt(t.uid,"projects");s.success&&s.data&&Tt(s.data)}}catch(t){console.error("프로젝트 로드 실패:",t)}},ot=async()=>{try{const t=N();if(t){const s=await mt(t.uid,"projectTodos");s.success&&s.data&&(console.log("🎮 Pomodoro: Firebase에서 할일 로드 성공:",s.data),q(s.data))}else{const s=localStorage.getItem("projectTodos");if(s){const o=JSON.parse(s);q(o)}}}catch(t){console.error("할일 로드 실패:",t);const s=localStorage.getItem("projectTodos");if(s){const o=JSON.parse(s);q(o)}}},At=async()=>{if(console.log("🎯 handleCreateEpic 함수 호출됨!"),console.log("입력된 데이터:",{title:ee,description:Se,emoji:we,color:Ie,priority:ye}),!ee.trim()){console.log("❌ 제목이 비어있음");return}const t=ee.trim();if(R.find(o=>o.title.toLowerCase()===t.toLowerCase())){alert(`❌ 이미 "${t}" 이름의 에픽이 존재합니다.
다른 이름을 사용해주세요.`);return}Z(!1);try{console.log("🚀 addEpic 호출 시작...");const o={title:t,description:Se.trim()||"",emoji:we,color:Ie,priority:ye,status:"planning",startDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],tags:[]};console.log("📦 생성할 에픽 데이터:",o),await vt(o),console.log("✅ addEpic 완료!"),setTimeout(()=>{const r=R.find(l=>l.title===t);r&&(Te(r),console.log("🎯 생성된 에픽 자동 선택:",r.title))},300),He(""),Ge(""),Qe("🎯"),Xe("#FF6B6B"),qe("medium"),console.log("✅ 에픽 생성 완료!")}catch(o){console.error("❌ 에픽 생성 실패:",o),(o==null?void 0:o.code)==="resource-exhausted"?alert("❌ Firebase 일일 사용량을 초과했습니다. 내일 다시 시도해주세요."):alert(`에픽 생성 중 오류가 발생했습니다: ${(o==null?void 0:o.message)||o}`),Z(!0)}},Ct=async()=>{if(!ce.trim())return;const t=ce.trim();if((h?S.filter(r=>r.epicId===h.id):S).find(r=>r.title.toLowerCase()===t.toLowerCase())){alert(`❌ 이미 "${t}" 이름의 프로젝트가 존재합니다.
다른 이름을 사용해주세요.`);return}V(!1);try{console.log("🚀 프로젝트 생성 시작..."),await ft({title:t,description:Ze.trim(),status:"active",priority:"medium",progress:0},h==null?void 0:h.id),setTimeout(()=>{const l=(h?S.filter(c=>c.epicId===h.id):S).find(c=>c.title===t);l&&(Y(l),Q(l),console.log("🎯 생성된 프로젝트 자동 선택:",l.title))},300),Ke(""),Ve(""),console.log("✅ 프로젝트 생성 완료!")}catch(r){console.error("❌ 프로젝트 생성 실패:",r),(r==null?void 0:r.code)==="resource-exhausted"?alert("❌ Firebase 일일 사용량을 초과했습니다. 내일 다시 시도해주세요."):alert(`프로젝트 생성 중 오류가 발생했습니다: ${(r==null?void 0:r.message)||r}`),V(!0)}},Mt=async()=>{var o,r;if(console.log("🚀 handleCreateTask 호출됨!"),console.log("입력 데이터:",{newTaskTitle:te,selectedProject:i==null?void 0:i.title,projectId:i==null?void 0:i.id}),!te.trim()||!i){console.log("❌ 테스크 제목이 비어있거나 프로젝트가 선택되지 않음");return}z(!1);const t=N();if(!t){console.log("❌ 사용자 정보 없음");return}const s={id:`task_${Date.now()}`,title:te.trim(),completed:!1,createdAt:new Date().toISOString()};try{console.log("🚀 테스크 생성 시작..."),console.log("생성할 테스크:",s),console.log("현재 projectTodos 상태:",k),console.log("선택된 프로젝트의 기존 테스크들:",k[i.id]||[]);const l={...k,[i.id]:[...k[i.id]||[],s]};console.log("업데이트될 projectTodos:",l);const c=await ht(t.uid,"projectTodos",l);console.log("Firebase 저장 결과:",c),c.success?(console.log("✅ Firebase 저장 성공! 로컬 상태 업데이트 시작..."),q(l),M(s),W(s),console.log("🎯 생성된 테스크 자동 선택:",s.title),et(""),console.log("✅ 테스크 생성 완료!"),setTimeout(()=>{console.log("📊 업데이트 후 projectTodos 상태:",l);const T=(l[i.id]||[]).filter(b=>!b.completed);console.log("📊 업데이트 후 availableTasks:",T)},100)):(console.error("❌ Firebase 저장 실패:",c),((o=c.error)==null?void 0:o.code)==="resource-exhausted"?alert("❌ Firebase 일일 사용량을 초과했습니다. 내일 다시 시도해주세요."):alert(`테스크 저장 중 오류가 발생했습니다: ${((r=c.error)==null?void 0:r.message)||c.error}`),z(!0))}catch(l){console.error("❌ 테스크 생성 실패:",l),(l==null?void 0:l.code)==="resource-exhausted"?alert("❌ Firebase 일일 사용량을 초과했습니다. 내일 다시 시도해주세요."):alert(`테스크 생성 중 오류가 발생했습니다: ${(l==null?void 0:l.message)||l}`),z(!0)}},Bt=async t=>{if(!i)return;const s=N();if(s)try{const o={...k,[i.id]:k[i.id].map(l=>l.id===t.id?{...l,completed:!l.completed}:l)};(await ht(s.uid,"projectTodos",o)).success&&(q(o),(u==null?void 0:u.id)===t.id&&!t.completed&&M(null))}catch(o){console.error("테스크 상태 업데이트 실패:",o)}},Pt=t=>{const s=Math.floor(t/60),o=t%60;return`${s.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},Ft=()=>{if(!i||!u){alert("프로젝트와 작업을 선택해주세요!");return}if(h&&i&&st(h.id,i.id),Q(i),W(u),Re(x),!pt()){alert("타이머 시작에 실패했습니다. 프로젝트와 작업을 다시 확인해주세요.");return}L(!0);const s=Date.now(),o=new Date().toISOString(),r=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;ne(o),ie(r),F(null),C.current=!1,g.current=s,w.current=p,re.current=s,Ee(),setTimeout(()=>O(),100),console.log(`⏰ 타이머 시작: ${p}초 (${Math.floor(p/60)}분 ${p%60}초), 세션 ID: ${r}`)},Ot=()=>{var t;if(jt(),g.current){const s=Date.now(),o=Math.floor((s-g.current)/1e3),r=Math.max(0,w.current-o);if(console.log(`⏸️ 타이머 일시정지: ${o}초 경과, ${r}초 남음`),o>0&&f&&K!==f&&P&&i&&u){const l=Math.round(o/60*100)/100;We(((t=N())==null?void 0:t.uid)||"",{projectId:i.id,projectTitle:i.title,taskId:u.id,taskTitle:u.title,sessionType:D?"break":"work",duration:x,actualDuration:l,startTime:P,endTime:new Date().toISOString(),completed:!1}),F(f)}E(r)}L(!1),g.current=null,w.current=0,localStorage.removeItem("pomodoroTimerState")},rt=()=>{var o;gt();const t=v,s=g.current?Math.floor((Date.now()-g.current)/1e3):0;if(t&&s>0&&f&&K!==f&&P&&i&&u){const r=Math.round(s/60*100)/100;We(((o=N())==null?void 0:o.uid)||"",{projectId:i.id,projectTitle:i.title,taskId:u.id,taskTitle:u.title,sessionType:D?"break":"work",duration:x,actualDuration:r,startTime:P,endTime:new Date().toISOString(),completed:!1}),F(f)}L(!1),E(x*60),ne(null),ie(null),F(null),C.current=!1,le({x:50,y:50}),g.current=null,w.current=0,re.current=0,localStorage.removeItem("pomodoroTimerState"),Ee(),console.log("🔄 타이머 리셋")},Nt=()=>{try{if("Notification"in window&&Notification.permission==="granted"&&new Notification("🎉 뽀모도로 완료!",{body:`${x}분 집중 완료! 수고하셨어요!`,icon:"/favicon.ico"}),de.current)for(let r=0;r<3;r++)setTimeout(()=>{var l;(l=de.current)==null||l.play().catch(c=>console.warn("사운드 재생 실패:",c))},r*200);"vibrate"in navigator&&navigator.vibrate([500,200,500,200,500]);let t=0;const s=document.title,o=setInterval(()=>{document.title=t%2===0?"🎉 완료! 🎉":s,t++,t>10&&(clearInterval(o),document.title=s)},500)}catch(t){console.warn("알림 재생 실패:",t)}},De=async()=>{if(C.current){console.log("⚠️ handleTimerComplete 중복 실행 차단!");return}C.current=!0,console.log("🎯 handleTimerComplete 실행 시작");const t=g.current?Math.floor((Date.now()-g.current)/1e3):x*60,s=Math.round(t/60*100)/100;if(L(!1),Nt(),f&&K!==f&&P&&i&&u)try{const o=N();if(o){console.log(`💾 세션 저장 시도: ${f}`);const r={projectId:i.id,projectTitle:i.title,taskId:u.id,taskTitle:u.title,sessionType:D?"break":"work",duration:x,actualDuration:s,startTime:P,endTime:new Date().toISOString(),completed:!0};(await We(o.uid,r)).success&&(F(f),console.log(`✅ 세션 저장 완료: ${f}`),Je({projectTitle:i.title,taskTitle:u.title,sessionType:D?"휴식":"집중",duration:x,actualMinutes:s}),ae(!0),setTimeout(()=>ae(!1),5e3))}}catch(o){console.error("뽀모도로 세션 저장 중 오류:",o)}else i&&u&&(console.log(`⚠️ 이미 저장된 세션: ${f} (savedSessionId: ${K})`),Je({projectTitle:i.title,taskTitle:u.title,sessionType:D?"휴식":"집중",duration:x,actualMinutes:s}),ae(!0),setTimeout(()=>ae(!1),5e3));if(D)oe(!1),X(25),E(25*60),C.current=!1;else{Le(r=>r+1),oe(!0);const o=Math.max(5,Math.floor(x/5));X(o),E(o*60),C.current=!1}g.current=null,w.current=0,re.current=0,ie(null),F(null),localStorage.removeItem("pomodoroTimerState"),ne(null),console.log(`✅ 타이머 완료: ${s}분 경과`)};a.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]);const O=()=>{if(v&&g.current){const t={isActive:v,startTime:g.current,totalDuration:w.current,currentTime:p,selectedMinutes:x,sessionStartTime:P,isBreak:D,selectedProjectId:i==null?void 0:i.id,selectedTaskId:u==null?void 0:u.id,selectedProjectTitle:i==null?void 0:i.title,selectedTaskTitle:u==null?void 0:u.title,currentSessionId:f,savedSessionId:K,timestamp:Date.now()};localStorage.setItem("pomodoroTimerState",JSON.stringify(t)),console.log("⏰ 뽀모도로 상태 저장됨 - 남은시간:",Math.floor(p/60),"분",p%60,"초")}},$t=()=>{try{const t=localStorage.getItem("pomodoroTimerState");if(!t)return;const s=JSON.parse(t),o=Date.now();if(o-s.timestamp>2*60*60*1e3){localStorage.removeItem("pomodoroTimerState");return}if(s.isActive&&s.startTime){const r=Math.floor((o-s.startTime)/1e3),l=Math.max(0,s.totalDuration-r);if(l>0){s.selectedProjectId&&s.selectedProjectTitle&&Y({id:s.selectedProjectId,title:s.selectedProjectTitle,description:"",status:"active",priority:"medium",progress:0,tasks:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),s.selectedTaskId&&s.selectedTaskTitle&&M({id:s.selectedTaskId,title:s.selectedTaskTitle,completed:!1,createdAt:new Date().toISOString()}),L(!0),E(l),X(s.selectedMinutes),ne(s.sessionStartTime),oe(s.isBreak),ie(s.currentSessionId||null),F(s.savedSessionId||null),g.current=s.startTime,w.current=s.totalDuration,re.current=o;const c=(s.totalDuration-l)/s.totalDuration*100;ke(c);const b=(s.selectedMinutes*60-l)/60*2*Math.PI,B=35,Me=50,Be=50,Wt=Me+Math.cos(b-Math.PI/2)*B,Rt=Be+Math.sin(b-Math.PI/2)*B;le({x:Wt,y:Rt}),console.log(`⏰ 뽀모도로 상태 복원 성공: ${Math.floor(l/60)}분 ${l%60}초 남음`)}else localStorage.removeItem("pomodoroTimerState"),De()}}catch(t){console.error("뽀모도로 상태 복원 실패:",t),localStorage.removeItem("pomodoroTimerState")}},Ae=()=>{if(v&&g.current){const t=Date.now(),s=Math.floor((t-g.current)/1e3),o=Math.max(0,w.current-s);if(console.log(`⏰ 백그라운드 동기화: ${s}초 경과, 남은 시간: ${Math.floor(o/60)}분 ${o%60}초`),E(o),o<=0)localStorage.removeItem("pomodoroTimerState"),De();else{const r=(w.current-o)/w.current*100;ke(r);const c=(x*60-o)/60*2*Math.PI,T=35,b=50,B=50,Me=b+Math.cos(c-Math.PI/2)*T,Be=B+Math.sin(c-Math.PI/2)*T;le({x:Me,y:Be})}}},Ce=i?(k[i.id]||[]).filter(t=>!t.completed).map(t=>({id:t.id,title:t.title,completed:t.completed,createdAt:t.createdAt})):[],lt=(x*60-p)/(x*60)*100,nt=Ue.filter(t=>t.filled).length;return e.jsxs(j,{sx:{p:H?2:3},children:[e.jsxs(j,{sx:{mb:4},children:[e.jsx(m,{variant:H?"h5":"h4",fontWeight:"bold",gutterBottom:!0,sx:{WebkitBackgroundClip:"text",display:"flex",alignItems:"center",gap:1},children:"🧭 집중 여행"}),e.jsxs(m,{variant:"body1",color:"textSecondary",children:["집중할 시간을 선택하고 ",(it=d==null?void 0:d.concepts)==null?void 0:it.animal,"과 함께 집중해보세요! ",d==null?void 0:d.emoji,"⭐️"]})]}),e.jsxs(j,{sx:{display:"flex",flexDirection:H?"column":"row",gap:3},children:[e.jsx(zt,{in:St,children:e.jsx(ue,{sx:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,minWidth:H?300:400,background:G.background.gradient,color:"white",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:e.jsxs(xe,{sx:{textAlign:"center",py:4},children:[e.jsx(Ut,{sx:{fontSize:80,mb:2,color:"#FFD700"}}),e.jsx(m,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"🎉 완료!"}),A&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"h6",sx:{mb:2,opacity:.9},children:[A.duration,"분 ",A.sessionType," 세션 완료",A.actualMinutes&&A.actualMinutes!==A.duration&&e.jsxs(m,{variant:"body2",sx:{opacity:.7,mt:.5},children:["(실제 ",A.actualMinutes,"분 집중)"]})]}),e.jsxs(j,{sx:{bgcolor:"rgba(255,255,255,0.2)",borderRadius:2,p:2,mb:2,backdropFilter:"blur(10px)"},children:[e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["📁 ",A.projectTitle]}),e.jsxs(m,{variant:"body2",sx:{opacity:.8},children:["✅ ",A.taskTitle]})]}),e.jsx(m,{variant:"body2",sx:{opacity:.7},children:$.building.completionMessage})]})]})})}),e.jsx(ue,{sx:{flex:1,maxWidth:H?"100%":400},children:e.jsxs(xe,{children:[e.jsxs(m,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_t,{color:"primary"})," 작업 설정"]}),e.jsxs(j,{sx:{mb:3},children:[e.jsxs(m,{variant:"subtitle2",gutterBottom:!0,children:["집중 시간: ",x,"분"]}),e.jsx(Jt,{value:x,onChange:(t,s)=>{X(s),Re(s)},min:1,max:99,step:1,disabled:v,marks:[{value:1,label:"1분"},{value:10,label:"10분"},{value:25,label:"25분"},{value:50,label:"50분"},{value:99,label:"99분"}],sx:{"& .MuiSlider-thumb":{background:G.border.color},"& .MuiSlider-track":{background:G.background.gradient}}})]}),be.length>0&&e.jsxs(j,{sx:{mb:3},children:[e.jsx(m,{variant:"subtitle2",sx:{mb:1,color:y.palette.text.secondary},children:"🕐 최근 사용한 조합"}),e.jsx(j,{sx:{display:"flex",flexDirection:"column",gap:1},children:be.map(t=>e.jsx(I,{variant:"outlined",size:"small",onClick:()=>kt(t),sx:{justifyContent:"flex-start",textTransform:"none",borderRadius:2,border:`1px solid ${y.palette.divider}`,backgroundColor:y.palette.background.paper,color:y.palette.text.primary,"&:hover":{backgroundColor:y.palette.action.hover}},children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(m,{sx:{fontSize:"1rem"},children:t.epicEmoji}),e.jsxs(j,{sx:{flex:1,textAlign:"left"},children:[e.jsx(m,{variant:"body2",sx:{fontWeight:"bold",lineHeight:1.2},children:t.epicTitle}),e.jsx(m,{variant:"caption",sx:{color:y.palette.text.secondary,lineHeight:1},children:t.projectTitle})]})]})},t.id))})]}),e.jsxs(U,{fullWidth:!0,sx:{mb:2},children:[e.jsx(_,{children:"에픽 선택"}),e.jsxs(J,{value:(h==null?void 0:h.id)||"",label:"에픽 선택",onChange:t=>{if(t.target.value==="CREATE_NEW_EPIC"){Z(!0);return}const s=R.find(o=>o.id===t.target.value);Te(s||null),Y(null),Q(null),M(null),W(null)},children:[e.jsx(n,{value:"",children:"에픽 없음"}),R.map(t=>e.jsxs(n,{value:t.id,children:[t.emoji," ",t.title]},t.id)),e.jsxs(n,{value:"CREATE_NEW_EPIC",sx:{borderTop:"1px solid",borderColor:"divider",mt:1,color:"primary.main",fontWeight:"bold"},children:[e.jsx(Pe,{sx:{mr:1}})," 새 에픽 만들기"]})]})]}),e.jsxs(U,{fullWidth:!0,sx:{mb:2},children:[e.jsx(_,{children:"프로젝트 선택"}),e.jsxs(J,{value:(i==null?void 0:i.id)||"",label:"프로젝트 선택",onChange:t=>{if(t.target.value==="CREATE_NEW_PROJECT"){V(!0);return}const s=(h?S.filter(o=>o.epicId===h.id):S).find(o=>o.id===t.target.value);Y(s||null),Q(s||null),M(null),W(null)},children:[(h?S.filter(t=>t.epicId===h.id):S).map(t=>e.jsx(n,{value:t.id,children:t.title},t.id)),e.jsxs(n,{value:"CREATE_NEW_PROJECT",sx:{borderTop:"1px solid",borderColor:"divider",mt:1,color:"primary.main",fontWeight:"bold"},children:[e.jsx(Pe,{sx:{mr:1}})," 새 프로젝트 만들기"]})]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs(U,{fullWidth:!0,sx:{mb:2},children:[e.jsx(_,{children:"태스크 선택"}),e.jsxs(J,{value:(u==null?void 0:u.id)||"",label:"태스크 선택",onChange:t=>{if(t.target.value==="CREATE_NEW_TASK"){z(!0);return}const s=Ce.find(o=>o.id===t.target.value);M(s||null),W(s||null)},children:[Ce.map(t=>e.jsx(n,{value:t.id,children:t.title},t.id)),e.jsxs(n,{value:"CREATE_NEW_TASK",sx:{borderTop:"1px solid",borderColor:"divider",mt:1,color:"primary.main",fontWeight:"bold"},children:[e.jsx(Pe,{sx:{mr:1}})," 새 테스크 만들기"]})]})]}),((at=k[i.id])==null?void 0:at.length)>0&&e.jsxs(j,{sx:{mb:2},children:[e.jsx(m,{variant:"subtitle2",gutterBottom:!0,children:"테스크 목록:"}),e.jsx(Ht,{dense:!0,children:k[i.id].map(t=>e.jsx(Gt,{sx:{px:0},children:e.jsx(Qt,{control:e.jsx(Xt,{checked:t.completed,onChange:()=>Bt(t),size:"small"}),label:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(m,{variant:"body2",sx:{textDecoration:t.completed?"line-through":"none",opacity:t.completed?.6:1},children:t.title}),t.completed&&e.jsx(qt,{label:"완료",size:"small",color:"success"})]}),sx:{flex:1,m:0}})},t.id))})]})]}),i&&Ce.length===0&&e.jsx(xt,{severity:"info",sx:{mb:2},children:e.jsxs(m,{variant:"body2",children:["📝 완료되지 않은 테스크가 없어요!",e.jsx("br",{}),"새 테스크를 만들거나 ",(ct=d==null?void 0:d.concepts)==null?void 0:ct.projectType,"에서 할일을 추가해보세요!"," ",d==null?void 0:d.emoji]})}),e.jsx(xt,{severity:D?"info":"success",sx:{mb:2},children:D?"🌵 휴식 시간입니다!":`${d==null?void 0:d.emoji} 집중 시간입니다!`}),e.jsxs(m,{variant:"body2",color:"text.secondary",children:["완료된 세션: ",bt,"개 🎯"]}),e.jsxs(m,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[$.blocks.collectName,": ",nt,"/60개 ",$.blocks.emoji]})]})}),e.jsxs(j,{sx:{flex:1},children:[e.jsx(ue,{sx:{mb:3},children:e.jsxs(xe,{sx:{textAlign:"center"},children:[e.jsx(m,{variant:"h2",fontWeight:"bold",color:"primary",sx:{mb:2},children:Pt(p)}),e.jsx(Kt,{variant:"determinate",value:lt,sx:{height:12,borderRadius:6,mb:3,"& .MuiLinearProgress-bar":{borderRadius:6,background:G.background.gradient}}}),e.jsxs(j,{sx:{display:"flex",justifyContent:"center",gap:1,flexWrap:"wrap"},children:[v?e.jsx(I,{variant:"contained",startIcon:e.jsx(Vt,{}),onClick:Ot,size:"large",color:"warning",children:"일시정지"}):e.jsx(I,{variant:"contained",startIcon:e.jsx(Zt,{}),onClick:Ft,size:"large",disabled:!u,children:"시작"}),e.jsx(es,{onClick:rt,size:"large",children:e.jsx(ts,{})}),lt>=100&&e.jsx(I,{variant:"contained",startIcon:e.jsx(ss,{}),color:"success",size:"large",onClick:rt,children:"완료! 🎉"})]})]})}),e.jsx(ue,{children:e.jsxs(xe,{children:[e.jsxs(m,{variant:"h6",gutterBottom:!0,sx:{textAlign:"center"},children:[e.jsx(os,{})," ⏱️ 집중 여행"]}),e.jsxs(j,{sx:{width:"100%",aspectRatio:"1 / 1",maxWidth:{xs:250,sm:300,md:400},margin:"0 auto",position:"relative",borderRadius:2,border:`2px solid ${y.palette.divider}`,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:y.palette.background.paper},children:[e.jsx(j,{sx:{position:"absolute",top:"50%",left:"50%",width:"70%",height:"70%",border:`2px solid ${G.border.color}`,borderRadius:"50%",transform:"translate(-50%, -50%)",zIndex:1}}),Ue.map(t=>{const s=(t.angle-90)*(Math.PI/180),o=35,r=50+Math.cos(s)*o,l=50+Math.sin(s)*o;return e.jsx(j,{sx:{position:"absolute",left:`${r}%`,top:`${l}%`,width:"16px",height:"16px",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center",transform:"translate(-50%, -50%)",opacity:t.filled?1:.3,transition:"opacity 0.5s ease",zIndex:2},children:t.filled?$.blocks.emoji:"⚪"},t.id)}),e.jsx(j,{sx:{position:"absolute",left:`${ze.x}%`,top:`${ze.y}%`,transform:"translate(-50%, -50%)",fontSize:"2rem",zIndex:3,filter:"drop-shadow(2px 2px 4px rgba(0,0,0,0.3))",transition:"all 0.1s ease-out"},children:d==null?void 0:d.emoji})]}),e.jsx(m,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",mt:2},children:v?e.jsxs(e.Fragment,{children:["🎯 원을 따라 여행하는 ",(dt=d==null?void 0:d.concepts)==null?void 0:dt.animal,", ",$.blocks.type," 수집중! ",e.jsx("br",{}),"⏰"," ",Math.floor(p/60),"분 ",p%60,"초 남았어요! 원이 모두 채워지면 완료! ",e.jsx("br",{}),"🔄 1분에 한바퀴씩 돌며 ",nt,"/60개 수집했어요!"]}):e.jsxs(e.Fragment,{children:[d==null?void 0:d.emoji," 출발을 기다리고 있는 ",(ut=d==null?void 0:d.concepts)==null?void 0:ut.animal,"! ",e.jsx("br",{}),"▶️ 타이머를 시작하면 원을 따라 여행하며 ",$.blocks.type," 수집 시작! ",e.jsx("br",{}),"⭕ 원이 모두 채워지면 ",x,"분 집중 완료!"]})})]})})]})]}),e.jsxs(Fe,{open:wt,onClose:()=>Z(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Oe,{children:"새 에픽 만들기"}),e.jsxs(Ne,{children:[e.jsx(se,{autoFocus:!0,margin:"dense",label:"에픽 제목",fullWidth:!0,variant:"outlined",value:ee,onChange:t=>He(t.target.value),sx:{mb:2}}),e.jsx(se,{margin:"dense",label:"에픽 설명 (선택사항)",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",value:Se,onChange:t=>Ge(t.target.value)}),e.jsxs(U,{fullWidth:!0,sx:{mt:2},children:[e.jsx(_,{children:"에픽 이모지"}),e.jsxs(J,{value:we,label:"에픽 이모지",onChange:t=>Qe(t.target.value),children:[e.jsx(n,{value:"🎯",children:"🎯 목표"}),e.jsx(n,{value:"🚀",children:"🚀 로켓"}),e.jsx(n,{value:"💪",children:"💪 힘"}),e.jsx(n,{value:"🎉",children:"🎉 축하"}),e.jsx(n,{value:"🎊",children:"🎊 파티"}),e.jsx(n,{value:"🎈",children:"🎈 풍선"}),e.jsx(n,{value:"🎀",children:"🎀 리본"}),e.jsx(n,{value:"🎁",children:"🎁 선물"}),e.jsx(n,{value:"🎗️",children:"🎗️ 리본"}),e.jsx(n,{value:"⭐",children:"⭐ 별"}),e.jsx(n,{value:"✨",children:"✨ 반짝"}),e.jsx(n,{value:"🌟",children:"🌟 빛나는별"}),e.jsx(n,{value:"💎",children:"💎 다이아몬드"}),e.jsx(n,{value:"🔥",children:"🔥 불"}),e.jsx(n,{value:"⚡",children:"⚡ 번개"}),e.jsx(n,{value:"🏆",children:"🏆 트로피"}),e.jsx(n,{value:"🥇",children:"🥇 금메달"}),e.jsx(n,{value:"🎖️",children:"🎖️ 훈장"}),e.jsx(n,{value:"📈",children:"📈 성장"}),e.jsx(n,{value:"🎪",children:"🎪 서커스"}),e.jsx(n,{value:"🎭",children:"🎭 연극"}),e.jsx(n,{value:"🎨",children:"🎨 예술"}),e.jsx(n,{value:"🎵",children:"🎵 음악"}),e.jsx(n,{value:"🎶",children:"🎶 노래"}),e.jsx(n,{value:"🌈",children:"🌈 무지개"}),e.jsx(n,{value:"🦄",children:"🦄 유니콘"}),e.jsx(n,{value:"🚁",children:"🚁 헬리콥터"}),e.jsx(n,{value:"✈️",children:"✈️ 비행기"}),e.jsx(n,{value:"🛸",children:"🛸 UFO"})]})]}),e.jsxs(U,{fullWidth:!0,sx:{mt:2},children:[e.jsx(_,{children:"에픽 색상"}),e.jsxs(J,{value:Ie,label:"에픽 색상",onChange:t=>Xe(t.target.value),children:[e.jsx(n,{value:"#FF6B6B",children:"🔴 빨강"}),e.jsx(n,{value:"#FFD700",children:"🟡 노랑"}),e.jsx(n,{value:"#57C7FF",children:"🔵 파랑"}),e.jsx(n,{value:"#4CAF50",children:"🟢 초록"}),e.jsx(n,{value:"#9C27B0",children:"🟣 보라"}),e.jsx(n,{value:"#FF9800",children:"🟠 주황"}),e.jsx(n,{value:"#795548",children:"🟤 갈색"}),e.jsx(n,{value:"#607D8B",children:"🔷 청회색"}),e.jsx(n,{value:"#E91E63",children:"💖 핑크"}),e.jsx(n,{value:"#00BCD4",children:"💦 청록"}),e.jsx(n,{value:"#009688",children:"💧 틸"}),e.jsx(n,{value:"#FFC107",children:"💛 앰버"}),e.jsx(n,{value:"#FF5722",children:"🧡 딥오렌지"}),e.jsx(n,{value:"#9E9E9E",children:"🩶 회색"}),e.jsx(n,{value:"#424242",children:"⚫ 어두운회색"})]})]}),e.jsxs(U,{fullWidth:!0,sx:{mt:2},children:[e.jsx(_,{children:"에픽 우선순위"}),e.jsxs(J,{value:ye,label:"에픽 우선순위",onChange:t=>qe(t.target.value),children:[e.jsx(n,{value:"low",children:"낮음"}),e.jsx(n,{value:"medium",children:"중간"}),e.jsx(n,{value:"high",children:"높음"})]})]})]}),e.jsxs($e,{children:[e.jsx(I,{onClick:()=>Z(!1),children:"취소"}),e.jsx(I,{onClick:At,variant:"contained",disabled:!ee.trim(),children:"만들기"})]})]}),e.jsxs(Fe,{open:It,onClose:()=>V(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Oe,{children:"새 프로젝트 만들기"}),e.jsxs(Ne,{children:[e.jsxs(m,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["에픽: ",h==null?void 0:h.title]}),e.jsx(se,{autoFocus:!0,margin:"dense",label:"프로젝트 제목",fullWidth:!0,variant:"outlined",value:ce,onChange:t=>Ke(t.target.value),sx:{mb:2}}),e.jsx(se,{margin:"dense",label:"프로젝트 설명 (선택사항)",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",value:Ze,onChange:t=>Ve(t.target.value)})]}),e.jsxs($e,{children:[e.jsx(I,{onClick:()=>V(!1),children:"취소"}),e.jsx(I,{onClick:Ct,variant:"contained",disabled:!ce.trim(),children:"만들기"})]})]}),e.jsxs(Fe,{open:yt,onClose:()=>z(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Oe,{children:"새 테스크 만들기"}),e.jsxs(Ne,{children:[e.jsxs(m,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["프로젝트: ",i==null?void 0:i.title]}),e.jsx(se,{autoFocus:!0,margin:"dense",label:"테스크 제목",fullWidth:!0,variant:"outlined",value:te,onChange:t=>et(t.target.value)})]}),e.jsxs($e,{children:[e.jsx(I,{onClick:()=>z(!1),children:"취소"}),e.jsx(I,{onClick:Mt,variant:"contained",disabled:!te.trim(),children:"만들기"})]})]})]})};export{fs as default};
