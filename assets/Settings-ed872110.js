import{c as l,j as e,u as $,J,a8 as Q,r as o,B as i,T as s,au as N,P as _,D as G,e as X,f as q,A as c,k as K,i as g,ay as z,aO as Y,aP as Z,aQ as ee,aR as se,Q as f,C as S,a as C,ag as te,ah as ne,ai as re,X as ae,aS as ie}from"./index-fc0e3f91.js";import{T as oe,a as B}from"./Tabs-74798590.js";import{F as ce}from"./FormControlLabel-4aefe78f.js";import{S as le}from"./Switch-f280301c.js";import"./SwitchBase-f121d878.js";const de=l(e.jsx("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}),"Computer"),xe=l(e.jsx("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode"),he=l(e.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),D=l(e.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload"),je=l(e.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightMode"),H=l(e.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette"),L=l(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),ye=({onThemeChange:W=()=>{},themeSettings:p={type:"penguin",mode:"light"}})=>{const j=$(),b=J(j.breakpoints.down("md")),v=Q(),[y,P]=o.useState(0),[me,F]=o.useState(null),[a,R]=o.useState(null),[d,U]=o.useState(null),[A,m]=o.useState(!1),[x,M]=o.useState(!1),[u,k]=o.useState(p),E=r=>{const n={...u,...r};k(n),W(n);try{window.electronAPI?window.electronAPI.saveData("theme",n):localStorage.setItem("theme",JSON.stringify(n))}catch(t){console.error("테마 저장 실패:",t)}},I=async r=>{if(v){M(!0);try{const n=await Y(v.uid,r);if(n.success){const t=new Blob([n.data],{type:r==="json"?"application/json":"text/csv"}),T=URL.createObjectURL(t),h=document.createElement("a");h.href=T,h.download=n.filename||`penguin_data.${r}`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(T),console.log("✅ 데이터 내보내기 완료"),m(!1)}else console.error("❌ 데이터 내보내기 실패:",n.error),alert("데이터 내보내기에 실패했습니다.")}catch(n){console.error("❌ 데이터 내보내기 오류:",n),alert("데이터 내보내기 중 오류가 발생했습니다.")}finally{M(!1)}}},w=()=>{try{const r=Z(),n=ee.getSecurityStats(),t=se.getStats();F(r),R(n),U(t),console.log("🛡️ 보안 대시보드 로드 완료:",r),console.log("🔐 암호화 상태:",t)}catch(r){console.error("❌ 보안 대시보드 로드 실패:",r)}};o.useEffect(()=>{k(p)},[p]),o.useEffect(()=>{w();const r=setInterval(w,5e3);return()=>clearInterval(r)},[]);const O=()=>{const r=[{id:"penguin",name:"🐧 펭귄",description:"차가운 남극의 펭귄 테마"},{id:"desert-fox",name:"🦊 사막여우",description:"따뜻한 사막의 여우 테마"},{id:"sheep",name:"🐑 양",description:"평화로운 목장의 양 테마"},{id:"cat",name:"🐱 고양이",description:"귀여운 고양이 테마"}],n=[{id:"light",name:"밝은 모드",icon:e.jsx(je,{})},{id:"dark",name:"어두운 모드",icon:e.jsx(xe,{})},{id:"auto",name:"자동",icon:e.jsx(de,{})}];return e.jsxs(i,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{color:"primary"}),"🎨 테마 설정"]}),e.jsxs(f,{container:!0,spacing:3,children:[e.jsx(f,{item:!0,xs:12,md:6,children:e.jsx(S,{children:e.jsxs(C,{children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"캐릭터 테마"}),e.jsxs(te,{fullWidth:!0,sx:{mb:2},children:[e.jsx(ne,{children:"테마 선택"}),e.jsx(re,{value:u.type,label:"테마 선택",onChange:t=>E({type:t.target.value}),children:r.map(t=>e.jsx(ae,{value:t.id,children:e.jsxs(i,{children:[e.jsx(s,{variant:"body1",children:t.name}),e.jsx(s,{variant:"caption",color:"textSecondary",children:t.description})]})},t.id))})]}),e.jsxs(i,{sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${j.palette.primary.main}20 0%, ${j.palette.secondary.main}20 100%)`,border:`2px solid ${j.palette.primary.main}40`,textAlign:"center"},children:[e.jsx(s,{variant:"h4",sx:{mb:1},children:ie(u.type).emoji}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"현재 선택된 테마"})]})]})})}),e.jsx(f,{item:!0,xs:12,md:6,children:e.jsx(S,{children:e.jsxs(C,{children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"색상 모드"}),e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:1},children:n.map(t=>e.jsx(ce,{control:e.jsx(le,{checked:u.mode===t.id,onChange:()=>E({mode:t.id}),color:"primary"}),label:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.icon,t.name]})},t.id))}),e.jsx(c,{severity:"info",sx:{mt:2},children:e.jsx(s,{variant:"caption",children:"💡 자동 모드는 시스템 설정에 따라 자동으로 밝은/어두운 모드를 전환합니다."})})]})})})]})]})},V=()=>e.jsxs(i,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(L,{color:"primary"}),"🛡️ 보안 및 개인정보"]}),v?e.jsxs(i,{children:[d!=null&&d.isReady?e.jsx(c,{severity:"success",sx:{mb:3},children:e.jsxs(s,{variant:"body2",children:["🔐 End-to-End 암호화 활성화됨 - ",d.algorithm," ",d.keyLength,"bit",e.jsx("br",{}),"✅ 관리자도 당신의 데이터를 볼 수 없습니다!"]})}):e.jsx(c,{severity:"warning",sx:{mb:3},children:e.jsx(s,{variant:"body2",children:"⚠️ 암호화가 비활성화되어 있습니다. 데이터가 암호화되지 않을 수 있습니다."})}),e.jsx(c,{severity:"info",sx:{mb:3},children:e.jsxs(s,{variant:"body2",children:["🛡️ 보안 시스템이 활성화되어 있습니다.",(a==null?void 0:a.totalEvents)||0,"개의 보안 이벤트가 기록되었습니다."]})}),(a==null?void 0:a.criticalEvents)>0&&e.jsx(c,{severity:"warning",sx:{mb:3},children:e.jsxs(s,{variant:"body2",children:["🚨 ",a.criticalEvents,"개의 심각한 보안 이벤트가 탐지되었습니다."]})}),(a==null?void 0:a.totalEvents)===0&&e.jsx(c,{severity:"success",sx:{mb:3},children:e.jsx(s,{variant:"body2",children:"✅ 현재까지 보안 위협이 탐지되지 않았습니다. 시스템이 안전하게 운영되고 있습니다."})}),e.jsx(S,{sx:{mt:3},children:e.jsxs(C,{children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"📊 데이터 관리"}),e.jsx(s,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"암호화된 개인 데이터를 안전하게 내보낼 수 있습니다."}),e.jsx(g,{variant:"outlined",startIcon:e.jsx(he,{}),onClick:()=>m(!0),sx:{minWidth:200},children:"📊 내 데이터 내보내기"})]})})]}):e.jsx(c,{severity:"warning",children:e.jsx(s,{children:"로그인이 필요합니다. 보안 기능을 사용하려면 먼저 로그인해주세요."})})]});return e.jsxs(i,{sx:{p:b?2:3},children:[e.jsxs(s,{variant:b?"h5":"h4",fontWeight:"bold",gutterBottom:!0,sx:{background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(N,{})," ⚙️ 설정"]}),e.jsx(_,{sx:{mb:3},children:e.jsxs(oe,{value:y,onChange:(r,n)=>P(n),variant:b?"fullWidth":"standard",children:[e.jsx(B,{icon:e.jsx(H,{}),label:"테마",iconPosition:"start"}),e.jsx(B,{icon:e.jsx(L,{}),label:"보안",iconPosition:"start"})]})}),e.jsxs(i,{children:[y===0&&O(),y===1&&V()]}),e.jsxs(G,{open:A,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(X,{children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(D,{}),"📊 데이터 내보내기"]})}),e.jsxs(q,{children:[e.jsxs(s,{variant:"body2",sx:{mb:3},children:["암호화된 데이터를 복호화하여 안전하게 내보냅니다.",e.jsx("br",{}),e.jsx("strong",{children:"관리자도 볼 수 없었던 데이터가 복호화되어 다운로드됩니다."})]}),e.jsx(c,{severity:"info",sx:{mb:2},children:e.jsxs(s,{variant:"body2",children:["🔐 End-to-End 암호화로 보호된 모든 데이터가 포함됩니다:",e.jsx("br",{}),"• 할일 목록 및 프로젝트",e.jsx("br",{}),"• 뽀모도로 세션 기록",e.jsx("br",{}),"• 개인 설정 정보"]})})]}),e.jsxs(K,{children:[e.jsx(g,{onClick:()=>m(!1),disabled:x,children:"취소"}),e.jsx(g,{onClick:()=>I("json"),disabled:x,startIcon:x?e.jsx(z,{size:16}):e.jsx(D,{}),variant:"contained",children:"JSON 다운로드"}),e.jsx(g,{onClick:()=>I("csv"),disabled:x,startIcon:x?e.jsx(z,{size:16}):e.jsx(D,{}),variant:"outlined",children:"CSV 다운로드"})]})]})]})};export{ye as default};
