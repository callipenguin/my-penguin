import{r as f,Y as ot,Z as et,_ as rt,$ as k,a0 as it,a1 as at,a2 as nt,j as e,a3 as st,a4 as lt,a5 as dt,a6 as g,a7 as ct,u as ut,d as Y,a8 as Q,a9 as pt,B as d,T as p,i as T,Q as L,C as P,a as U,h as xt,M as gt,O as mt,D as ht,e as bt,f as ft,V as vt,k as Ct,aa as jt}from"./index-fc0e3f91.js";import{C as X,T as $t}from"./TrendingUp-34661a19.js";function Bt(i){return f.Children.toArray(i).filter(t=>f.isValidElement(t))}function yt(i){return et("MuiButtonGroup",i)}const kt=ot("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),c=kt,Rt=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Dt=(i,t)=>{const{ownerState:n}=i;return[{[`& .${c.grouped}`]:t.grouped},{[`& .${c.grouped}`]:t[`grouped${g(n.orientation)}`]},{[`& .${c.grouped}`]:t[`grouped${g(n.variant)}`]},{[`& .${c.grouped}`]:t[`grouped${g(n.variant)}${g(n.orientation)}`]},{[`& .${c.grouped}`]:t[`grouped${g(n.variant)}${g(n.color)}`]},{[`& .${c.firstButton}`]:t.firstButton},{[`& .${c.lastButton}`]:t.lastButton},{[`& .${c.middleButton}`]:t.middleButton},t.root,t[n.variant],n.disableElevation===!0&&t.disableElevation,n.fullWidth&&t.fullWidth,n.orientation==="vertical"&&t.vertical]},Wt=i=>{const{classes:t,color:n,disabled:v,disableElevation:C,fullWidth:m,orientation:l,variant:h}=i,R={root:["root",h,l==="vertical"&&"vertical",m&&"fullWidth",C&&"disableElevation"],grouped:["grouped",`grouped${g(l)}`,`grouped${g(h)}`,`grouped${g(h)}${g(l)}`,`grouped${g(h)}${g(n)}`,v&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ct(R,yt,t)},Mt=rt("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Dt})(({theme:i,ownerState:t})=>k({display:"inline-flex",borderRadius:(i.vars||i).shape.borderRadius},t.variant==="contained"&&{boxShadow:(i.vars||i).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${c.grouped}`]:k({minWidth:40,"&:hover":k({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"}),[`& .${c.firstButton},& .${c.middleButton}`]:k({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:i.vars?`1px solid rgba(${i.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${i.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${c.disabled}`]:{borderRight:`1px solid ${(i.vars||i).palette.action.disabled}`}},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:i.vars?`1px solid rgba(${i.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${i.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${c.disabled}`]:{borderBottom:`1px solid ${(i.vars||i).palette.action.disabled}`}},t.variant==="text"&&t.color!=="inherit"&&{borderColor:i.vars?`rgba(${i.vars.palette[t.color].mainChannel} / 0.5)`:it(i.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(i.vars||i).palette.grey[400]}`,[`&.${c.disabled}`]:{borderRight:`1px solid ${(i.vars||i).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(i.vars||i).palette.grey[400]}`,[`&.${c.disabled}`]:{borderBottom:`1px solid ${(i.vars||i).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(i.vars||i).palette[t.color].dark},{"&:hover":k({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${c.lastButton},& .${c.middleButton}`]:k({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1})})),Tt=f.forwardRef(function(t,n){const v=at({props:t,name:"MuiButtonGroup"}),{children:C,className:m,color:l="primary",component:h="div",disabled:R=!1,disableElevation:j=!1,disableFocusRipple:B=!1,disableRipple:y=!1,fullWidth:I=!1,orientation:D="horizontal",size:$="medium",variant:E="outlined"}=v,S=nt(v,Rt),O=k({},v,{color:l,component:h,disabled:R,disableElevation:j,disableFocusRipple:B,disableRipple:y,fullWidth:I,orientation:D,size:$,variant:E}),x=Wt(O),A=f.useMemo(()=>({className:x.grouped,color:l,disabled:R,disableElevation:j,disableFocusRipple:B,disableRipple:y,fullWidth:I,size:$,variant:E}),[l,R,j,B,y,I,$,E,x.grouped]),G=Bt(C),w=G.length,H=z=>{const W=z===0,M=z===w-1;return W&&M?"":W?x.firstButton:M?x.lastButton:x.middleButton};return e.jsx(Mt,k({as:h,role:"group",className:st(x.root,m),ref:n,ownerState:O},S,{children:e.jsx(lt.Provider,{value:A,children:G.map((z,W)=>e.jsx(dt.Provider,{value:H(W),children:z},W))})}))}),zt=Tt,Ot=({themeConfig:i})=>{var N;const t=ut(),[n,v]=f.useState(Y().startOf("week")),[C,m]=f.useState([]),[l,h]=f.useState(null),[R,j]=f.useState(!1),[B,y]=f.useState(""),D=(()=>{switch(i==null?void 0:i.id){case"desert-fox":return{excellent:"🦊",good:"🌵",normal:"☀️",tired:"🏜️",exhausted:"🔥"};case"sheep":return{excellent:"🐑",good:"🌿",normal:"🌱",tired:"🍃",exhausted:"🌾"};case"cat":return{excellent:"🐱",good:"🐟",normal:"🧶",tired:"🐾",exhausted:"😿"};default:return{excellent:"🐧",good:"🐟",normal:"❄️",tired:"🧊",exhausted:"🐻‍❄️"}}})(),$=[{level:"excellent",emoji:D.excellent,color:"#4caf50",label:"최고"},{level:"good",emoji:D.good,color:"#8bc34a",label:"좋음"},{level:"normal",emoji:D.normal,color:"#ffc107",label:"보통"},{level:"tired",emoji:D.tired,color:"#ff9800",label:"피곤"},{level:"exhausted",emoji:D.exhausted,color:"#f44336",label:"매우 피곤"}],E=Array.from({length:24},(o,r)=>r),S=Array.from({length:7},(o,r)=>n.add(r,"day")),O=o=>[t.palette.error.main+"08",t.palette.info.main+"08",t.palette.success.main+"08",t.palette.warning.main+"08",t.palette.secondary.main+"08",t.palette.primary.main+"08",t.palette.grey[500]+"08"][o]||t.palette.grey[100],x=o=>[t.palette.error.main,t.palette.info.main,t.palette.success.main,t.palette.warning.main,t.palette.secondary.main,t.palette.primary.main,t.palette.grey[600]][o]||t.palette.text.primary;f.useEffect(()=>{A()},[n]);const A=async()=>{try{const o=Q();if(o){const r=await pt(o.uid,"conditions");r.success&&r.data?m(r.data):m([])}else{const r=localStorage.getItem("conditions");m(r?JSON.parse(r):[])}}catch(o){console.error("컨디션 데이터 로드 실패:",o),m([])}},G=async o=>{try{const r=Q();r?await jt(r.uid,"conditions",o):localStorage.setItem("conditions",JSON.stringify(o))}catch(r){console.error("컨디션 데이터 저장 실패:",r)}},w=(o,r)=>C.find(a=>a.date===o&&a.hour===r),H=(o,r,a)=>{h({date:o,hour:r}),y((a==null?void 0:a.memo)??""),j(!0)},z=async o=>{if(!l)return;const r=w(l.date,l.hour);let a;if(r)a=C.map(u=>u.id===r.id?{...u,condition:o,memo:B,updatedAt:new Date().toISOString()}:u);else{const u={id:Date.now().toString(),date:l.date,hour:l.hour,condition:o,memo:B,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};a=[...C,u]}m(a),await G(a),j(!1),h(null),y("")},W=async()=>{if(!l)return;const o=w(l.date,l.hour);if(o){const r=C.map(a=>a.id===o.id?{...a,memo:B,updatedAt:new Date().toISOString()}:a);m(r),await G(r)}j(!1),h(null),y("")},M=o=>$.find(r=>r.level===o),Z=(o,r)=>{const a=r!==void 0?O(r):"transparent";if(!o)return a;const u=M(o.condition);return u?`linear-gradient(135deg, ${u.color}30, ${a})`:a},q=()=>{const o=n.format("YYYY-MM-DD"),r=n.add(6,"day").format("YYYY-MM-DD"),a=C.filter(s=>s.date>=o&&s.date<=r),u=$.reduce((s,b)=>(s[b.level]=a.filter(V=>V.condition===b.level).length,s),{});return{weekConditions:a,conditionCounts:u}},{weekConditions:K,conditionCounts:tt}=q();return e.jsxs(d,{sx:{p:3},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(d,{children:[e.jsx(p,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"💚 컨디션 체크"}),e.jsxs(p,{variant:"body1",color:"textSecondary",children:[((N=i==null?void 0:i.concepts)==null?void 0:N.animal)||"동물","처럼 시간별 컨디션을 기록하고 패턴을 분석해보세요"]})]}),e.jsxs(d,{sx:{display:"flex",gap:2},children:[e.jsx(T,{startIcon:e.jsx(X,{}),onClick:()=>v(n.subtract(1,"week")),children:"이전 주"}),e.jsx(T,{variant:"contained",onClick:()=>v(Y().startOf("week")),children:"이번 주"}),e.jsx(T,{startIcon:e.jsx(X,{}),onClick:()=>v(n.add(1,"week")),children:"다음 주"})]})]}),e.jsxs(L,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(L,{item:!0,xs:12,md:8,children:e.jsx(P,{children:e.jsxs(U,{children:[e.jsxs(p,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:["📊 이번 주 통계 (",n.format("MM/DD")," - ",n.add(6,"day").format("MM/DD"),")"]}),e.jsx(d,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:$.map(o=>e.jsx(xt,{label:`${o.emoji} ${o.label}: ${tt[o.level]}회`,sx:{bgcolor:o.color+"20",color:o.color,fontWeight:500}},o.level))}),e.jsxs(p,{variant:"body2",color:"textSecondary",sx:{mt:2},children:["총 ",K.length,"개의 컨디션이 기록되었습니다"]})]})})}),e.jsx(L,{item:!0,xs:12,md:4,children:e.jsx(P,{children:e.jsxs(U,{sx:{textAlign:"center"},children:[e.jsx($t,{sx:{fontSize:40,color:t.palette.primary.main,mb:1}}),e.jsx(p,{variant:"h6",gutterBottom:!0,children:"주간 평균"}),e.jsx(p,{variant:"h4",color:"primary",children:"3.2/5"}),e.jsx(T,{size:"small",startIcon:e.jsx(gt,{}),sx:{mt:1},children:"분석 보기"})]})})})]}),e.jsx(P,{children:e.jsxs(U,{children:[e.jsx(p,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"🗓️ 시간별 컨디션 그리드"}),e.jsx(d,{sx:{display:"flex",gap:1,mb:3,flexWrap:"wrap"},children:$.map(o=>e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(d,{sx:{width:16,height:16,backgroundColor:o.color+"30",border:`2px solid ${o.color}`,borderRadius:1}}),e.jsxs(p,{variant:"caption",children:[o.emoji," ",o.label]})]},o.level))}),e.jsx(d,{sx:{overflowX:"auto",position:"relative",maxHeight:"70vh",overflowY:"auto"},children:e.jsxs(d,{sx:{minWidth:800},children:[e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:"80px repeat(7, 1fr)",gap:1,mb:1,position:"sticky",top:0,backgroundColor:t.palette.background.paper,zIndex:10,borderBottom:`2px solid ${t.palette.divider}`,pb:1},children:[e.jsx(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",backgroundColor:t.palette.grey[100],borderRadius:1,border:`1px solid ${t.palette.divider}`},children:e.jsx(p,{variant:"caption",fontWeight:"bold",children:"시간"})}),S.map((o,r)=>e.jsxs(d,{sx:{textAlign:"center",p:1.5,backgroundColor:O(r),borderRadius:2,border:`2px solid ${x(r)}30`,boxShadow:1},children:[e.jsx(p,{variant:"body2",fontWeight:"bold",sx:{color:x(r)},children:o.format("ddd")}),e.jsx(p,{variant:"caption",sx:{color:x(r),opacity:.8,display:"block",mt:.5},children:o.format("MM/DD")}),o.isSame(Y(),"day")&&e.jsx(d,{sx:{width:6,height:6,backgroundColor:x(r),borderRadius:"50%",mx:"auto",mt:.5}})]},o.format("YYYY-MM-DD")))]}),E.map(o=>e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:"80px repeat(7, 1fr)",gap:1,mb:1,"&:hover":{"& > div":{transform:"scale(1.01)",transition:"transform 0.1s ease"}}},children:[e.jsx(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:1,backgroundColor:t.palette.grey[50],borderRadius:1,border:`1px solid ${t.palette.divider}`,position:"sticky",left:0,zIndex:5,minHeight:50},children:e.jsxs(p,{variant:"body2",fontWeight:"bold",children:[o.toString().padStart(2,"0"),":00"]})}),S.map((r,a)=>{var F,J;const u=r.format("YYYY-MM-DD"),s=w(u,o),b=s?M(s.condition):null,_=r.isSame(Y(),"day")&&o===Y().hour();return e.jsx(mt,{title:s?`${r.format("ddd")} ${o}시 - ${b==null?void 0:b.emoji} ${b==null?void 0:b.label}${s.memo?` - ${s.memo}`:""}`:`${r.format("ddd")} ${o}시 - 컨디션 기록하기`,arrow:!0,children:e.jsxs(d,{onClick:()=>H(u,o,s),sx:{minHeight:50,backgroundColor:Z(s,a),border:s?`3px solid ${((F=M(s.condition))==null?void 0:F.color)||t.palette.divider}`:`2px solid ${x(a)}20`,borderRadius:2,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",transition:"all 0.2s ease","&:hover":{transform:"scale(1.05)",boxShadow:2,borderColor:s?(J=M(s.condition))==null?void 0:J.color:x(a)},..._&&{boxShadow:`0 0 0 3px ${t.palette.primary.main}40`,borderColor:t.palette.primary.main}},children:[s&&b&&e.jsx(p,{sx:{fontSize:"1.5rem"},children:b.emoji}),_&&e.jsx(d,{sx:{position:"absolute",top:2,right:2,width:8,height:8,backgroundColor:t.palette.primary.main,borderRadius:"50%",animation:"pulse 2s infinite"}}),(s==null?void 0:s.memo)&&e.jsx(d,{sx:{position:"absolute",bottom:2,left:2,width:6,height:6,backgroundColor:t.palette.info.main,borderRadius:"50%"}})]})},`${u}-${o}`)})]},o))]})})]})}),e.jsxs(ht,{open:R,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(bt,{children:l&&`컨디션 기록 - ${Y(l.date).format("MM/DD")} ${l.hour.toString().padStart(2,"0")}:00`}),e.jsxs(ft,{children:[e.jsx(p,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"컨디션을 선택하세요:"}),e.jsx(zt,{variant:"outlined",sx:{mb:3,flexWrap:"wrap"},children:$.map(o=>e.jsxs(T,{onClick:()=>z(o.level),sx:{bgcolor:o.color+"20",borderColor:o.color,color:o.color,"&:hover":{bgcolor:o.color+"30",borderColor:o.color}},children:[o.emoji," ",o.label]},o.level))}),e.jsx(vt,{fullWidth:!0,multiline:!0,rows:3,label:"메모 (선택사항)",placeholder:"컨디션에 대한 상세한 기록을 남겨보세요...",value:B,onChange:o=>y(o.target.value)})]}),e.jsxs(Ct,{children:[e.jsx(T,{onClick:()=>j(!1),children:"취소"}),e.jsx(T,{onClick:W,variant:"contained",children:"저장"})]})]})]})};export{Ot as default};
