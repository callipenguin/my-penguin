import{u as J,n as G,a as o,j as e,B as i,T as s,O as N,ap as _,a$ as Q,b0 as B,bu as W,bv as L,D as V,b as q,bw as v,c as H,A as l,e as K,f as u,g as A,G as f,a6 as S,a7 as C,F as X,I as Y,S as Z,M as ee,aI as se,aJ as te,bx as ne,by as re,bz as ae,bA as ie}from"./mui-2bb62da7.js";import{g as oe,j as le,k as ce,m as de,n as xe,p as he}from"./index-9345ab22.js";import"./dayjs-9d6a636c.js";const ge=({onThemeChange:U=()=>{},themeSettings:b={type:"penguin",mode:"light"}})=>{const h=J(),g=G(h.breakpoints.down("md")),p=oe(),[y,F]=o.useState(0),[je,O]=o.useState(null),[a,P]=o.useState(null),[c,R]=o.useState(null),[M,j]=o.useState(!1),[d,D]=o.useState(!1),[m,k]=o.useState(b),I=r=>{const n={...m,...r};k(n),U(n);try{window.electronAPI?window.electronAPI.saveData("theme",n):localStorage.setItem("theme",JSON.stringify(n))}catch(t){console.error("테마 저장 실패:",t)}},E=async r=>{if(p){D(!0);try{const n=await le(p.uid,r);if(n.success){const t=new Blob([n.data],{type:r==="json"?"application/json":"text/csv"}),T=URL.createObjectURL(t),x=document.createElement("a");x.href=T,x.download=n.filename||`penguin_data.${r}`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(T),console.log("✅ 데이터 내보내기 완료"),j(!1)}else console.error("❌ 데이터 내보내기 실패:",n.error),alert("데이터 내보내기에 실패했습니다.")}catch(n){console.error("❌ 데이터 내보내기 오류:",n),alert("데이터 내보내기 중 오류가 발생했습니다.")}finally{D(!1)}}},w=()=>{try{const r=ce(),n=de.getSecurityStats(),t=xe.getStats();O(r),P(n),R(t),console.log("🛡️ 보안 대시보드 로드 완료:",r),console.log("🔐 암호화 상태:",t)}catch(r){console.error("❌ 보안 대시보드 로드 실패:",r)}};o.useEffect(()=>{k(b)},[b]),o.useEffect(()=>{w();const r=setInterval(w,5e3);return()=>clearInterval(r)},[]);const $=()=>{const r=[{id:"penguin",name:"🐧 펭귄",description:"차가운 남극의 펭귄 테마"},{id:"desert-fox",name:"🦊 사막여우",description:"따뜻한 사막의 여우 테마"},{id:"sheep",name:"🐑 양",description:"평화로운 목장의 양 테마"},{id:"cat",name:"🐱 고양이",description:"귀여운 고양이 테마"}],n=[{id:"light",name:"밝은 모드",icon:e.jsx(re,{})},{id:"dark",name:"어두운 모드",icon:e.jsx(ae,{})},{id:"auto",name:"자동",icon:e.jsx(ie,{})}];return e.jsxs(i,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(W,{color:"primary"}),"🎨 테마 설정"]}),e.jsxs(f,{container:!0,spacing:3,children:[e.jsx(f,{item:!0,xs:12,md:6,children:e.jsx(S,{children:e.jsxs(C,{children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"캐릭터 테마"}),e.jsxs(X,{fullWidth:!0,sx:{mb:2},children:[e.jsx(Y,{children:"테마 선택"}),e.jsx(Z,{value:m.type,label:"테마 선택",onChange:t=>I({type:t.target.value}),children:r.map(t=>e.jsx(ee,{value:t.id,children:e.jsxs(i,{children:[e.jsx(s,{variant:"body1",children:t.name}),e.jsx(s,{variant:"caption",color:"textSecondary",children:t.description})]})},t.id))})]}),e.jsxs(i,{sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${h.palette.primary.main}20 0%, ${h.palette.secondary.main}20 100%)`,border:`2px solid ${h.palette.primary.main}40`,textAlign:"center"},children:[e.jsx(s,{variant:"h4",sx:{mb:1},children:he(m.type).emoji}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"현재 선택된 테마"})]})]})})}),e.jsx(f,{item:!0,xs:12,md:6,children:e.jsx(S,{children:e.jsxs(C,{children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"색상 모드"}),e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:1},children:n.map(t=>e.jsx(se,{control:e.jsx(te,{checked:m.mode===t.id,onChange:()=>I({mode:t.id}),color:"primary"}),label:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.icon,t.name]})},t.id))}),e.jsx(l,{severity:"info",sx:{mt:2},children:e.jsx(s,{variant:"caption",children:"💡 자동 모드는 시스템 설정에 따라 자동으로 밝은/어두운 모드를 전환합니다."})})]})})})]})]})},z=()=>e.jsxs(i,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(L,{color:"primary"}),"🛡️ 보안 및 개인정보"]}),p?e.jsxs(i,{children:[c!=null&&c.isReady?e.jsx(l,{severity:"success",sx:{mb:3},children:e.jsxs(s,{variant:"body2",children:["🔐 End-to-End 암호화 활성화됨 - ",c.algorithm," ",c.keyLength,"bit",e.jsx("br",{}),"✅ 관리자도 당신의 데이터를 볼 수 없습니다!"]})}):e.jsx(l,{severity:"warning",sx:{mb:3},children:e.jsx(s,{variant:"body2",children:"⚠️ 암호화가 비활성화되어 있습니다. 데이터가 암호화되지 않을 수 있습니다."})}),e.jsx(l,{severity:"info",sx:{mb:3},children:e.jsxs(s,{variant:"body2",children:["🛡️ 보안 시스템이 활성화되어 있습니다.",(a==null?void 0:a.totalEvents)||0,"개의 보안 이벤트가 기록되었습니다."]})}),(a==null?void 0:a.criticalEvents)>0&&e.jsx(l,{severity:"warning",sx:{mb:3},children:e.jsxs(s,{variant:"body2",children:["🚨 ",a.criticalEvents,"개의 심각한 보안 이벤트가 탐지되었습니다."]})}),(a==null?void 0:a.totalEvents)===0&&e.jsx(l,{severity:"success",sx:{mb:3},children:e.jsx(s,{variant:"body2",children:"✅ 현재까지 보안 위협이 탐지되지 않았습니다. 시스템이 안전하게 운영되고 있습니다."})}),e.jsx(S,{sx:{mt:3},children:e.jsxs(C,{children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"📊 데이터 관리"}),e.jsx(s,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"암호화된 개인 데이터를 안전하게 내보낼 수 있습니다."}),e.jsx(u,{variant:"outlined",startIcon:e.jsx(ne,{}),onClick:()=>j(!0),sx:{minWidth:200},children:"📊 내 데이터 내보내기"})]})})]}):e.jsx(l,{severity:"warning",children:e.jsx(s,{children:"로그인이 필요합니다. 보안 기능을 사용하려면 먼저 로그인해주세요."})})]});return e.jsxs(i,{sx:{p:g?2:3},children:[e.jsxs(s,{variant:g?"h5":"h4",fontWeight:"bold",gutterBottom:!0,sx:{background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(N,{})," ⚙️ 설정"]}),e.jsx(_,{sx:{mb:3},children:e.jsxs(Q,{value:y,onChange:(r,n)=>F(n),variant:g?"fullWidth":"standard",children:[e.jsx(B,{icon:e.jsx(W,{}),label:"테마",iconPosition:"start"}),e.jsx(B,{icon:e.jsx(L,{}),label:"보안",iconPosition:"start"})]})}),e.jsxs(i,{children:[y===0&&$(),y===1&&z()]}),e.jsxs(V,{open:M,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(q,{children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(v,{}),"📊 데이터 내보내기"]})}),e.jsxs(H,{children:[e.jsxs(s,{variant:"body2",sx:{mb:3},children:["암호화된 데이터를 복호화하여 안전하게 내보냅니다.",e.jsx("br",{}),e.jsx("strong",{children:"관리자도 볼 수 없었던 데이터가 복호화되어 다운로드됩니다."})]}),e.jsx(l,{severity:"info",sx:{mb:2},children:e.jsxs(s,{variant:"body2",children:["🔐 End-to-End 암호화로 보호된 모든 데이터가 포함됩니다:",e.jsx("br",{}),"• 할일 목록 및 프로젝트",e.jsx("br",{}),"• 뽀모도로 세션 기록",e.jsx("br",{}),"• 개인 설정 정보"]})})]}),e.jsxs(K,{children:[e.jsx(u,{onClick:()=>j(!1),disabled:d,children:"취소"}),e.jsx(u,{onClick:()=>E("json"),disabled:d,startIcon:d?e.jsx(A,{size:16}):e.jsx(v,{}),variant:"contained",children:"JSON 다운로드"}),e.jsx(u,{onClick:()=>E("csv"),disabled:d,startIcon:d?e.jsx(A,{size:16}):e.jsx(v,{}),variant:"outlined",children:"CSV 다운로드"})]})]})]})};export{ge as default};
