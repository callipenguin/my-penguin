import{u as k,a as v,j as e,B as i,g as q,T as r,G as d,a6 as j,a7 as p,w as G,C as J,bj as N,ag as f,bt as _,ar as K,W as Q,U as V,az as X,L as Y,q as Z,t as ee,v as te}from"./mui-1d16f996.js";import{d as re}from"./dayjs-9d6a636c.js";import{g as E,l as C}from"./index-e331ab6a.js";const ae=({themeConfig:b})=>{const a=k(),[u,H]=v.useState([]),[y,W]=v.useState([]),[D,F]=v.useState(!0);v.useEffect(()=>{O()},[]);const O=async()=>{await Promise.all([$(),M()]),F(!1)},$=async()=>{try{const t=E();if(t){const s=await C(t.uid,"conditions");s.success&&s.data&&H(s.data)}else{const s=localStorage.getItem("conditions");s&&H(JSON.parse(s))}}catch(t){console.error("ì»¨ë””ì…˜ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",t)}},M=async()=>{try{const t=E();if(t){const s=await C(t.uid,"projects");s.success&&s.data&&W(s.data)}else{const s=localStorage.getItem("projects");s&&W(JSON.parse(s))}}catch(t){console.error("í”„ë¡œì íŠ¸ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",t)}},S=()=>{if(u.length===0)return{average:0,consistency:0,bestHour:null,worstHour:null};const t={excellent:5,good:4,normal:3,tired:2,exhausted:1},l=u.reduce((o,n)=>o+t[n.condition],0)/u.length,P=u.reduce((o,n)=>{const I=t[n.condition];return o+Math.pow(I-l,2)},0)/u.length,g=Math.sqrt(P),B=g===0?100:Math.max(0,100-g*20),x={};for(let o=0;o<24;o++)x[o]={total:0,count:0,average:0};u.forEach(o=>{const n=re(o.date).hour(),I=t[o.condition];x[n].total+=I,x[n].count+=1}),Object.keys(x).forEach(o=>{const n=parseInt(o);x[n].count>0&&(x[n].average=x[n].total/x[n].count)});const z=Object.entries(x).filter(([o,n])=>n.count>0),w=z.sort((o,n)=>n[1].average-o[1].average)[0],A=z.sort((o,n)=>o[1].average-n[1].average)[0];return{average:l,consistency:B,bestHour:w?{hour:parseInt(w[0]),average:w[1].average}:null,worstHour:A?{hour:parseInt(A[0]),average:A[1].average}:null}},R=()=>{if(y.length===0)return{totalProjects:0,completedProjects:0,completionRate:0,averageProgress:0};const t=y.length,s=y.filter(g=>g.status==="completed").length,l=s/t*100,P=y.reduce((g,B)=>g+B.progress,0)/t;return{totalProjects:t,completedProjects:s,completionRate:l,averageProgress:P}},L=()=>{const t=S(),s=R();return t.consistency>=80&&t.average>=3.5?{type:"ì•ˆì •í˜•",emoji:"ğŸ¯",color:a.palette.success.main,description:"ì¼ê´€ë˜ê³  ì•ˆì •ì ì¸ ì»¨ë””ì…˜ì„ ìœ ì§€í•˜ëŠ” íƒ€ì…ì´ì—ìš”. ê¾¸ì¤€í•¨ì´ ìµœê³ ì˜ ë¬´ê¸°ì…ë‹ˆë‹¤!",traits:["ë†’ì€ ì¼ê´€ì„±","ì•ˆì •ì  ì»¨ë””ì…˜","ì‹ ë¢°í•  ìˆ˜ ìˆìŒ","ê³„íšì "]}:t.consistency<60&&t.average>=3?{type:"ì ì‘í˜•",emoji:"ğŸŒŠ",color:a.palette.info.main,description:"ë³€í™”í•˜ëŠ” ìƒí™©ì— ì˜ ì ì‘í•˜ëŠ” ìœ ì—°í•œ íƒ€ì…ì´ì—ìš”. ë‹¤ì–‘ì„± ì†ì—ì„œ ë¹›ì„ ë°œí•©ë‹ˆë‹¤!",traits:["ë†’ì€ ì ì‘ë ¥","ìœ ì—°í•œ ì‚¬ê³ ","ì°½ì˜ì ","ë³€í™” ìˆ˜ìš©"]}:t.average>=4&&s.completionRate>=70?{type:"ì—­ë™í˜•",emoji:"ğŸš€",color:a.palette.primary.main,description:"ë†’ì€ ì—ë„ˆì§€ì™€ ì‹¤í–‰ë ¥ì„ ê°€ì§„ íƒ€ì…ì´ì—ìš”. ë„ì „ì„ ì¦ê¸°ë©° ëª©í‘œë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤!",traits:["ë†’ì€ ì—ë„ˆì§€","ê°•í•œ ì‹¤í–‰ë ¥","ë„ì „ ì •ì‹ ","ëª©í‘œ ì§€í–¥"]}:{type:"ì„±ì¥í˜•",emoji:"ğŸŒ±",color:a.palette.warning.main,description:"ì•„ì§ ì„±ì¥í•˜ê³  ìˆëŠ” ë‹¨ê³„ì˜ˆìš”. ê¾¸ì¤€í•œ ê´€ë¦¬ë¡œ ë” ë‚˜ì€ ëª¨ìŠµìœ¼ë¡œ ë°œì „í•  ìˆ˜ ìˆì–´ìš”!",traits:["ì„±ì¥ ì ì¬ë ¥","ê°œì„  ì˜ì§€","í•™ìŠµ ì§€í–¥","ë°œì „ ê°€ëŠ¥ì„±"]}},U=()=>{const t=S(),s=L(),l=[];return t.consistency<70&&l.push({icon:"ğŸ“Š",title:"ì»¨ë””ì…˜ ì¼ê´€ì„± ê°œì„ ",description:"ë§¤ì¼ ê°™ì€ ì‹œê°„ì— ì»¨ë””ì…˜ì„ ì²´í¬í•˜ê³  íŒ¨í„´ì„ íŒŒì•…í•´ë³´ì„¸ìš”",color:a.palette.info.main}),t.bestHour&&l.push({icon:"â°",title:"ê³¨ë“ íƒ€ì„ í™œìš©",description:`${t.bestHour.hour}ì‹œê²½ì´ ê°€ì¥ ì¢‹ì€ ì»¨ë””ì…˜ì´ì—ìš”. ì¤‘ìš”í•œ ì¼ì€ ì´ ì‹œê°„ì—!`,color:a.palette.success.main}),t.average<3&&l.push({icon:"ğŸ’ª",title:"ì»¨ë””ì…˜ ê´€ë¦¬ ê°•í™”",description:"ì¶©ë¶„í•œ íœ´ì‹ê³¼ ê·œì¹™ì ì¸ ìƒí™œ íŒ¨í„´ìœ¼ë¡œ ì»¨ë””ì…˜ì„ ê°œì„ í•´ë³´ì„¸ìš”",color:a.palette.warning.main}),s.type==="ì„±ì¥í˜•"&&l.push({icon:"ğŸ¯",title:"ëª©í‘œ ì„¤ì •",description:"ì‘ì€ ëª©í‘œë¶€í„° ì„¤ì •í•´ì„œ ì„±ì·¨ê°ì„ ìŒ“ì•„ê°€ì„¸ìš”",color:a.palette.primary.main}),l};if(D)return e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(q,{})});const h=S(),m=R(),c=L(),T=U();return e.jsxs(i,{sx:{p:3},children:[e.jsxs(i,{sx:{mb:4},children:[e.jsxs(r,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:[b==null?void 0:b.emoji," í”„ë¡œí•„"]}),e.jsx(r,{variant:"body1",color:"textSecondary",children:"ë‹¹ì‹ ì˜ ë°ì´í„°ë¥¼ ë¶„ì„í•´ì„œ ê°œì¸ ì„±í–¥ê³¼ ë§ì¶¤ ì¶”ì²œì„ ì œê³µí•´ë“œë ¤ìš”"})]}),e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,children:e.jsx(j,{sx:{background:`linear-gradient(135deg, ${c.color}20, ${c.color}10)`,border:`2px solid ${c.color}30`},children:e.jsx(p,{children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:3},children:[e.jsx(G,{sx:{width:80,height:80,bgcolor:c.color,fontSize:"2rem"},children:c.emoji}),e.jsxs(i,{sx:{flex:1},children:[e.jsxs(r,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:['ë‹¹ì‹ ì€ "',c.type,'" íƒ€ì…ì´ì—ìš”!']}),e.jsx(r,{variant:"body1",color:"textSecondary",sx:{mb:2},children:c.description}),e.jsx(i,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:c.traits.map(t=>e.jsx(J,{label:t,size:"small",sx:{bgcolor:c.color+"20",color:c.color,fontWeight:"medium"}},t))})]})]})})})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(N,{sx:{fontSize:48,color:a.palette.primary.main,mb:2}}),e.jsx(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"í‰ê·  ì»¨ë””ì…˜"}),e.jsx(r,{variant:"h3",color:"primary",gutterBottom:!0,children:h.average.toFixed(1)}),e.jsx(r,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"5ì  ë§Œì  ì¤‘"}),e.jsx(f,{variant:"determinate",value:h.average/5*100,sx:{height:8,borderRadius:4}})]})})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(_,{sx:{fontSize:48,color:a.palette.success.main,mb:2}}),e.jsx(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"ì¼ê´€ì„± ì§€ìˆ˜"}),e.jsxs(r,{variant:"h3",color:"success.main",gutterBottom:!0,children:[h.consistency.toFixed(0),"%"]}),e.jsx(r,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"ì»¨ë””ì…˜ ì•ˆì •ì„±"}),e.jsx(f,{variant:"determinate",value:h.consistency,color:"success",sx:{height:8,borderRadius:4}})]})})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(K,{sx:{fontSize:48,color:a.palette.warning.main,mb:2}}),e.jsx(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"ê³¨ë“  íƒ€ì„"}),h.bestHour?e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"h3",color:"warning.main",gutterBottom:!0,children:[h.bestHour.hour,"ì‹œ"]}),e.jsxs(r,{variant:"body2",color:"textSecondary",children:["í‰ê·  ",h.bestHour.average.toFixed(1),"ì "]})]}):e.jsx(r,{color:"textSecondary",children:"ë°ì´í„° ë¶€ì¡±"})]})})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{children:[e.jsxs(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Q,{})," í”„ë¡œì íŠ¸ ì„±ê³¼"]}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:6,children:e.jsxs(i,{sx:{textAlign:"center",p:2},children:[e.jsx(r,{variant:"h4",color:"primary",gutterBottom:!0,children:m.totalProjects}),e.jsx(r,{variant:"body2",color:"textSecondary",children:"ì´ í”„ë¡œì íŠ¸"})]})}),e.jsx(d,{item:!0,xs:6,children:e.jsxs(i,{sx:{textAlign:"center",p:2},children:[e.jsx(r,{variant:"h4",color:"success.main",gutterBottom:!0,children:m.completedProjects}),e.jsx(r,{variant:"body2",color:"textSecondary",children:"ì™„ë£Œëœ í”„ë¡œì íŠ¸"})]})})]}),e.jsx(V,{sx:{my:2}}),e.jsxs(i,{sx:{mb:2},children:[e.jsxs(r,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["ì™„ë£Œìœ¨: ",m.completionRate.toFixed(1),"%"]}),e.jsx(f,{variant:"determinate",value:m.completionRate,color:"success",sx:{height:6,borderRadius:3}})]}),e.jsxs(i,{children:[e.jsxs(r,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["í‰ê·  ì§„í–‰ë¥ : ",m.averageProgress.toFixed(1),"%"]}),e.jsx(f,{variant:"determinate",value:m.averageProgress,sx:{height:6,borderRadius:3}})]})]})})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{children:[e.jsxs(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(X,{})," ë§ì¶¤ ì¶”ì²œ"]}),T.length>0?e.jsx(Y,{dense:!0,children:T.map((t,s)=>e.jsxs(Z,{sx:{px:0,py:1},children:[e.jsx(ee,{sx:{minWidth:40},children:e.jsx(r,{fontSize:"1.5rem",children:t.icon})}),e.jsx(te,{primary:e.jsx(r,{variant:"body2",fontWeight:"medium",children:t.title}),secondary:e.jsx(r,{variant:"caption",color:"textSecondary",children:t.description})})]},s))}):e.jsx(i,{sx:{textAlign:"center",py:3},children:e.jsx(r,{color:"textSecondary",children:"ë°ì´í„°ê°€ ë” ìŒ“ì´ë©´ ë§ì¶¤ ì¶”ì²œì„ ì œê³µí•´ë“œë¦´ê²Œìš”! ğŸ“Š"})})]})})})]})]})};export{ae as default};
