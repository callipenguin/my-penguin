import{u as k,a as v,j as e,B as i,g as q,T as r,G as d,a6 as j,a7 as p,w as G,C as J,bj as N,ag as f,bt as _,ar as K,W as Q,U as V,az as X,L as Y,q as Z,t as ee,v as te}from"./mui-1d16f996.js";import{d as re}from"./dayjs-9d6a636c.js";import{g as E,l as C}from"./index-e331ab6a.js";const ae=({themeConfig:b})=>{const a=k(),[u,H]=v.useState([]),[y,W]=v.useState([]),[D,F]=v.useState(!0);v.useEffect(()=>{O()},[]);const O=async()=>{await Promise.all([$(),M()]),F(!1)},$=async()=>{try{const t=E();if(t){const s=await C(t.uid,"conditions");s.success&&s.data&&H(s.data)}else{const s=localStorage.getItem("conditions");s&&H(JSON.parse(s))}}catch(t){console.error("컨디션 데이터 로드 실패:",t)}},M=async()=>{try{const t=E();if(t){const s=await C(t.uid,"projects");s.success&&s.data&&W(s.data)}else{const s=localStorage.getItem("projects");s&&W(JSON.parse(s))}}catch(t){console.error("프로젝트 데이터 로드 실패:",t)}},S=()=>{if(u.length===0)return{average:0,consistency:0,bestHour:null,worstHour:null};const t={excellent:5,good:4,normal:3,tired:2,exhausted:1},l=u.reduce((o,n)=>o+t[n.condition],0)/u.length,P=u.reduce((o,n)=>{const I=t[n.condition];return o+Math.pow(I-l,2)},0)/u.length,g=Math.sqrt(P),B=g===0?100:Math.max(0,100-g*20),x={};for(let o=0;o<24;o++)x[o]={total:0,count:0,average:0};u.forEach(o=>{const n=re(o.date).hour(),I=t[o.condition];x[n].total+=I,x[n].count+=1}),Object.keys(x).forEach(o=>{const n=parseInt(o);x[n].count>0&&(x[n].average=x[n].total/x[n].count)});const z=Object.entries(x).filter(([o,n])=>n.count>0),w=z.sort((o,n)=>n[1].average-o[1].average)[0],A=z.sort((o,n)=>o[1].average-n[1].average)[0];return{average:l,consistency:B,bestHour:w?{hour:parseInt(w[0]),average:w[1].average}:null,worstHour:A?{hour:parseInt(A[0]),average:A[1].average}:null}},R=()=>{if(y.length===0)return{totalProjects:0,completedProjects:0,completionRate:0,averageProgress:0};const t=y.length,s=y.filter(g=>g.status==="completed").length,l=s/t*100,P=y.reduce((g,B)=>g+B.progress,0)/t;return{totalProjects:t,completedProjects:s,completionRate:l,averageProgress:P}},L=()=>{const t=S(),s=R();return t.consistency>=80&&t.average>=3.5?{type:"안정형",emoji:"🎯",color:a.palette.success.main,description:"일관되고 안정적인 컨디션을 유지하는 타입이에요. 꾸준함이 최고의 무기입니다!",traits:["높은 일관성","안정적 컨디션","신뢰할 수 있음","계획적"]}:t.consistency<60&&t.average>=3?{type:"적응형",emoji:"🌊",color:a.palette.info.main,description:"변화하는 상황에 잘 적응하는 유연한 타입이에요. 다양성 속에서 빛을 발합니다!",traits:["높은 적응력","유연한 사고","창의적","변화 수용"]}:t.average>=4&&s.completionRate>=70?{type:"역동형",emoji:"🚀",color:a.palette.primary.main,description:"높은 에너지와 실행력을 가진 타입이에요. 도전을 즐기며 목표를 달성합니다!",traits:["높은 에너지","강한 실행력","도전 정신","목표 지향"]}:{type:"성장형",emoji:"🌱",color:a.palette.warning.main,description:"아직 성장하고 있는 단계예요. 꾸준한 관리로 더 나은 모습으로 발전할 수 있어요!",traits:["성장 잠재력","개선 의지","학습 지향","발전 가능성"]}},U=()=>{const t=S(),s=L(),l=[];return t.consistency<70&&l.push({icon:"📊",title:"컨디션 일관성 개선",description:"매일 같은 시간에 컨디션을 체크하고 패턴을 파악해보세요",color:a.palette.info.main}),t.bestHour&&l.push({icon:"⏰",title:"골든타임 활용",description:`${t.bestHour.hour}시경이 가장 좋은 컨디션이에요. 중요한 일은 이 시간에!`,color:a.palette.success.main}),t.average<3&&l.push({icon:"💪",title:"컨디션 관리 강화",description:"충분한 휴식과 규칙적인 생활 패턴으로 컨디션을 개선해보세요",color:a.palette.warning.main}),s.type==="성장형"&&l.push({icon:"🎯",title:"목표 설정",description:"작은 목표부터 설정해서 성취감을 쌓아가세요",color:a.palette.primary.main}),l};if(D)return e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(q,{})});const h=S(),m=R(),c=L(),T=U();return e.jsxs(i,{sx:{p:3},children:[e.jsxs(i,{sx:{mb:4},children:[e.jsxs(r,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:[b==null?void 0:b.emoji," 프로필"]}),e.jsx(r,{variant:"body1",color:"textSecondary",children:"당신의 데이터를 분석해서 개인 성향과 맞춤 추천을 제공해드려요"})]}),e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,children:e.jsx(j,{sx:{background:`linear-gradient(135deg, ${c.color}20, ${c.color}10)`,border:`2px solid ${c.color}30`},children:e.jsx(p,{children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:3},children:[e.jsx(G,{sx:{width:80,height:80,bgcolor:c.color,fontSize:"2rem"},children:c.emoji}),e.jsxs(i,{sx:{flex:1},children:[e.jsxs(r,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:['당신은 "',c.type,'" 타입이에요!']}),e.jsx(r,{variant:"body1",color:"textSecondary",sx:{mb:2},children:c.description}),e.jsx(i,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:c.traits.map(t=>e.jsx(J,{label:t,size:"small",sx:{bgcolor:c.color+"20",color:c.color,fontWeight:"medium"}},t))})]})]})})})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(N,{sx:{fontSize:48,color:a.palette.primary.main,mb:2}}),e.jsx(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"평균 컨디션"}),e.jsx(r,{variant:"h3",color:"primary",gutterBottom:!0,children:h.average.toFixed(1)}),e.jsx(r,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"5점 만점 중"}),e.jsx(f,{variant:"determinate",value:h.average/5*100,sx:{height:8,borderRadius:4}})]})})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(_,{sx:{fontSize:48,color:a.palette.success.main,mb:2}}),e.jsx(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"일관성 지수"}),e.jsxs(r,{variant:"h3",color:"success.main",gutterBottom:!0,children:[h.consistency.toFixed(0),"%"]}),e.jsx(r,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"컨디션 안정성"}),e.jsx(f,{variant:"determinate",value:h.consistency,color:"success",sx:{height:8,borderRadius:4}})]})})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(K,{sx:{fontSize:48,color:a.palette.warning.main,mb:2}}),e.jsx(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"골든 타임"}),h.bestHour?e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"h3",color:"warning.main",gutterBottom:!0,children:[h.bestHour.hour,"시"]}),e.jsxs(r,{variant:"body2",color:"textSecondary",children:["평균 ",h.bestHour.average.toFixed(1),"점"]})]}):e.jsx(r,{color:"textSecondary",children:"데이터 부족"})]})})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{children:[e.jsxs(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Q,{})," 프로젝트 성과"]}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:6,children:e.jsxs(i,{sx:{textAlign:"center",p:2},children:[e.jsx(r,{variant:"h4",color:"primary",gutterBottom:!0,children:m.totalProjects}),e.jsx(r,{variant:"body2",color:"textSecondary",children:"총 프로젝트"})]})}),e.jsx(d,{item:!0,xs:6,children:e.jsxs(i,{sx:{textAlign:"center",p:2},children:[e.jsx(r,{variant:"h4",color:"success.main",gutterBottom:!0,children:m.completedProjects}),e.jsx(r,{variant:"body2",color:"textSecondary",children:"완료된 프로젝트"})]})})]}),e.jsx(V,{sx:{my:2}}),e.jsxs(i,{sx:{mb:2},children:[e.jsxs(r,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["완료율: ",m.completionRate.toFixed(1),"%"]}),e.jsx(f,{variant:"determinate",value:m.completionRate,color:"success",sx:{height:6,borderRadius:3}})]}),e.jsxs(i,{children:[e.jsxs(r,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["평균 진행률: ",m.averageProgress.toFixed(1),"%"]}),e.jsx(f,{variant:"determinate",value:m.averageProgress,sx:{height:6,borderRadius:3}})]})]})})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(j,{sx:{height:"100%"},children:e.jsxs(p,{children:[e.jsxs(r,{variant:"h6",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(X,{})," 맞춤 추천"]}),T.length>0?e.jsx(Y,{dense:!0,children:T.map((t,s)=>e.jsxs(Z,{sx:{px:0,py:1},children:[e.jsx(ee,{sx:{minWidth:40},children:e.jsx(r,{fontSize:"1.5rem",children:t.icon})}),e.jsx(te,{primary:e.jsx(r,{variant:"body2",fontWeight:"medium",children:t.title}),secondary:e.jsx(r,{variant:"caption",color:"textSecondary",children:t.description})})]},s))}):e.jsx(i,{sx:{textAlign:"center",py:3},children:e.jsx(r,{color:"textSecondary",children:"데이터가 더 쌓이면 맞춤 추천을 제공해드릴게요! 📊"})})]})})})]})]})};export{ae as default};
