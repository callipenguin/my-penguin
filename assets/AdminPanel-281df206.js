import{Z as Fe,Y as ze,_ as Be,$ as Z,r as a,a1 as Pe,a2 as Ne,aT as Ue,j as e,a3 as $e,a7 as Oe,c as J,aU as Ee,aV as He,d as O,u as Ye,J as _e,aW as Ve,aX as Ge,S as Qe,B as r,T as t,P as k,C as S,a as R,aY as te,Q as p,aZ as Ze,U as Je,aj as Xe,an as re,h as $,v as ae,i as D,a_ as Ke,D as ne,e as ie,f as oe,a$ as le,V as ce,k as de,A as xe,b0 as qe,b1 as es,b2 as ss,b3 as ts,b4 as rs,b5 as he,M as as,z as G,aB as ns,L as is,p as os,s as ls,b6 as cs,O as ds,b7 as xs,b8 as hs,b9 as ms,ba as ps}from"./index-fc0e3f91.js";import{a as js,s as us,d as gs,S as bs}from"./presence-f89721d8.js";import{T as ys,a as Q}from"./Tabs-74798590.js";import{C as me}from"./Cancel-ace4e9d8.js";import{F as vs}from"./FormControlLabel-4aefe78f.js";import{S as fs}from"./Switch-f280301c.js";import{B as Cs}from"./Badge-2e3719a9.js";import{T as Ss,a as ws,b as As,c as pe,d as h,e as Ms}from"./TableRow-4f639da0.js";import{D as Is}from"./Delete-2118ac97.js";import"./SwitchBase-f121d878.js";function Ts(x){return Fe("MuiListItemAvatar",x)}ze("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Ws=["className"],ks=x=>{const{alignItems:v,classes:d}=x;return Oe({root:["root",v==="flex-start"&&"alignItemsFlexStart"]},Ts,d)},Rs=Be("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(x,v)=>{const{ownerState:d}=x;return[v.root,d.alignItems==="flex-start"&&v.alignItemsFlexStart]}})(({ownerState:x})=>Z({minWidth:56,flexShrink:0},x.alignItems==="flex-start"&&{marginTop:8})),Ds=a.forwardRef(function(v,d){const j=Pe({props:v,name:"MuiListItemAvatar"}),{className:w}=j,g=Ne(j,Ws),m=a.useContext(Ue),f=Z({},j,{alignItems:m.alignItems}),z=ks(f);return e.jsx(Rs,Z({className:$e(z.root,w),ownerState:f,ref:d},g))}),Ls=Ds,je=J(e.jsx("path",{d:"M15.5 11.5c0 2-2.5 3.5-2.5 5h-2c0-1.5-2.5-3-2.5-5C8.5 9.57 10.07 8 12 8s3.5 1.57 3.5 3.5m-2.5 6h-2V19h2zm9-5.5c0-2.76-1.12-5.26-2.93-7.07l-1.06 1.06C19.55 7.53 20.5 9.66 20.5 12s-.95 4.47-2.49 6.01l1.06 1.06C20.88 17.26 22 14.76 22 12M3.5 12c0-2.34.95-4.47 2.49-6.01L4.93 4.93C3.12 6.74 2 9.24 2 12c0 2.76 1.12 5.26 2.93 7.07l1.06-1.06C4.45 16.47 3.5 14.34 3.5 12m14 0c0 1.52-.62 2.89-1.61 3.89l1.06 1.06C18.22 15.68 19 13.93 19 12c0-1.93-.78-3.68-2.05-4.95l-1.06 1.06c.99 1 1.61 2.37 1.61 3.89M7.05 16.95l1.06-1.06c-1-1-1.61-2.37-1.61-3.89s.62-2.89 1.61-3.89L7.05 7.05C5.78 8.32 5 10.07 5 12c0 1.93.78 3.68 2.05 4.95"}),"OnlinePrediction"),Fs=J(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Pending"),zs=J(e.jsx("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply");var ue={exports:{}};(function(x,v){(function(d,j){x.exports=j()})(Ee,function(){return function(d,j,w){d=d||{};var g=j.prototype,m={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function f(n,i,C,L){return g.fromToBase(n,i,C,L)}w.en.relativeTime=m,g.fromToBase=function(n,i,C,L,P){for(var A,l,M,N=C.$locale().relativeTime||m,F=d.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],Y=F.length,I=0;I<Y;I+=1){var b=F[I];b.d&&(A=L?w(n).diff(C,b.d,!0):C.diff(n,b.d,!0));var T=(d.rounding||Math.round)(Math.abs(A));if(M=A>0,T<=b.r||!b.r){T<=1&&I>0&&(b=F[I-1]);var U=N[b.l];P&&(T=P(""+T)),l=typeof U=="string"?U.replace("%d",T):U(T,i,b.l,M);break}}if(i)return l;var y=M?N.future:N.past;return typeof y=="function"?y(l):y.replace("%s",l)},g.to=function(n,i){return f(n,i,this,!0)},g.from=function(n,i){return f(n,i,this)};var z=function(n){return n.$u?w.utc():w()};g.toNow=function(n){return this.to(z(this),n)},g.fromNow=function(n){return this.from(z(this),n)}}})})(ue);var Bs=ue.exports;const Ps=He(Bs);O.extend(Ps);O.locale("ko");const Qs=({themeConfig:x})=>{const v=Ye();_e(v.breakpoints.down("md"));const[d,j]=a.useState([]),[w,g]=a.useState(!0),[m,f]=a.useState(null),[z,n]=a.useState(!1),[i,C]=a.useState(null),[L,P]=a.useState(""),[A,l]=a.useState({open:!1,message:"",severity:"success"}),[M,N]=a.useState(0),[F,Y]=a.useState([]),[I,b]=a.useState(0),[T,U]=a.useState([]),[y,ge]=a.useState({total:0,pending:0,inProgress:0,completed:0,rejected:0,byType:{},byPriority:{}}),[be,ye]=a.useState([]),[c,X]=a.useState(null),[ve,E]=a.useState(!1),[H,K]=a.useState(""),[q,ee]=a.useState(!1),[fe,Ce]=a.useState(""),Se=async()=>{try{const s=await qe();ee(s.isMaintenanceMode),Ce(s.message||"")}catch(s){console.error("점검 모드 상태 로드 실패:",s)}},we=async s=>{try{if((await es(s,fe)).success)ee(s),l({open:!0,message:`점검 모드가 ${s?"활성화":"비활성화"}되었습니다.`,severity:"success"});else throw new Error("점검 모드 설정 실패")}catch(o){l({open:!0,message:`점검 모드 설정 실패: ${o.message}`,severity:"error"})}};a.useEffect(()=>{_(),Se();const s=js((u,Le)=>{Y(u),b(Le)}),o=Ve(u=>{U(u),ge(ms(u))}),W=us(u=>{ye(u)});return()=>{s(),o(),W()}},[]),a.useEffect(()=>{_()},[]);const _=async()=>{try{g(!0);const s=await Ge();s.success&&s.data?j(s.data):j([])}catch(s){console.error("접근 요청 로드 실패:",s),l({open:!0,message:"데이터를 불러오는데 실패했습니다.",severity:"error"}),j([])}finally{g(!1)}},V=async(s,o,W)=>{try{const u=await ss(s,o,W);u.success?(l({open:!0,message:u.message,severity:"success"}),W&&c&&await ts(c,W),E(!1),X(null),K("")):l({open:!0,message:u.message,severity:"error"})}catch(u){console.error("피드백 상태 업데이트 실패:",u),l({open:!0,message:"상태 업데이트 중 오류가 발생했습니다.",severity:"error"})}},Ae=async s=>{if(window.confirm("정말로 이 피드백을 삭제하시겠습니까?"))try{const o=await ps(s);l({open:!0,message:o.message,severity:o.success?"success":"error"})}catch(o){console.error("피드백 삭제 실패:",o),l({open:!0,message:"삭제 중 오류가 발생했습니다.",severity:"error"})}},B=gs(be),Me=s=>{f(s),C("approve"),n(!0)},Ie=s=>{f(s),C("reject"),n(!0)},Te=async()=>{if(!(!m||!i)){if(i==="reject"&&!L.trim()){l({open:!0,message:"거부 시에는 사유를 입력해주세요.",severity:"error"});return}try{const s=i==="approve"?"approved":"rejected";await rs(m.id,s,L),l({open:!0,message:`${m.email}의 요청이 ${i==="approve"?"승인":"거부"}되었습니다.`,severity:"success"}),_()}catch{l({open:!0,message:"처리 중 오류가 발생했습니다.",severity:"error"})}finally{n(!1),f(null),C(null),P("")}}},se=()=>{l({...A,open:!1})},We=(s,o)=>{N(o)},ke=()=>e.jsxs(p,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",height:"100%"},children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(je,{sx:{fontSize:40,mb:1}}),e.jsx(t,{variant:"h4",fontWeight:"bold",children:I}),e.jsx(t,{variant:"body2",sx:{opacity:.9},children:"현재 접속자"})]})})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",height:"100%"},children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(he,{sx:{fontSize:40,mb:1}}),e.jsx(t,{variant:"h4",fontWeight:"bold",children:y.pending}),e.jsx(t,{variant:"body2",sx:{opacity:.9},children:"대기중 피드백"})]})})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",height:"100%"},children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(te,{sx:{fontSize:40,mb:1}}),e.jsx(t,{variant:"h4",fontWeight:"bold",children:B.messagesThisHour}),e.jsx(t,{variant:"body2",sx:{opacity:.9},children:"최근 1시간 채팅"})]})})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{sx:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",color:"white",height:"100%"},children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(as,{sx:{fontSize:40,mb:1}}),e.jsx(t,{variant:"h4",fontWeight:"bold",children:d.filter(s=>s.status==="pending").length}),e.jsx(t,{variant:"body2",sx:{opacity:.9},children:"승인 대기"})]})})})]}),Re=()=>e.jsx(S,{sx:{mb:3},children:e.jsxs(R,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(t,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(je,{color:"primary"}),"실시간 접속자 (",I,"명)"]}),e.jsx(G,{onClick:()=>window.location.reload(),children:e.jsx(ns,{})})]}),F.length===0?e.jsx(t,{color:"text.secondary",sx:{textAlign:"center",py:3},children:"현재 접속한 사용자가 없습니다 😴"}):e.jsx(is,{children:F.map((s,o)=>e.jsxs(os,{divider:o<F.length-1,children:[e.jsx(Ls,{children:e.jsx(Cs,{badgeContent:s.status==="online"?"🟢":"🟡",overlap:"circular",children:e.jsx(re,{src:s.photoURL,children:s.displayName.charAt(0)})})}),e.jsx(ls,{primary:s.displayName,secondary:e.jsxs(r,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:s.email}),s.page&&e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["📍 ",s.page]}),e.jsxs(t,{variant:"caption",color:"text.secondary",children:["마지막 활동: ",s.lastSeen?O(s.lastSeen.toDate()).fromNow():"정보 없음"]})]})}),e.jsx(cs,{children:e.jsx($,{label:s.status==="online"?"온라인":"자리비움",size:"small",color:s.status==="online"?"success":"default"})})]},s.uid))})]})}),De=()=>e.jsx(S,{children:e.jsxs(R,{children:[e.jsxs(t,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(he,{color:"primary"}),"피드백 관리 (",y.total,"개)"]}),e.jsxs(p,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(p,{item:!0,xs:3,children:e.jsxs(k,{sx:{p:2,textAlign:"center",bgcolor:"grey.100"},children:[e.jsx(t,{variant:"h6",children:y.pending}),e.jsx(t,{variant:"caption",children:"대기"})]})}),e.jsx(p,{item:!0,xs:3,children:e.jsxs(k,{sx:{p:2,textAlign:"center",bgcolor:"info.light",color:"white"},children:[e.jsx(t,{variant:"h6",children:y.inProgress}),e.jsx(t,{variant:"caption",children:"진행중"})]})}),e.jsx(p,{item:!0,xs:3,children:e.jsxs(k,{sx:{p:2,textAlign:"center",bgcolor:"success.light",color:"white"},children:[e.jsx(t,{variant:"h6",children:y.completed}),e.jsx(t,{variant:"caption",children:"완료"})]})}),e.jsx(p,{item:!0,xs:3,children:e.jsxs(k,{sx:{p:2,textAlign:"center",bgcolor:"error.light",color:"white"},children:[e.jsx(t,{variant:"h6",children:y.rejected}),e.jsx(t,{variant:"caption",children:"거부"})]})})]}),e.jsx(Ss,{component:k,variant:"outlined",children:e.jsxs(ws,{size:"small",children:[e.jsx(As,{children:e.jsxs(pe,{children:[e.jsx(h,{children:"타입"}),e.jsx(h,{children:"제목"}),e.jsx(h,{children:"사용자"}),e.jsx(h,{children:"우선순위"}),e.jsx(h,{children:"상태"}),e.jsx(h,{children:"날짜"}),e.jsx(h,{children:"액션"})]})}),e.jsx(Ms,{children:T.slice(0,10).map(s=>e.jsxs(pe,{hover:!0,children:[e.jsx(h,{children:e.jsx($,{label:`${le(s.type)} ${s.type}`,size:"small",variant:"outlined"})}),e.jsx(h,{children:e.jsx(ds,{title:s.description,children:e.jsx(t,{variant:"body2",noWrap:!0,sx:{maxWidth:200},children:s.title})})}),e.jsx(h,{children:s.userDisplayName}),e.jsx(h,{children:e.jsx($,{label:s.priority,size:"small",sx:{backgroundColor:xs(s.priority),color:"white"}})}),e.jsx(h,{children:e.jsx($,{label:s.status,size:"small",sx:{backgroundColor:hs(s.status),color:"white"}})}),e.jsx(h,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:s.createdAt?O(s.createdAt.toDate()).format("MM/DD HH:mm"):"날짜 정보 없음"})}),e.jsx(h,{children:e.jsxs(r,{sx:{display:"flex",gap:.5},children:[e.jsx(G,{size:"small",onClick:()=>{X(s),E(!0)},children:e.jsx(zs,{fontSize:"small"})}),e.jsx(G,{size:"small",color:"error",onClick:()=>Ae(s.id),children:e.jsx(Is,{fontSize:"small"})})]})})]},s.id))})]})})]})});return e.jsx(Qe,{in:!0,timeout:800,children:e.jsxs(r,{sx:{p:{xs:2,md:3},maxWidth:"1400px",mx:"auto"},children:[e.jsxs(r,{sx:{mb:4},children:[e.jsx(t,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:`${x==null?void 0:x.concepts.environment} 관리소`}),e.jsx(t,{variant:"body1",color:"text.secondary",children:"실시간 사용자 현황과 피드백을 관리하고 시스템을 모니터링하세요"})]}),ke(),e.jsx(k,{sx:{mb:3},children:e.jsxs(ys,{value:M,onChange:We,variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider"},children:[e.jsx(Q,{label:"🌐 실시간 현황"}),e.jsx(Q,{label:"💬 피드백 관리"}),e.jsx(Q,{label:"👥 사용자 승인"})]})}),M===0&&e.jsxs(r,{children:[Re(),e.jsx(S,{children:e.jsxs(R,{children:[e.jsxs(t,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(te,{color:"primary"}),"채팅 통계"]}),e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{item:!0,xs:12,md:6,children:e.jsxs(k,{sx:{p:2},children:[e.jsx(t,{variant:"subtitle1",gutterBottom:!0,children:"📊 메시지 현황"}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(t,{variant:"body2",children:"총 메시지:"}),e.jsxs(t,{variant:"body2",fontWeight:"bold",children:[B.totalMessages,"개"]})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(t,{variant:"body2",children:"최근 1시간:"}),e.jsxs(t,{variant:"body2",fontWeight:"bold",children:[B.messagesThisHour,"개"]})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{variant:"body2",children:"활성 사용자:"}),e.jsxs(t,{variant:"body2",fontWeight:"bold",children:[B.activeUsers,"명"]})]})]})}),e.jsx(p,{item:!0,xs:12,md:6,children:e.jsxs(k,{sx:{p:2},children:[e.jsx(t,{variant:"subtitle1",gutterBottom:!0,children:"🏆 인기 이모지"}),B.topEmojis.length>0?B.topEmojis.map((s,o)=>e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(t,{variant:"body2",children:s.emoji}),e.jsxs(t,{variant:"body2",fontWeight:"bold",children:[s.count,"회"]})]},s.emoji)):e.jsx(t,{variant:"body2",color:"text.secondary",children:"아직 이모지 사용 기록이 없습니다"})]})})]})]})})]}),M===1&&De(),M===2&&e.jsx(S,{sx:{overflow:"hidden"},children:e.jsxs(R,{sx:{p:0},children:[e.jsx(r,{sx:{p:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ze,{sx:{fontSize:32}}),e.jsxs(r,{children:[e.jsx(t,{variant:"h5",fontWeight:"bold",children:"사용자 접근 요청 관리"}),e.jsx(t,{variant:"body2",sx:{opacity:.9},children:"새로운 사용자의 접근 요청을 승인하거나 거부할 수 있습니다"})]})]})}),e.jsx(r,{sx:{p:3},children:w?e.jsxs(r,{sx:{textAlign:"center",py:6},children:[e.jsx(Je,{sx:{mb:3,maxWidth:300,mx:"auto"}}),e.jsx(t,{color:"text.secondary",variant:"h6",children:"데이터를 불러오는 중..."}),e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"잠시만 기다려주세요 ⏳"})]}):d.length===0?e.jsxs(r,{sx:{textAlign:"center",py:6},children:[e.jsx(t,{variant:"h4",sx:{mb:2,opacity:.7},children:"🎉"}),e.jsx(t,{variant:"h6",gutterBottom:!0,color:"text.primary",children:"처리할 접근 요청이 없습니다"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"모든 요청이 처리되었거나 새로운 요청이 없습니다."})]}):e.jsxs(r,{children:[e.jsxs(t,{variant:"h6",sx:{mb:3,color:"text.primary"},children:["📋 접근 요청 목록 (",d.length,"건)"]}),e.jsx(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:d.map((s,o)=>{var W;return e.jsx(Xe,{direction:"up",in:!0,timeout:300+o*100,children:e.jsx(S,{variant:"outlined",sx:{p:3,borderRadius:3,transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 25px rgba(0,0,0,0.12)",transform:"translateY(-2px)"},border:s.status==="pending"?"2px solid rgba(255,193,7,0.3)":s.status==="approved"?"2px solid rgba(76,175,80,0.3)":"2px solid rgba(244,67,54,0.3)",background:s.status==="pending"?"rgba(255,193,7,0.02)":s.status==="approved"?"rgba(76,175,80,0.02)":"rgba(244,67,54,0.02)"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"flex-start",gap:3},children:[e.jsx(re,{src:s.photoURL,sx:{width:56,height:56,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:((W=s.displayName)==null?void 0:W.charAt(0))||s.email.charAt(0)}),e.jsxs(r,{sx:{flex:1,minWidth:0},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[e.jsx(t,{variant:"h6",fontWeight:"bold",sx:{color:"text.primary"},children:s.displayName||"이름 없음"}),e.jsx($,{icon:s.status==="pending"?e.jsx(Fs,{}):s.status==="approved"?e.jsx(ae,{}):e.jsx(me,{}),label:s.status==="pending"?"대기중":s.status==="approved"?"승인됨":"거부됨",size:"small",variant:"filled",color:s.status==="pending"?"warning":s.status==="approved"?"success":"error",sx:{fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}})]}),e.jsxs(t,{variant:"body1",color:"text.secondary",sx:{mb:1},children:["📧 ",s.email]}),s.reason&&e.jsxs(r,{sx:{p:2,bgcolor:"rgba(25,118,210,0.08)",borderRadius:2,border:"1px solid rgba(25,118,210,0.1)",mb:2},children:[e.jsx(t,{variant:"body2",sx:{fontWeight:"medium",mb:.5},children:"💬 요청 사유:"}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:['"',s.reason,'"']})]}),e.jsxs(t,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5,fontWeight:"medium"},children:["🕒 요청일:"," ",s.createdAt?O(s.createdAt.toDate()).format("YYYY년 MM월 DD일 HH:mm"):"날짜 정보 없음"]})]}),s.status==="pending"&&e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1,minWidth:120},children:[e.jsx(D,{variant:"contained",color:"success",size:"small",startIcon:e.jsx(ae,{}),onClick:()=>Me(s),sx:{fontWeight:"bold",boxShadow:"0 3px 10px rgba(76,175,80,0.3)","&:hover":{boxShadow:"0 5px 15px rgba(76,175,80,0.4)"}},children:"승인"}),e.jsx(D,{variant:"outlined",color:"error",size:"small",startIcon:e.jsx(me,{}),onClick:()=>Ie(s),sx:{fontWeight:"bold",borderWidth:2,"&:hover":{borderWidth:2,boxShadow:"0 3px 10px rgba(244,67,54,0.3)"}},children:"거부"})]})]})})},s.id)})})]})})]})}),e.jsx(r,{sx:{mt:4,display:"flex",justifyContent:"center"},children:e.jsx(vs,{control:e.jsx(fs,{checked:q,onChange:s=>we(s.target.checked),name:"maintenanceMode",color:"primary"}),label:e.jsxs(t,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ke,{}),q?"점검 모드 ON":"점검 모드 OFF"]})})}),e.jsxs(ne,{open:ve,onClose:()=>E(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(ie,{children:"💬 피드백 응답"}),e.jsx(oe,{children:c&&e.jsxs(r,{sx:{mb:3},children:[e.jsxs(t,{variant:"h6",gutterBottom:!0,children:[le(c.type)," ",c.title]}),e.jsxs(t,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["작성자: ",c.userDisplayName," (",c.userEmail,")"]}),e.jsx(t,{variant:"body1",sx:{mb:2,p:2,bgcolor:"grey.100",borderRadius:1},children:c.description}),e.jsx(ce,{fullWidth:!0,multiline:!0,rows:4,label:"관리자 응답",placeholder:"사용자에게 보낼 응답을 작성해주세요...",value:H,onChange:s=>K(s.target.value),sx:{mb:2}})]})}),e.jsxs(de,{children:[e.jsx(D,{onClick:()=>E(!1),children:"취소"}),e.jsx(D,{onClick:()=>V(c==null?void 0:c.id,"in-progress"),color:"info",children:"진행중으로 변경"}),e.jsx(D,{onClick:()=>V(c==null?void 0:c.id,"completed",H),color:"success",disabled:!H.trim(),children:"완료 처리"}),e.jsx(D,{onClick:()=>V(c==null?void 0:c.id,"rejected",H),color:"error",children:"거부"})]})]}),e.jsxs(ne,{open:z,onClose:()=>n(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(ie,{children:i==="approve"?"✅ 접근 승인":"❌ 접근 거부"}),e.jsxs(oe,{children:[m&&e.jsxs(r,{sx:{mb:2},children:[e.jsxs(t,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:m.displayName||"이름 없음"})," (",m.email,")의 접근을"," ",i==="approve"?"승인":"거부","하시겠습니까?"]}),m.reason&&e.jsx(xe,{severity:"info",sx:{mt:2},children:e.jsxs(t,{variant:"body2",children:[e.jsx("strong",{children:"요청 사유:"})," ",m.reason]})})]}),e.jsx(ce,{fullWidth:!0,multiline:!0,rows:3,label:i==="approve"?"승인 메시지 (선택사항)":"거부 사유",placeholder:i==="approve"?"승인과 함께 전달할 메시지를 입력하세요...":"거부 사유를 입력하세요...",value:L,onChange:s=>P(s.target.value)})]}),e.jsxs(de,{children:[e.jsx(D,{onClick:()=>n(!1),children:"취소"}),e.jsx(D,{onClick:Te,variant:"contained",color:i==="approve"?"success":"error",children:i==="approve"?"승인":"거부"})]})]}),e.jsx(bs,{open:A.open,autoHideDuration:6e3,onClose:se,children:e.jsx(xe,{onClose:se,severity:A.severity,sx:{width:"100%"},children:A.message})})]})})};export{Qs as default};
