import{a as n,j as e,D as M,b as R,B as t,aD as y,T as i,o as h,ae as W,c as P,a_ as $,a$ as m,b0 as C,aj as v,bJ as L,e as N,f as U,a6 as Z,a7 as _,C as c,bK as F,bL as J,b5 as K,b6 as O,b7 as q,ak as G,al as Q,am as V,an as X}from"./mui-f5b39a97.js";import{$ as Y,a0 as ee,a1 as se,a2 as re}from"./index-16e83210.js";import{d as A}from"./dayjs-9d6a636c.js";const ne=({open:d,onClose:x})=>{const[r,w]=n.useState(0),[u,k]=n.useState([]),[j,z]=n.useState([]),[p,S]=n.useState([]),[D,E]=n.useState(null);n.useEffect(()=>{d&&g()},[d]);const g=()=>{k(Y()),z(ee()),S(se())},H=(s,a)=>{const l={sx:{color:(()=>{switch(a){case"critical":return"error.main";case"high":return"warning.main";case"medium":return"info.main";case"low":return"success.main";default:return"info.main"}})()}};switch(s){case"error":return e.jsx(X,{...l});case"warning":return e.jsx(V,{...l});case"success":return e.jsx(Q,{...l});default:return a==="critical"?e.jsx(v,{...l}):e.jsx(G,{...l})}},I=s=>{switch(s){case"critical":return"🚨 긴급";case"high":return"⚠️ 높음";case"medium":return"📢 보통";case"low":return"💡 낮음";default:return"📢 보통"}},b=s=>{switch(s){case"critical":return"error";case"high":return"warning";case"medium":return"info";case"low":return"success";default:return"info"}},B=s=>{re(s),g()},T=s=>{const a=D===s.id,o=s.read||!1;return e.jsx(Z,{sx:{mb:1,border:"1px solid",borderColor:`${b(s.severity)}.main`,backgroundColor:o?"grey.50":"background.paper",opacity:o?.7:1,borderRadius:2},children:e.jsxs(_,{sx:{p:2,"&:last-child":{pb:2}},children:[e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:1,flex:1,children:[H(s.type,s.severity),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",sx:{mr:1},children:s.title}),e.jsx(c,{label:I(s.severity),size:"small",color:b(s.severity),sx:{fontSize:"0.7rem"}}),!o&&e.jsx(c,{icon:e.jsx(F,{sx:{fontSize:"0.5rem !important"}}),label:"새 알림",size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.6rem",height:"20px"}})]}),e.jsxs(t,{display:"flex",alignItems:"center",gap:.5,children:[!o&&e.jsx(h,{size:"small",onClick:()=>B(s.id),title:"읽음으로 표시",children:e.jsx(J,{fontSize:"small"})}),e.jsx(h,{size:"small",onClick:()=>E(a?null:s.id),children:a?e.jsx(K,{}):e.jsx(O,{})})]})]}),e.jsxs(i,{variant:"caption",color:"text.secondary",display:"block",mb:1,children:["📅 ",A(s.createdAt).format("MM/DD HH:mm"),s.expiresAt&&e.jsxs(e.Fragment,{children:[" • ⏰ 만료: ",A(s.expiresAt).format("MM/DD HH:mm")]})]}),e.jsx(q,{in:a,children:e.jsxs(t,{sx:{mt:1,p:2,backgroundColor:"grey.50",borderRadius:1},children:[e.jsx(i,{variant:"body2",sx:{whiteSpace:"pre-line",mb:2},children:s.message}),e.jsxs(t,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(c,{label:s.type,size:"small",variant:"outlined"}),s.persistent&&e.jsx(c,{label:"📌 지속적",size:"small",color:"warning",variant:"outlined"}),s.dismissible&&e.jsx(c,{label:"✅ 닫기 가능",size:"small",color:"success",variant:"outlined"})]})]})})]})},s.id)},f=()=>{switch(r){case 0:return j;case 1:return p;case 2:return u;default:return u}};return e.jsxs(M,{open:d,onClose:x,maxWidth:"md",fullWidth:!0,children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(y,{color:"primary"}),e.jsx(i,{variant:"h6",children:"알림 관리 센터 📬"})]}),e.jsx(h,{onClick:x,size:"small",children:e.jsx(W,{})})]}),e.jsxs(P,{sx:{p:0},children:[e.jsx(t,{sx:{p:2,backgroundColor:"grey.50",borderBottom:1,borderColor:"divider"},children:e.jsxs(i,{variant:"body2",color:"text.secondary",textAlign:"center",children:[r===0&&"🚨 현재 표시 중인 긴급 알림들",r===1&&"📢 아직 읽음 처리하지 않은 모든 알림들",r===2&&"📚 모든 알림의 완전한 기록 (시간순 정렬)"]})}),e.jsx(t,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs($,{value:r,onChange:(s,a)=>w(a),variant:"fullWidth",children:[e.jsx(m,{icon:e.jsx(C,{badgeContent:j.length,color:"error",showZero:!0,children:e.jsx(v,{})}),label:"현재 활성",iconPosition:"start"}),e.jsx(m,{icon:e.jsx(C,{badgeContent:p.length,color:"primary",showZero:!0,children:e.jsx(L,{})}),label:"미확인",iconPosition:"start"}),e.jsx(m,{icon:e.jsx(y,{}),label:`전체 (${u.length})`,iconPosition:"start"})]})}),e.jsx(t,{sx:{p:2,maxHeight:500,overflow:"auto"},children:f().length===0?e.jsxs(t,{sx:{textAlign:"center",py:4},children:[e.jsxs(i,{variant:"body1",color:"text.secondary",children:[r===0&&"현재 활성화된 알림이 없습니다 ✨",r===1&&"모든 알림을 확인했습니다! 👏",r===2&&"알림 히스토리가 없습니다 📭"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[r===0&&"새로운 알림이 있으면 여기에 표시됩니다",r===1&&"읽음 처리하지 않은 알림이 여기에 표시됩니다",r===2&&"모든 알림의 기록이 여기에 저장됩니다"]})]}):e.jsx(t,{children:f().map(s=>T(s))})})]}),e.jsx(N,{sx:{p:2},children:e.jsx(U,{onClick:x,variant:"contained",children:"닫기"})})]})};export{ne as default};
