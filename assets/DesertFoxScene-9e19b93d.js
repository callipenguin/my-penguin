import{u as S,a as r,j as a,B as c,a6 as D,a7 as H,T as j}from"./mui-1d16f996.js";import"./dayjs-9d6a636c.js";const P=({width:n=800,height:i=400,projects:p=[]})=>{const u=S(),h=r.useRef(null),m=r.useRef(),[F,x]=r.useState([]),[d,b]=r.useState(null),[X,C]=r.useState({x:0,y:0}),f=r.useCallback(()=>{const e=[],o=p.length>0?Math.min(p.length,8):1;for(let s=0;s<o;s++){const t={id:s,x:Math.random()*(n-60)+30,y:Math.random()*(i-60)+30,targetX:Math.random()*(n-60)+30,targetY:Math.random()*(i-60)+30,speed:.3+Math.random()*.4,emoji:s%2===0?"🦊":"🌵",project:p[s]||void 0,lastMove:Date.now(),isHovered:!1};e.push(t)}x(e)},[n,i,p]),y=r.useCallback(()=>{x(e=>e.map(o=>{const s=Date.now();let t={...o};if(t.isHovered||t.emoji!=="🦊")return t;const l=Math.sqrt(Math.pow(o.x-o.targetX,2)+Math.pow(o.y-o.targetY,2));(l<5||s-o.lastMove>3e3+Math.random()*2e3)&&(t.targetX=Math.random()*(n-60)+30,t.targetY=Math.random()*(i-60)+30,t.lastMove=s);const w=t.targetX-t.x,E=t.targetY-t.y,v=Math.min(t.speed,l);return l>0&&(t.x+=w/l*v,t.y+=E/l*v),t}))},[n,i]),g=r.useCallback(()=>{y(),m.current=requestAnimationFrame(g)},[y]),k=e=>{if(h.current){const o=h.current.getBoundingClientRect();C({x:e.clientX-o.left,y:e.clientY-o.top})}},M=(e,o)=>{x(s=>s.map(t=>t.id===e.id?{...t,isHovered:o}:t)),o&&e.project&&e.emoji==="🦊"?b(e.project):o||b(null)},z=()=>{b(null),x(e=>e.map(o=>({...o,isHovered:!1})))};r.useEffect(()=>(f(),m.current=requestAnimationFrame(g),()=>{m.current&&cancelAnimationFrame(m.current)}),[f,g]);const R=[{emoji:"☀️",x:"85%",y:"15%",size:"40px",opacity:.8},{emoji:"🏜️",x:"20%",y:"80%",size:"35px",opacity:.6},{emoji:"🌵",x:"90%",y:"70%",size:"30px",opacity:.7},{emoji:"🏔️",x:"10%",y:"20%",size:"45px",opacity:.5},{emoji:"🐪",x:"70%",y:"85%",size:"25px",opacity:.6}];return a.jsxs(c,{ref:h,sx:{position:"relative",width:n,height:i,background:"linear-gradient(135deg, #FFF3E0 0%, #FFCC02 25%, #FF8F00 50%, #E65100 100%)",borderRadius:2,overflow:"hidden",cursor:"pointer"},onMouseMove:k,onMouseLeave:z,children:[R.map((e,o)=>a.jsx(c,{sx:{position:"absolute",left:e.x,top:e.y,fontSize:e.size,opacity:e.opacity,pointerEvents:"none",userSelect:"none"},children:e.emoji},o)),F.map(e=>a.jsx(c,{sx:{position:"absolute",left:e.x,top:e.y,fontSize:e.emoji==="🦊"?"24px":"20px",cursor:e.project?"pointer":"default",transform:`translate(-50%, -50%) ${e.isHovered?"scale(1.3)":"scale(1)"}`,transition:"transform 0.2s ease",zIndex:e.emoji==="🦊"?10:5,filter:e.isHovered?"drop-shadow(0 0 8px rgba(255, 143, 0, 0.8))":"none"},onMouseEnter:()=>M(e,!0),onMouseLeave:()=>M(e,!1),children:e.emoji},e.id)),d&&a.jsx(D,{sx:{position:"absolute",top:16,left:16,minWidth:200,maxWidth:300,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.3)",borderRadius:2,border:"2px solid #ff8f00",backdropFilter:"blur(8px)",backgroundColor:u.palette.mode==="dark"?"rgba(30, 30, 30, 0.95)":"rgba(255, 248, 225, 0.95)"},children:a.jsxs(H,{sx:{p:2},children:[a.jsxs(j,{variant:"subtitle1",fontWeight:"bold",sx:{color:u.palette.mode==="dark"?"#FFB74D":"#ff8f00"},children:["🦊 ",d.title]}),a.jsx(j,{variant:"body2",sx:{mt:1,color:u.palette.mode==="dark"?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.6)"},children:d.description}),a.jsxs(c,{sx:{mt:1,display:"flex",alignItems:"center",gap:1},children:[a.jsxs(j,{variant:"caption",sx:{color:u.palette.mode==="dark"?"rgba(255, 255, 255, 0.9)":"rgba(0, 0, 0, 0.8)"},children:["진행률: ",d.progress,"%"]}),a.jsx(c,{sx:{flex:1,height:4,backgroundColor:"rgba(255, 143, 0, 0.2)",borderRadius:2,overflow:"hidden"},children:a.jsx(c,{sx:{height:"100%",width:`${d.progress}%`,backgroundColor:"#ff8f00",transition:"width 0.3s ease"}})})]})]})})]})};export{P as default};
