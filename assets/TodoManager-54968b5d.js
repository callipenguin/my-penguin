import{a9 as dt,a as x,j as e,a6 as ee,a7 as J,B as r,aK as fe,T as i,C as k,aX as xt,aY as ye,J as G,o as U,aL as we,aM as Se,D as ae,b as ie,c as ne,d as b,F as P,I as M,S as F,M as o,e as oe,f as W,aZ as ce,a_ as je,aF as ue,ap as re,a$ as ke,b0 as O,b1 as K,b2 as Ge,b3 as Ne,b4 as He,u as ht,b5 as ut,w as Be,x as jt,ag as be,b6 as pt,b7 as Je,b8 as mt,W as he,L as Ce,q as De,v as Ie,b9 as gt,ar as $e,ah as vt,am as ft,G as E,aW as yt,ba as bt,A as xe,af as Re,bb as Ct,bc as Oe,bd as qe,aI as Dt,be as It,bf as wt,bg as St,t as kt}from"./mui-754dcb1a.js";import{d as g}from"./dayjs-9d6a636c.js";import{a as Tt}from"./index-bf293548.js";const Ue={urgent:"#f44336",high:"#ff9800",medium:"#2196f3",low:"#4caf50"},At={urgent:"긴급",high:"높음",medium:"보통",low:"낮음"},Wt=dt.memo(({todo:s,onUpdate:Y,onDelete:v,onToggleComplete:T})=>{var $,z;const[L,A]=x.useState(!1),[y,f]=x.useState({title:s.title,description:s.description??"",priority:s.priority,dueDate:s.dueDate??"",tags:(($=s.tags)==null?void 0:$.join(", "))??""}),B=()=>{const p={...s,title:y.title,description:y.description||void 0,priority:y.priority,dueDate:y.dueDate||void 0,tags:y.tags?y.tags.split(",").map(n=>n.trim()).filter(Boolean):void 0,updatedAt:new Date().toISOString()};Y(p),A(!1)},j=()=>{var p;f({title:s.title,description:s.description??"",priority:s.priority,dueDate:s.dueDate??"",tags:((p=s.tags)==null?void 0:p.join(", "))??""}),A(!1)},u=s.dueDate&&!s.completed&&g(s.dueDate).isBefore(g(),"day"),C=s.dueDate&&g(s.dueDate).isSame(g(),"day");return e.jsxs(e.Fragment,{children:[e.jsx(ee,{sx:{mb:2,opacity:s.completed?.7:1,borderLeft:`4px solid ${Ue[s.priority]}`,backgroundColor:u?"#ffebee":C?"#fff3e0":"inherit"},children:e.jsx(J,{children:e.jsxs(r,{display:"flex",alignItems:"flex-start",gap:2,children:[e.jsx(fe,{checked:s.completed,onChange:()=>T(s.id),sx:{mt:-1}}),e.jsxs(r,{flex:1,children:[e.jsxs(r,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(i,{variant:"h6",sx:{textDecoration:s.completed?"line-through":"none",flex:1},children:s.title}),e.jsx(k,{size:"small",icon:e.jsx(xt,{}),label:At[s.priority],sx:{backgroundColor:Ue[s.priority],color:"white",fontSize:"0.75rem"}})]}),s.description&&e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1,textDecoration:s.completed?"line-through":"none"},children:s.description}),e.jsxs(r,{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",children:[s.dueDate&&e.jsx(k,{size:"small",icon:e.jsx(ye,{}),label:g(s.dueDate).format("MM/DD"),color:u?"error":C?"warning":"default",variant:"outlined"}),(z=s.tags)==null?void 0:z.map((p,n)=>e.jsx(k,{size:"small",label:p,variant:"outlined",sx:{fontSize:"0.7rem"}},n))]})]}),e.jsxs(r,{display:"flex",flexDirection:"column",gap:1,children:[e.jsx(G,{title:"수정",children:e.jsx(U,{size:"small",onClick:()=>A(!0),disabled:s.completed,children:e.jsx(we,{fontSize:"small"})})}),e.jsx(G,{title:"삭제",children:e.jsx(U,{size:"small",onClick:()=>v(s.id),color:"error",children:e.jsx(Se,{fontSize:"small"})})})]})]})})}),e.jsxs(ae,{open:L,onClose:j,maxWidth:"sm",fullWidth:!0,children:[e.jsx(ie,{children:"할일 수정 ✏️"}),e.jsx(ne,{children:e.jsxs(r,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsx(b,{label:"제목",value:y.title,onChange:p=>f(n=>({...n,title:p.target.value})),fullWidth:!0,required:!0}),e.jsx(b,{label:"설명",value:y.description,onChange:p=>f(n=>({...n,description:p.target.value})),fullWidth:!0,multiline:!0,rows:3}),e.jsxs(P,{fullWidth:!0,children:[e.jsx(M,{children:"우선순위"}),e.jsxs(F,{value:y.priority,onChange:p=>f(n=>({...n,priority:p.target.value})),label:"우선순위",children:[e.jsx(o,{value:"low",children:"낮음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"urgent",children:"긴급"})]})]}),e.jsx(b,{label:"마감일",type:"date",value:y.dueDate,onChange:p=>f(n=>({...n,dueDate:p.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsx(b,{label:"태그 (쉼표로 구분)",value:y.tags,onChange:p=>f(n=>({...n,tags:p.target.value})),fullWidth:!0,placeholder:"업무, 개인, 공부"})]})}),e.jsxs(oe,{children:[e.jsx(W,{onClick:j,startIcon:e.jsx(ce,{}),children:"취소"}),e.jsx(W,{onClick:B,variant:"contained",startIcon:e.jsx(je,{}),disabled:!y.title.trim(),children:"저장"})]})]})]})}),Et=({todos:s,epics:Y,projects:v,onAddTodo:T,onUpdateTodo:L,onDeleteTodo:A,onToggleComplete:y})=>{const[f,B]=x.useState(""),[j,u]=x.useState({status:"all",priority:"all",epicId:"all",projectId:"all"}),[C,$]=x.useState(0),[z,p]=x.useState(!1),[n,D]=x.useState({title:"",description:"",priority:"medium",dueDate:"",tags:"",epicId:"",projectId:""}),Q=x.useMemo(()=>{let t=s;switch(C){case 1:t=t.filter(c=>c.dueDate&&g(c.dueDate).isSame(g(),"day"));break;case 2:t=t.filter(c=>c.dueDate&&g(c.dueDate).isSame(g(),"week"));break;case 3:t=t.filter(c=>c.completed);break}f&&(t=t.filter(c=>{var I,w;return c.title.toLowerCase().includes(f.toLowerCase())||((I=c.description)==null?void 0:I.toLowerCase().includes(f.toLowerCase()))||((w=c.tags)==null?void 0:w.some(N=>N.toLowerCase().includes(f.toLowerCase())))})),j.status&&j.status!=="all"&&(t=t.filter(c=>j.status==="completed"?c.completed:!c.completed)),j.priority&&j.priority!=="all"&&(t=t.filter(c=>c.priority===j.priority)),j.epicId&&j.epicId!=="all"&&(t=t.filter(c=>c.epicId===j.epicId)),j.projectId&&j.projectId!=="all"&&(t=t.filter(c=>c.projectId===j.projectId));const l={urgent:0,high:1,medium:2,low:3};return t.sort((c,I)=>c.completed!==I.completed?c.completed?1:-1:l[c.priority]-l[I.priority])},[s,f,j,C]),S=x.useMemo(()=>{const t=s.length,l=s.filter(w=>w.completed).length,c=s.filter(w=>w.dueDate&&g(w.dueDate).isSame(g(),"day")).length,I=s.filter(w=>w.dueDate&&!w.completed&&g(w.dueDate).isBefore(g(),"day")).length;return{total:t,completed:l,today:c,overdue:I}},[s]),_=()=>{if(!n.title.trim())return;const t={title:n.title,description:n.description||void 0,completed:!1,priority:n.priority,dueDate:n.dueDate||void 0,tags:n.tags?n.tags.split(",").map(l=>l.trim()).filter(Boolean):void 0,epicId:n.epicId||void 0,projectId:n.projectId||void 0};T(t),D({title:"",description:"",priority:"medium",dueDate:"",tags:"",epicId:"",projectId:""}),p(!1)},q=()=>{u({status:"all",priority:"all",epicId:"all",projectId:"all"}),B("")};return e.jsxs(r,{children:[e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(i,{variant:"h4",component:"h1",children:"할일 관리 📝"}),e.jsx(W,{variant:"contained",startIcon:e.jsx(ue,{}),onClick:()=>p(!0),children:"할일 추가"})]}),e.jsx(re,{sx:{p:2,mb:3},children:e.jsxs(r,{display:"flex",gap:4,children:[e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h6",children:S.total}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"전체"})]}),e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h6",color:"success.main",children:S.completed}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"완료"})]}),e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h6",color:"primary",children:S.today}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"오늘"})]}),S.overdue>0&&e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h6",color:"error",children:S.overdue}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"지연"})]})]})}),e.jsxs(ke,{value:C,onChange:(t,l)=>$(l),sx:{mb:2},children:[e.jsx(O,{label:e.jsx(K,{badgeContent:S.total,color:"primary",children:"전체"})}),e.jsx(O,{label:e.jsx(K,{badgeContent:S.today,color:"primary",children:"오늘"})}),e.jsx(O,{label:e.jsx(K,{badgeContent:s.filter(t=>t.dueDate&&g(t.dueDate).isSame(g(),"week")).length,color:"primary",children:"이번주"})}),e.jsx(O,{label:e.jsx(K,{badgeContent:S.completed,color:"success",children:"완료"})})]}),e.jsxs(r,{display:"flex",gap:2,mb:3,flexWrap:"wrap",children:[e.jsx(b,{placeholder:"할일 검색...",value:f,onChange:t=>B(t.target.value),sx:{minWidth:300},InputProps:{startAdornment:e.jsx(Ge,{position:"start",children:e.jsx(Ne,{})})}}),e.jsxs(P,{sx:{minWidth:120},children:[e.jsx(M,{children:"상태"}),e.jsxs(F,{value:j.status??"all",onChange:t=>u(l=>({...l,status:t.target.value})),label:"상태",children:[e.jsx(o,{value:"all",children:"전체"}),e.jsx(o,{value:"pending",children:"진행중"}),e.jsx(o,{value:"completed",children:"완료"})]})]}),e.jsxs(P,{sx:{minWidth:120},children:[e.jsx(M,{children:"우선순위"}),e.jsxs(F,{value:j.priority??"all",onChange:t=>u(l=>({...l,priority:t.target.value})),label:"우선순위",children:[e.jsx(o,{value:"all",children:"전체"}),e.jsx(o,{value:"urgent",children:"긴급"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"low",children:"낮음"})]})]}),e.jsxs(P,{sx:{minWidth:150},children:[e.jsx(M,{children:"에픽"}),e.jsxs(F,{value:j.epicId??"all",onChange:t=>u(l=>({...l,epicId:t.target.value})),label:"에픽",children:[e.jsx(o,{value:"all",children:"전체"}),Y.map(t=>e.jsxs(o,{value:t.id,children:[t.emoji," ",t.title]},t.id))]})]}),e.jsx(W,{startIcon:e.jsx(He,{}),onClick:q,variant:"outlined",children:"필터 초기화"})]}),e.jsx(r,{children:Q.length===0?e.jsx(re,{sx:{p:4,textAlign:"center"},children:e.jsx(i,{variant:"h6",color:"text.secondary",children:f||Object.values(j).some(t=>t!=="all")?"조건에 맞는 할일이 없습니다 🔍":"아직 할일이 없습니다. 새로운 할일을 추가해보세요! ✨"})}):Q.map(t=>e.jsx(Wt,{todo:t,onUpdate:L,onDelete:A,onToggleComplete:y},t.id))}),e.jsxs(ae,{open:z,onClose:()=>p(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(ie,{children:"새 할일 추가 ✨"}),e.jsx(ne,{children:e.jsxs(r,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsx(b,{label:"제목",value:n.title,onChange:t=>D(l=>({...l,title:t.target.value})),fullWidth:!0,required:!0}),e.jsx(b,{label:"설명",value:n.description,onChange:t=>D(l=>({...l,description:t.target.value})),fullWidth:!0,multiline:!0,rows:3}),e.jsxs(P,{fullWidth:!0,children:[e.jsx(M,{children:"우선순위"}),e.jsxs(F,{value:n.priority,onChange:t=>D(l=>({...l,priority:t.target.value})),label:"우선순위",children:[e.jsx(o,{value:"low",children:"낮음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"urgent",children:"긴급"})]})]}),e.jsx(b,{label:"마감일",type:"date",value:n.dueDate,onChange:t=>D(l=>({...l,dueDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsxs(P,{fullWidth:!0,children:[e.jsx(M,{children:"에픽"}),e.jsxs(F,{value:n.epicId,onChange:t=>D(l=>({...l,epicId:t.target.value})),label:"에픽",children:[e.jsx(o,{value:"",children:"선택 안함"}),Y.map(t=>e.jsxs(o,{value:t.id,children:[t.emoji," ",t.title]},t.id))]})]}),e.jsxs(P,{fullWidth:!0,children:[e.jsx(M,{children:"프로젝트"}),e.jsxs(F,{value:n.projectId,onChange:t=>D(l=>({...l,projectId:t.target.value})),label:"프로젝트",children:[e.jsx(o,{value:"",children:"선택 안함"}),v.map(t=>e.jsx(o,{value:t.id,children:t.title},t.id))]})]}),e.jsx(b,{label:"태그 (쉼표로 구분)",value:n.tags,onChange:t=>D(l=>({...l,tags:t.target.value})),fullWidth:!0,placeholder:"업무, 개인, 공부"})]})}),e.jsxs(oe,{children:[e.jsx(W,{onClick:()=>p(!1),startIcon:e.jsx(ce,{}),children:"취소"}),e.jsx(W,{onClick:_,variant:"contained",startIcon:e.jsx(je,{}),disabled:!n.title.trim(),children:"추가"})]})]})]})},ve={planning:"#9e9e9e",active:"#4caf50",paused:"#ff9800",completed:"#2196f3",cancelled:"#f44336"},Ye={planning:"계획중",active:"진행중",paused:"일시정지",completed:"완료",cancelled:"취소됨"},Qe={planning:e.jsx($e,{}),active:e.jsx($e,{}),paused:e.jsx(vt,{}),completed:e.jsx(ft,{}),cancelled:e.jsx(ce,{})},zt={urgent:"#f44336",high:"#ff9800",medium:"#2196f3",low:"#4caf50"},_e={urgent:"긴급",high:"높음",medium:"보통",low:"낮음"},Lt=({epic:s,projects:Y,onEdit:v,onDelete:T,onProjectClick:L,onAddProject:A})=>{var _,q;const[y,f]=x.useState(!1),[B,j]=x.useState(!1),[u,C]=x.useState({title:s.title,description:s.description,status:s.status,priority:s.priority,startDate:s.startDate??"",dueDate:s.dueDate??"",color:s.color,emoji:s.emoji??"",tags:((_=s.tags)==null?void 0:_.join(", "))??""}),$=ht(),z=s.isTemporary===!0,p=()=>{const t={...s,title:u.title,description:u.description,status:u.status,priority:u.priority,startDate:u.startDate||void 0,dueDate:u.dueDate||void 0,color:u.color,emoji:u.emoji||void 0,tags:u.tags?u.tags.split(",").map(l=>l.trim()).filter(Boolean):void 0,updatedAt:new Date().toISOString()};v(t),j(!1)},n=()=>{var t;C({title:s.title,description:s.description,status:s.status,priority:s.priority,startDate:s.startDate??"",dueDate:s.dueDate??"",color:s.color,emoji:s.emoji??"",tags:((t=s.tags)==null?void 0:t.join(", "))??""}),j(!1)},D=s.projects.filter(t=>t.status==="completed").length,Q=s.projects.length,S=s.dueDate&&s.status!=="completed"&&g(s.dueDate).isBefore(g(),"day");return e.jsxs(ee,{elevation:z?4:2,sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",transition:"all 0.3s ease",border:z?`2px dashed ${$.palette.warning.main}`:"none",backgroundColor:z?"rgba(255, 152, 0, 0.05)":"inherit","&:hover":{transform:"translateY(-4px)",boxShadow:$.shadows[8]}},children:[z&&e.jsx(r,{sx:{backgroundColor:$.palette.warning.main,color:"white",px:2,py:1,textAlign:"center"},children:e.jsx(i,{variant:"caption",fontWeight:"bold",children:"⚠️ 임시 보관함 - 새로운 에픽을 만들어서 프로젝트들을 정리해보세요!"})}),e.jsx(ut,{avatar:e.jsx(Be,{sx:{bgcolor:s.color,width:48,height:48,fontSize:"1.5rem"},children:s.emoji||Qe[s.status]}),title:e.jsx(i,{variant:"h6",fontWeight:"bold",noWrap:!0,children:s.title}),subheader:e.jsxs(r,{children:[e.jsx(k,{label:Ye[s.status],size:"small",sx:{mr:1,mb:.5,backgroundColor:ve[s.status],color:"white"}}),e.jsx(k,{label:_e[s.priority],size:"small",variant:"outlined",sx:{mb:.5}})]}),action:!z&&e.jsx(U,{children:e.jsx(jt,{})})}),e.jsx(J,{children:e.jsxs(r,{display:"flex",alignItems:"flex-start",gap:2,children:[s.emoji&&e.jsx(Be,{sx:{bgcolor:s.color,width:48,height:48},children:s.emoji}),e.jsxs(r,{flex:1,children:[e.jsxs(r,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(i,{variant:"h5",component:"h2",sx:{flex:1},children:s.title}),e.jsx(k,{size:"small",icon:Qe[s.status],label:Ye[s.status],sx:{backgroundColor:ve[s.status],color:"white"}}),e.jsx(k,{size:"small",label:_e[s.priority],sx:{backgroundColor:zt[s.priority],color:"white",fontSize:"0.75rem"}})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.description}),e.jsxs(r,{mb:2,children:[e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsxs(i,{variant:"body2",children:["진행률: ",D,"/",Q," 프로젝트"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:[Math.round(s.progress),"%"]})]}),e.jsx(be,{variant:"determinate",value:s.progress,sx:{height:8,borderRadius:4,backgroundColor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{backgroundColor:s.color}}})]}),e.jsxs(r,{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",children:[s.startDate&&e.jsx(k,{size:"small",icon:e.jsx(ye,{}),label:`시작: ${g(s.startDate).format("MM/DD")}`,variant:"outlined"}),s.dueDate&&e.jsx(k,{size:"small",icon:e.jsx(ye,{}),label:`마감: ${g(s.dueDate).format("MM/DD")}`,color:S?"error":"default",variant:"outlined"}),(q=s.tags)==null?void 0:q.map((t,l)=>e.jsx(k,{size:"small",label:t,variant:"outlined",sx:{fontSize:"0.7rem"}},l))]})]}),e.jsxs(r,{display:"flex",flexDirection:"column",gap:1,children:[e.jsx(G,{title:"수정",children:e.jsx(U,{size:"small",onClick:()=>j(!0),children:e.jsx(we,{fontSize:"small"})})}),e.jsx(G,{title:"삭제",children:e.jsx(U,{size:"small",onClick:()=>T(s),color:"error",children:e.jsx(Se,{fontSize:"small"})})}),e.jsx(G,{title:y?"접기":"펼치기",children:e.jsx(U,{size:"small",onClick:()=>f(!y),children:y?e.jsx(pt,{}):e.jsx(Je,{})})})]})]})}),e.jsx(mt,{in:y,children:e.jsxs(J,{sx:{pt:0},children:[e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(i,{variant:"h6",display:"flex",alignItems:"center",gap:1,children:[e.jsx(he,{})," 프로젝트 (",Q,")"]}),e.jsx(W,{startIcon:e.jsx(ue,{}),onClick:()=>A(s.id),variant:"outlined",size:"small",children:"프로젝트 추가"})]}),s.projects.length===0?e.jsx(i,{variant:"body2",color:"text.secondary",textAlign:"center",py:2,children:"아직 프로젝트가 없습니다. 프로젝트를 추가해보세요! 🚀"}):e.jsx(Ce,{dense:!0,children:s.projects.map(t=>e.jsx(De,{sx:{pl:0},children:e.jsx(Ie,{primary:e.jsxs(r,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(i,{variant:"body2",children:t.title}),e.jsx(k,{size:"small",label:t.status,sx:{fontSize:"0.7rem",height:"20px",backgroundColor:ve[t.status]??"#grey",color:"white"}})]}),secondary:`진행률: ${t.progress}% | 태스크: ${t.tasks.length}개`})},t.id))})]})}),z&&e.jsx(gt,{sx:{justifyContent:"center",pb:2},children:e.jsx(W,{variant:"contained",color:"primary",startIcon:e.jsx(ue,{}),onClick:()=>{v({})},children:"새 에픽 만들기"})}),e.jsxs(ae,{open:B,onClose:n,maxWidth:"md",fullWidth:!0,children:[e.jsx(ie,{children:"에픽 수정 🏛️"}),e.jsx(ne,{children:e.jsxs(r,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsxs(r,{display:"flex",gap:2,children:[e.jsx(b,{label:"제목",value:u.title,onChange:t=>C(l=>({...l,title:t.target.value})),fullWidth:!0,required:!0}),e.jsx(b,{label:"이모지",value:u.emoji,onChange:t=>C(l=>({...l,emoji:t.target.value})),sx:{width:100},placeholder:"🏛️"})]}),e.jsx(b,{label:"설명",value:u.description,onChange:t=>C(l=>({...l,description:t.target.value})),fullWidth:!0,multiline:!0,rows:3}),e.jsxs(r,{display:"flex",gap:2,children:[e.jsxs(P,{fullWidth:!0,children:[e.jsx(M,{children:"상태"}),e.jsxs(F,{value:u.status,onChange:t=>C(l=>({...l,status:t.target.value})),label:"상태",children:[e.jsx(o,{value:"planning",children:"계획중"}),e.jsx(o,{value:"active",children:"진행중"}),e.jsx(o,{value:"paused",children:"일시정지"}),e.jsx(o,{value:"completed",children:"완료"}),e.jsx(o,{value:"cancelled",children:"취소됨"})]})]}),e.jsxs(P,{fullWidth:!0,children:[e.jsx(M,{children:"우선순위"}),e.jsxs(F,{value:u.priority,onChange:t=>C(l=>({...l,priority:t.target.value})),label:"우선순위",children:[e.jsx(o,{value:"low",children:"낮음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"urgent",children:"긴급"})]})]})]}),e.jsxs(r,{display:"flex",gap:2,children:[e.jsx(b,{label:"시작일",type:"date",value:u.startDate,onChange:t=>C(l=>({...l,startDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsx(b,{label:"마감일",type:"date",value:u.dueDate,onChange:t=>C(l=>({...l,dueDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}})]}),e.jsx(b,{label:"색상",type:"color",value:u.color,onChange:t=>C(l=>({...l,color:t.target.value})),fullWidth:!0}),e.jsx(b,{label:"태그 (쉼표로 구분)",value:u.tags,onChange:t=>C(l=>({...l,tags:t.target.value})),fullWidth:!0,placeholder:"업무, 개인, 프로젝트"})]})}),e.jsxs(oe,{children:[e.jsx(W,{onClick:n,startIcon:e.jsx(ce,{}),children:"취소"}),e.jsx(W,{onClick:p,variant:"contained",startIcon:e.jsx(je,{}),disabled:!u.title.trim(),children:"저장"})]})]})]})},Pt=({epics:s,onAddEpic:Y,onUpdateEpic:v,onDeleteEpic:T,onAddProject:L})=>{const[A,y]=x.useState(""),[f,B]=x.useState("all"),[j,u]=x.useState("all"),[C,$]=x.useState(0),[z,p]=x.useState(!1),[n,D]=x.useState({title:"",description:"",status:"planning",priority:"medium",startDate:"",dueDate:"",color:"#2196f3",emoji:"🏛️",tags:""}),Q=x.useMemo(()=>{let t=s;switch(C){case 1:t=t.filter(c=>c.status==="active");break;case 2:t=t.filter(c=>c.status==="completed");break}A&&(t=t.filter(c=>{var I;return c.title.toLowerCase().includes(A.toLowerCase())||c.description.toLowerCase().includes(A.toLowerCase())||((I=c.tags)==null?void 0:I.some(w=>w.toLowerCase().includes(A.toLowerCase())))})),f!=="all"&&(t=t.filter(c=>c.status===f)),j!=="all"&&(t=t.filter(c=>c.priority===j));const l={urgent:0,high:1,medium:2,low:3};return t.sort((c,I)=>c.status==="completed"&&I.status!=="completed"?1:c.status!=="completed"&&I.status==="completed"?-1:l[c.priority]-l[I.priority])},[s,A,f,j,C]),S=x.useMemo(()=>{const t=s.length,l=s.filter(w=>w.status==="active").length,c=s.filter(w=>w.status==="completed").length,I=s.filter(w=>w.status==="planning").length;return{total:t,active:l,completed:c,planning:I}},[s]),_=()=>{if(!n.title.trim())return;const t={title:n.title,description:n.description,status:n.status,priority:n.priority,startDate:n.startDate||void 0,dueDate:n.dueDate||void 0,color:n.color,emoji:n.emoji||void 0,tags:n.tags?n.tags.split(",").map(l=>l.trim()).filter(Boolean):void 0};Y(t),D({title:"",description:"",status:"planning",priority:"medium",startDate:"",dueDate:"",color:"#2196f3",emoji:"🏛️",tags:""}),p(!1)},q=()=>{B("all"),u("all"),y("")};return e.jsxs(r,{children:[e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(i,{variant:"h4",component:"h1",children:"에픽 관리 🏛️"}),e.jsx(W,{variant:"contained",startIcon:e.jsx(ue,{}),onClick:()=>p(!0),children:"에픽 추가"})]}),e.jsx(re,{sx:{p:2,mb:3},children:e.jsxs(r,{display:"flex",gap:4,children:[e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h6",children:S.total}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"전체"})]}),e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h6",color:"primary",children:S.active}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"진행중"})]}),e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h6",color:"success.main",children:S.completed}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"완료"})]}),e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h6",color:"warning.main",children:S.planning}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"계획중"})]})]})}),e.jsxs(ke,{value:C,onChange:(t,l)=>$(l),sx:{mb:2},children:[e.jsx(O,{label:e.jsx(K,{badgeContent:S.total,color:"primary",children:"전체"})}),e.jsx(O,{label:e.jsx(K,{badgeContent:S.active,color:"primary",children:"진행중"})}),e.jsx(O,{label:e.jsx(K,{badgeContent:S.completed,color:"success",children:"완료"})})]}),e.jsxs(r,{display:"flex",gap:2,mb:3,flexWrap:"wrap",children:[e.jsx(b,{placeholder:"에픽 검색...",value:A,onChange:t=>y(t.target.value),sx:{minWidth:300},InputProps:{startAdornment:e.jsx(Ge,{position:"start",children:e.jsx(Ne,{})})}}),e.jsxs(P,{sx:{minWidth:120},children:[e.jsx(M,{children:"상태"}),e.jsxs(F,{value:f,onChange:t=>B(t.target.value),label:"상태",children:[e.jsx(o,{value:"all",children:"전체"}),e.jsx(o,{value:"planning",children:"계획중"}),e.jsx(o,{value:"active",children:"진행중"}),e.jsx(o,{value:"paused",children:"일시정지"}),e.jsx(o,{value:"completed",children:"완료"}),e.jsx(o,{value:"cancelled",children:"취소됨"})]})]}),e.jsxs(P,{sx:{minWidth:120},children:[e.jsx(M,{children:"우선순위"}),e.jsxs(F,{value:j,onChange:t=>u(t.target.value),label:"우선순위",children:[e.jsx(o,{value:"all",children:"전체"}),e.jsx(o,{value:"urgent",children:"긴급"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"low",children:"낮음"})]})]}),e.jsx(W,{startIcon:e.jsx(He,{}),onClick:q,variant:"outlined",children:"필터 초기화"})]}),e.jsx(r,{children:Q.length===0?e.jsx(re,{sx:{p:4,textAlign:"center"},children:e.jsx(i,{variant:"h6",color:"text.secondary",children:A||f!=="all"||j!=="all"?"조건에 맞는 에픽이 없습니다 🔍":"아직 에픽이 없습니다. 새로운 에픽을 추가해보세요! 🏛️"})}):e.jsx(E,{container:!0,spacing:2,children:Q.map(t=>e.jsx(E,{item:!0,xs:12,children:e.jsx(Lt,{epic:t,onEdit:v,onDelete:l=>T(l.id),onAddProject:L})},t.id))})}),e.jsxs(ae,{open:z,onClose:()=>p(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(ie,{children:"새 에픽 추가 🏛️"}),e.jsx(ne,{children:e.jsxs(r,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsxs(r,{display:"flex",gap:2,children:[e.jsx(b,{label:"제목",value:n.title,onChange:t=>D(l=>({...l,title:t.target.value})),fullWidth:!0,required:!0}),e.jsx(b,{label:"이모지",value:n.emoji,onChange:t=>D(l=>({...l,emoji:t.target.value})),sx:{width:100},placeholder:"🏛️"})]}),e.jsx(b,{label:"설명",value:n.description,onChange:t=>D(l=>({...l,description:t.target.value})),fullWidth:!0,multiline:!0,rows:3,required:!0}),e.jsxs(r,{display:"flex",gap:2,children:[e.jsxs(P,{fullWidth:!0,children:[e.jsx(M,{children:"상태"}),e.jsxs(F,{value:n.status,onChange:t=>D(l=>({...l,status:t.target.value})),label:"상태",children:[e.jsx(o,{value:"planning",children:"계획중"}),e.jsx(o,{value:"active",children:"진행중"}),e.jsx(o,{value:"paused",children:"일시정지"}),e.jsx(o,{value:"completed",children:"완료"}),e.jsx(o,{value:"cancelled",children:"취소됨"})]})]}),e.jsxs(P,{fullWidth:!0,children:[e.jsx(M,{children:"우선순위"}),e.jsxs(F,{value:n.priority,onChange:t=>D(l=>({...l,priority:t.target.value})),label:"우선순위",children:[e.jsx(o,{value:"low",children:"낮음"}),e.jsx(o,{value:"medium",children:"보통"}),e.jsx(o,{value:"high",children:"높음"}),e.jsx(o,{value:"urgent",children:"긴급"})]})]})]}),e.jsxs(r,{display:"flex",gap:2,children:[e.jsx(b,{label:"시작일",type:"date",value:n.startDate,onChange:t=>D(l=>({...l,startDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsx(b,{label:"마감일",type:"date",value:n.dueDate,onChange:t=>D(l=>({...l,dueDate:t.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}})]}),e.jsx(b,{label:"색상",type:"color",value:n.color,onChange:t=>D(l=>({...l,color:t.target.value})),fullWidth:!0}),e.jsx(b,{label:"태그 (쉼표로 구분)",value:n.tags,onChange:t=>D(l=>({...l,tags:t.target.value})),fullWidth:!0,placeholder:"업무, 개인, 프로젝트"})]})}),e.jsxs(oe,{children:[e.jsx(W,{onClick:()=>p(!1),startIcon:e.jsx(ce,{}),children:"취소"}),e.jsx(W,{onClick:_,variant:"contained",startIcon:e.jsx(je,{}),disabled:!n.title.trim()||!n.description.trim(),children:"추가"})]})]})]})},$t=()=>{const[s,Y]=x.useState(0);x.useState(!1);const{todos:v,epics:T,projects:L,addTodo:A,updateTodo:y,deleteTodo:f,toggleTodoComplete:B,addEpic:j,updateEpic:u,deleteEpic:C,addProject:$,deleteProject:z,getTodosByProjectId:p,getEpicById:n,getProjectsByEpicId:D,refreshFirebaseData:Q,syncFirebaseToLocal:S,migrateLocalDataToFirebase:_,isMigrationButtonActive:q,checkLocalDataForMigration:t}=Tt(),[l,c]=x.useState(!1),[I,w]=x.useState(null),[N,Te]=x.useState([]),[Ae,We]=x.useState(!1),[Ee,ze]=x.useState(!1),[pe,Le]=x.useState(!1),[V,X]=x.useState(null),[Z,Pe]=x.useState(null),Ke=async()=>{if(!t().hasData){X("마이그레이션할 로컬 데이터가 없습니다.");return}Le(!0),X(null);try{const d=await _();X(d.message),d.success&&console.log("🎉 마이그레이션 성공:",d.details)}catch(d){console.error("❌ 마이그레이션 처리 실패:",d),X(`마이그레이션 실패: ${d}`)}finally{Le(!1)}},me=x.useMemo(()=>{const a=q(),d=t();return{show:a&&d.hasData,disabled:pe||!d.hasData,tooltip:a?d.hasData?`마이그레이션 가능: 에픽 ${d.epicsCount}개, 프로젝트 ${d.projectsCount}개, 할일 ${d.todosCount}개`:"마이그레이션할 로컬 데이터가 없습니다":"마이그레이션 기능은 2025년 8월 8일까지만 사용 가능합니다"}},[pe,q,t]);x.useEffect(()=>{if(V&&V.includes("성공")){const a=setTimeout(()=>{X(null)},5e3);return()=>clearTimeout(a)}},[V]),x.useEffect(()=>{if(Z&&Z.includes("완료")){const a=setTimeout(()=>{Pe(null)},5e3);return()=>clearTimeout(a)}},[Z]);const R=x.useMemo(()=>{const a=v.length,d=v.filter(h=>h.completed).length,m=a>0?Math.round(d/a*100):0,H=v.filter(h=>h.dueDate&&g(h.dueDate).isSame(g(),"day")).length,ge=v.filter(h=>h.dueDate&&!h.completed&&g(h.dueDate).isBefore(g(),"day")).length,de=v.filter(h=>h.dueDate&&!h.completed&&g(h.dueDate).isAfter(g(),"day")).length,se={urgent:v.filter(h=>h.priority==="urgent").length,high:v.filter(h=>h.priority==="high").length,medium:v.filter(h=>h.priority==="medium").length,low:v.filter(h=>h.priority==="low").length},le=[];for(let h=6;h>=0;h--){const ot=g().subtract(h,"day").format("YYYY-MM-DD"),ct=v.filter(Fe=>Fe.completedAt&&g(Fe.completedAt).isSame(g().subtract(h,"day"),"day")).length;le.push({date:ot,completed:ct})}return{totalTodos:a,completedTodos:d,completionRate:m,todayTodos:H,overdueTodos:ge,upcomingTodos:de,priorityBreakdown:se,dailyCompletions:le}},[v]),te=x.useMemo(()=>{const a=T.length,d=T.filter(h=>h.status==="active").length,m=T.filter(h=>h.status==="completed").length,H=L.length,ge=L.filter(h=>h.status==="completed").length,de=v.filter(h=>h.epicId),se=de.length,le=de.filter(h=>h.completed).length;return{totalEpics:a,activeEpics:d,completedEpics:m,totalProjects:H,completedProjects:ge,totalTodos:se,completedTodos:le,completionRate:se>0?Math.round(le/se*100):0}},[T,L,v]),Me=x.useMemo(()=>{const a=[];L.forEach(m=>{const H=p(m.id);a.push({type:"project",project:m,todos:H,epic:n(m.epicId||"")||null})});const d=v.filter(m=>!m.projectId);return d.length>0&&a.push({type:"unassigned",project:null,todos:d,epic:null}),a},[L,v,p,n]),Ve=async a=>{await A(a)},Xe=async a=>{await y(a)},Ze=async a=>{await f(a)},et=async a=>{await B(a)},tt=async a=>{await j(a)},st=async a=>{await u(a)},lt=a=>{const d=T.find(H=>H.id===a)??null,m=D(a)??[];w(d),Te(m),We(!1),c(!0)},rt=async()=>{if(I)try{ze(!0),Ae&&N.length>0&&await Promise.all(N.map(a=>z(a.id))),await C(I.id),c(!1),w(null),Te([])}finally{ze(!1)}},at=async a=>{const d=prompt("프로젝트 제목을 입력하세요:");d&&d.trim()&&await $({title:d.trim(),description:"",status:"active",priority:"medium",startDate:g().toISOString(),progress:0,tags:[]},a)},it=()=>e.jsxs(r,{children:[e.jsx(i,{variant:"h5",gutterBottom:!0,children:"계획 관리 개요 📊"}),e.jsxs(E,{container:!0,spacing:3,children:[e.jsx(E,{item:!0,xs:12,md:6,children:e.jsx(ee,{children:e.jsxs(J,{children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[e.jsx(he,{color:"primary"}),"할일 통계"]}),e.jsxs(r,{mb:2,children:[e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsx(i,{variant:"body2",children:"완료율"}),e.jsxs(i,{variant:"body2",children:[R.completionRate,"%"]})]}),e.jsx(be,{variant:"determinate",value:R.completionRate,sx:{height:8,borderRadius:4}})]}),e.jsxs(E,{container:!0,spacing:2,children:[e.jsx(E,{item:!0,xs:6,children:e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h4",color:"primary",children:R.totalTodos}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"전체"})]})}),e.jsx(E,{item:!0,xs:6,children:e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h4",color:"success.main",children:R.completedTodos}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"완료"})]})}),e.jsx(E,{item:!0,xs:6,children:e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h4",color:"warning.main",children:R.todayTodos}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"오늘"})]})}),e.jsx(E,{item:!0,xs:6,children:e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h4",color:"error.main",children:R.overdueTodos}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"지연"})]})})]}),e.jsxs(r,{mt:2,children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"우선순위별 분포"}),e.jsxs(r,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(k,{size:"small",label:`긴급 ${R.priorityBreakdown.urgent}`,color:"error"}),e.jsx(k,{size:"small",label:`높음 ${R.priorityBreakdown.high}`,color:"warning"}),e.jsx(k,{size:"small",label:`보통 ${R.priorityBreakdown.medium}`,color:"primary"}),e.jsx(k,{size:"small",label:`낮음 ${R.priorityBreakdown.low}`,color:"success"})]})]})]})})}),e.jsx(E,{item:!0,xs:12,md:6,children:e.jsx(ee,{children:e.jsxs(J,{children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[e.jsx(Oe,{color:"secondary"}),"에픽 통계"]}),e.jsxs(E,{container:!0,spacing:2,children:[e.jsx(E,{item:!0,xs:6,children:e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h4",color:"primary",children:te.totalEpics}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"전체 에픽"})]})}),e.jsx(E,{item:!0,xs:6,children:e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h4",color:"success.main",children:te.activeEpics}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"진행중"})]})}),e.jsx(E,{item:!0,xs:6,children:e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h4",color:"info.main",children:te.totalProjects}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"총 프로젝트"})]})}),e.jsx(E,{item:!0,xs:6,children:e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"h4",color:"secondary.main",children:te.totalTodos}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"에픽 할일"})]})})]})]})})}),e.jsx(E,{item:!0,xs:12,children:e.jsx(ee,{children:e.jsxs(J,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"진행중인 에픽들 🚀"}),T.filter(a=>a.status==="active").length===0?e.jsx(i,{variant:"body2",color:"text.secondary",textAlign:"center",py:2,children:"진행중인 에픽이 없습니다. 새로운 에픽을 만들어보세요! ✨"}):e.jsx(r,{display:"flex",flexDirection:"column",gap:2,children:T.filter(a=>a.status==="active").slice(0,3).map(a=>e.jsxs(r,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:a.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem"},children:a.emoji}),e.jsxs(r,{flex:1,children:[e.jsx(i,{variant:"body1",fontWeight:"bold",children:a.title}),e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:a.description}),e.jsxs(i,{variant:"body2",children:[Math.round(a.progress),"%"]})]}),e.jsx(be,{variant:"determinate",value:a.progress,sx:{mt:.5,height:4,borderRadius:2,"& .MuiLinearProgress-bar":{backgroundColor:a.color}}})]})]},a.id))})]})})})]})]}),nt=()=>e.jsxs(r,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"📁 프로젝트별 할일 관리"}),Me.length===0?e.jsx(ee,{sx:{borderRadius:2},children:e.jsxs(J,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"아직 할일이 없어요! 📝"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"새로운 할일을 추가해서 프로젝트별로 관리해보세요!"})]})}):Me.map((a,d)=>e.jsxs(It,{sx:{mb:2,borderRadius:2},children:[e.jsx(wt,{expandIcon:e.jsx(Je,{}),children:e.jsxs(r,{display:"flex",alignItems:"center",gap:2,width:"100%",children:[a.type==="project"&&a.project?e.jsxs(e.Fragment,{children:[e.jsx(qe,{color:"primary"}),e.jsxs(r,{flex:1,children:[e.jsx(i,{variant:"h6",children:a.project.title}),a.epic&&e.jsx(k,{size:"small",label:`${a.epic.emoji} ${a.epic.title}`,sx:{fontSize:"0.7rem",backgroundColor:a.epic.color+"20",color:a.epic.color,border:`1px solid ${a.epic.color}40`,mt:.5,borderRadius:2}})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{color:"secondary"}),e.jsx(i,{variant:"h6",flex:1,children:"미분류 할일"})]}),e.jsx(k,{size:"small",label:`${a.todos.filter(m=>m.completed).length}/${a.todos.length}`,color:"primary",sx:{borderRadius:2}})]})}),e.jsx(St,{children:e.jsx(Ce,{dense:!0,children:a.todos.map(m=>e.jsxs(De,{sx:{px:0},children:[e.jsx(kt,{sx:{minWidth:32},children:e.jsx(fe,{size:"small",checked:m.completed,onChange:()=>B(m.id)})}),e.jsx(Ie,{primary:e.jsx(i,{variant:"body2",sx:{textDecoration:m.completed?"line-through":"none",opacity:m.completed?.7:1},children:m.title}),secondary:e.jsxs(r,{display:"flex",alignItems:"center",gap:1,mt:.5,children:[e.jsx(k,{size:"small",label:m.priority==="urgent"?"긴급":m.priority==="high"?"높음":m.priority==="medium"?"보통":"낮음",color:m.priority==="urgent"?"error":m.priority==="high"?"warning":m.priority==="medium"?"primary":"success",sx:{fontSize:"0.7rem",height:"18px",borderRadius:2}}),m.dueDate&&e.jsx(i,{variant:"caption",color:"text.secondary",children:g(m.dueDate).format("MM/DD")})]})}),e.jsxs(r,{display:"flex",gap:.5,children:[e.jsx(G,{title:"수정",children:e.jsx(U,{size:"small",onClick:()=>{console.log("Edit todo:",m.id)},children:e.jsx(we,{fontSize:"small"})})}),e.jsx(G,{title:"삭제",children:e.jsx(U,{size:"small",color:"error",onClick:()=>f(m.id),children:e.jsx(Se,{fontSize:"small"})})})]})]},m.id))})})]},d))]});return e.jsxs(yt,{maxWidth:"xl",children:[e.jsx(i,{variant:"h4",component:"h1",fontWeight:"bold",children:"📝 계획 관리"}),e.jsxs(r,{py:3,children:[e.jsx(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:e.jsx(r,{display:"flex",gap:2,children:me.show&&e.jsx(G,{title:me.tooltip,children:e.jsx(W,{variant:"outlined",startIcon:e.jsx(bt,{}),onClick:Ke,disabled:me.disabled,color:"warning",sx:{borderColor:"orange",color:"orange","&:hover":{borderColor:"darkorange",backgroundColor:"rgba(255, 165, 0, 0.04)"}},children:pe?"마이그레이션 중...":"로컬 데이터 마이그레이션"})})})}),(()=>{const a=q(),d=t();return a&&d.hasData?e.jsx(xe,{severity:"warning",sx:{mb:3},children:e.jsxs(i,{variant:"body2",children:["🚀 ",e.jsx("strong",{children:"로컬 데이터 마이그레이션 가능!"}),"에픽 ",d.epicsCount,"개, 프로젝트 ",d.projectsCount,"개, 할일 ",d.todosCount,"개를 Firebase로 이동할 수 있습니다. (2025년 8월 8일까지 이용 가능)"]})}):a&&!d.hasData?e.jsx(xe,{severity:"success",sx:{mb:3},children:e.jsxs(i,{variant:"body2",children:["✅ ",e.jsx("strong",{children:"모든 데이터가 Firebase에 저장되어 있습니다!"}),"마이그레이션할 로컬 데이터가 없습니다."]})}):null})(),V&&e.jsx(xe,{severity:V.includes("성공")?"success":"error",sx:{mb:3},action:e.jsx(U,{size:"small",onClick:()=>X(null),sx:{"&:hover":{backgroundColor:"transparent"}},children:e.jsx(Re,{fontSize:"small"})}),children:V}),Z&&e.jsx(xe,{severity:Z.includes("완료")?"success":"error",sx:{mb:3},action:e.jsx(U,{size:"small",onClick:()=>Pe(null),sx:{"&:hover":{backgroundColor:"transparent"}},children:e.jsx(Re,{fontSize:"small"})}),children:Z}),e.jsx(re,{sx:{mb:3},children:e.jsxs(ke,{value:s,onChange:(a,d)=>Y(d),variant:"fullWidth",children:[e.jsx(O,{icon:e.jsx(Ct,{}),label:"개요",iconPosition:"start"}),e.jsx(O,{icon:e.jsx(Oe,{}),label:`에픽 (${te.totalEpics})`,iconPosition:"start"}),e.jsx(O,{icon:e.jsx(qe,{}),label:`프로젝트 (${L.length})`,iconPosition:"start"}),e.jsx(O,{icon:e.jsx(he,{}),label:`할일 (${R.totalTodos})`,iconPosition:"start"})]})}),e.jsxs(r,{children:[s===0&&it(),s===1&&e.jsx(Pt,{epics:T,onAddEpic:tt,onUpdateEpic:st,onDeleteEpic:lt,onAddProject:at}),s===2&&nt(),s===3&&e.jsx(Et,{todos:v,epics:T,projects:L,onAddTodo:Ve,onUpdateTodo:Xe,onDeleteTodo:Ze,onToggleComplete:et})]})]}),e.jsxs(ae,{open:l,onClose:()=>c(!1),children:[e.jsx(ie,{children:"에픽 삭제"}),e.jsxs(ne,{children:[e.jsxs(i,{variant:"body1",children:['"',I==null?void 0:I.title,'" 에픽을 삭제하시겠습니까?',N.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"이 에픽에 속한 프로젝트 ",N.length,"개도 함께 삭제됩니다."]})]}),e.jsxs(r,{mt:2,children:[e.jsx(i,{variant:"body2",fontWeight:"bold",children:"삭제될 프로젝트:"}),e.jsx(Ce,{dense:!0,children:N.map(a=>e.jsx(De,{sx:{py:.5},children:e.jsx(Ie,{primary:a.title})},a.id))})]}),e.jsx(Dt,{control:e.jsx(fe,{checked:Ae,onChange:a=>We(a.target.checked),name:"alsoDeleteProjects",color:"primary"}),label:"함께 삭제"})]}),e.jsxs(oe,{children:[e.jsx(W,{onClick:()=>c(!1),color:"primary",children:"취소"}),e.jsx(W,{onClick:rt,color:"error",variant:"contained",disabled:Ee,children:Ee?"삭제 중...":"삭제"})]})]})]})};export{$t as default};
